# Meilisearch Configuration
# Generate a secure key with: openssl rand -hex 32
MEILI_MASTER_KEY=your-secure-master-key-min-16-chars

# Admin API Secret for reindexing
# Generate with: openssl rand -hex 32
ADMIN_SECRET=your-admin-secret-for-reindex-api

# Yandex Maps JS API key (used for interactive map + geosearch)
YANDEX_MAPS_API_KEY=your-yandex-maps-api-key

# Host port (default 8131)
HOST_PORT=8131

# Database (Auth / plans / AI limits)
# For the docker-compose Postgres service in this repo:
POSTGRES_USER=biznesinfo
POSTGRES_PASSWORD=change-me
POSTGRES_DB=biznesinfo
DATABASE_URL=postgresql://biznesinfo:change-me@postgres:5432/biznesinfo

# Auth feature flags & settings
AUTH_ENABLED=0
# Cookie secure flag (default: true in production)
AUTH_COOKIE_SECURE=1
# Session lifetime in days
AUTH_SESSION_DAYS=30
# Password reset token TTL (minutes)
AUTH_RESET_TOKEN_TTL_MIN=30
# Return reset token in JSON response (debug only!)
AUTH_DEBUG_RESET_TOKENS=0
# Optional: upstream login endpoint for premium/admin federation between environments.
# Example (cross-stack Docker network routing):
# AUTH_FEDERATION_UPSTREAM_LOGIN_URL=http://biznesinfo-app:3000/api/auth/login
AUTH_FEDERATION_UPSTREAM_LOGIN_URL=

# Optional email (for password reset)
SMTP_URL=
EMAIL_FROM=no-reply@biznesinfo-develop.lucheestiy.com
PUBLIC_BASE_URL=https://biznesinfo-develop.lucheestiy.com

# Optional: store AI chat history in a separate DB (e.g. Show DB), not in Biznesinfo DB.
# If empty, chat history stays in DATABASE_URL.
AI_CHATS_DATABASE_URL=
# Defaults used by docker-compose when AI_CHATS_DATABASE_URL is not set:
AI_CHATS_DB_USER=show_ai
AI_CHATS_DB_PASSWORD=show_ai_change_me
AI_CHATS_DB_NAME=show_ai_chats
# Backward-compatible alias (used only when AI_CHATS_DATABASE_URL is empty)
SHOW_DATABASE_URL=

# Upstream domain suffix for Biznesinfo logos (enables /api/biznesinfo/logo proxy + caching)
# Example resolved URL: https://{company-subdomain}.{suffix}/images/logo/12345.gif
# For Biznesinfo/ibiz sources this is usually:
BIZNESINFO_LOGO_UPSTREAM_SUFFIX=ibiz.by

# AI assistant (optional realtime replies)
# By default the assistant runs in stub mode (records requests; returns a stub reply).
AI_ASSISTANT_PROVIDER=stub  # stub|openai|codex|minimax
# Optional: allow request-level provider override for QA runs (payload._assistantProviderOverride).
# Keep disabled in normal usage.
AI_ASSISTANT_ALLOW_PROVIDER_OVERRIDE=0
# Optional: allow provider/model switch from /assistant UI (payload source=assistant_page).
AI_ASSISTANT_ALLOW_PROVIDER_OVERRIDE_UI=0
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_TIMEOUT_SEC=20
OPENAI_MAX_TOKENS=800
# MiniMax API (OpenAI-compatible endpoint)
MINIMAX_API_KEY=
MINIMAX_MODEL=MiniMax-M2.5
MINIMAX_BASE_URL=https://api.minimax.io/v1
MINIMAX_TIMEOUT_SEC=20
MINIMAX_MAX_TOKENS=800
MINIMAX_TEMPERATURE=0.2
# Optional website scan for company facts (best-effort; only for public http/https company URLs)
AI_WEBSITE_SCAN_ENABLED=1
AI_WEBSITE_SCAN_TIMEOUT_MS=4200

# Codex CLI Auth (optional)
# If AI_ASSISTANT_PROVIDER=codex, the server uses your Codex CLI ChatGPT login by calling
# `https://chatgpt.com/backend-api/codex/responses` with the Bearer token from CODEX_AUTH_JSON_PATH
# (defaults to /run/secrets/codex_auth_json in Docker).
# The file must contain JSON with `tokens.access_token` (for example, a synced copy of /root/.codex/auth.json).
CODEX_AUTH_JSON_PATH=/run/secrets/codex_auth_json
CODEX_BASE_URL=https://chatgpt.com/backend-api/codex
CODEX_MODEL=gpt-5.2-codex
