{
  "meta": {
    "version": "1.0",
    "generatedAt": "2026-02-07T03:29:39.077Z",
    "source": "extracted-from-scenarios.json",
    "description": "Focused regression set for ranking follow-ups and context continuity",
    "scenarioIds": [
      "S003",
      "S005",
      "S007",
      "S008",
      "S014"
    ]
  },
  "scenarios": [
    {
      "id": "S003",
      "title": "Товарный бетон: Брест -> Южный",
      "personaGoal": "Прораб, ищет поставщиков бетона для объекта с жестким дедлайном.",
      "tags": [
        "sourcing",
        "geo_refinement",
        "multi_turn",
        "ranking"
      ],
      "expectedBehavior": [
        "Дать полезный first-pass по поиску поставщиков/подрядчиков без пустого отказа.",
        "На втором ходе интерпретировать короткое гео-уточнение как продолжение предыдущего запроса.",
        "На третьем ходе дать shortlist/рейтинг или прозрачную методику ранжирования с оговоркой по неопределенности."
      ],
      "strictPassFail": [
        "Каждый ход: не stub, содержательный ответ по теме.",
        "Ход 2: в ответе есть связь с исходной услугой/товаром + гео-уточнение.",
        "Ход 3: либо есть конкретные /company/ кандидаты, либо структурированный рейтинг с критериями; пустой отказ запрещен."
      ],
      "turns": [
        {
          "user": "Нужны поставщики товарного бетона в Бресте, объем 45 м3 на следующей неделе.",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S003.T1.C1"
            },
            {
              "type": "includes_any",
              "patterns": [
                "бетон|раствор|рбу",
                "поставщ",
                "supplier",
                "рубр",
                "ключев"
              ],
              "description": "Ответ должен быть по теме поиска поставщиков/услуги",
              "id": "S003.T1.C2"
            },
            {
              "type": "reply_length_min",
              "min": 120,
              "description": "Ответ должен быть полезным, не односложным",
              "id": "S003.T1.C3"
            }
          ]
        },
        {
          "user": "Южный",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S003.T2.C1"
            },
            {
              "type": "mentions_any_terms",
              "terms": [
                "бетон",
                "раствор",
                "рбу"
              ],
              "min": 1,
              "description": "Должна сохраниться связь с исходным товаром/услугой",
              "id": "S003.T2.C2"
            },
            {
              "type": "includes_any",
              "patterns": [
                "брест",
                "южн"
              ],
              "description": "Должно учитываться гео-уточнение (город/район)",
              "id": "S003.T2.C3"
            }
          ]
        },
        {
          "user": "Сделай короткий рейтинг топ-3 по надежности и рискам срыва поставки.",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S003.T3.C1"
            },
            {
              "type": "not_refusal_only",
              "description": "Ответ не должен быть пустым отказом без полезного next step",
              "id": "S003.T3.C2"
            },
            {
              "type": "any_of",
              "checks": [
                {
                  "type": "company_path_min_count",
                  "min": 2,
                  "description": "Должно быть минимум 2 ссылки вида /company/..."
                },
                {
                  "type": "all_of",
                  "checks": [
                    {
                      "type": "numbered_list_min",
                      "min": 2,
                      "description": "Должно быть минимум 2 нумерованных пункта"
                    },
                    {
                      "type": "includes_any",
                      "patterns": [
                        "критер",
                        "надеж",
                        "надеж",
                        "риск",
                        "прозрач"
                      ],
                      "description": "Если нет явных кандидатов, нужен прозрачный рейтинг/методика"
                    }
                  ],
                  "description": "Должны выполняться все условия в группе"
                }
              ],
              "description": "Нужен конкретный shortlist или прозрачное ранжирование",
              "id": "S003.T3.C3"
            }
          ]
        }
      ]
    },
    {
      "id": "S005",
      "title": "Шиномонтаж: Минск -> Каменная Горка",
      "personaGoal": "Владелец автопарка, ищет шиномонтаж рядом с локацией.",
      "tags": [
        "sourcing",
        "geo_refinement",
        "multi_turn",
        "ranking"
      ],
      "expectedBehavior": [
        "Дать полезный first-pass по поиску поставщиков/подрядчиков без пустого отказа.",
        "На втором ходе интерпретировать короткое гео-уточнение как продолжение предыдущего запроса.",
        "На третьем ходе дать shortlist/рейтинг или прозрачную методику ранжирования с оговоркой по неопределенности."
      ],
      "strictPassFail": [
        "Каждый ход: не stub, содержательный ответ по теме.",
        "Ход 2: в ответе есть связь с исходной услугой/товаром + гео-уточнение.",
        "Ход 3: либо есть конкретные /company/ кандидаты, либо структурированный рейтинг с критериями; пустой отказ запрещен."
      ],
      "turns": [
        {
          "user": "Нужен reliable шиномонтаж в Минске для коммерческих авто.",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S005.T1.C1"
            },
            {
              "type": "includes_any",
              "patterns": [
                "шиномонтаж|балансир|вулкан",
                "поставщ",
                "supplier",
                "рубр",
                "ключев"
              ],
              "description": "Ответ должен быть по теме поиска поставщиков/услуги",
              "id": "S005.T1.C2"
            },
            {
              "type": "reply_length_min",
              "min": 120,
              "description": "Ответ должен быть полезным, не односложным",
              "id": "S005.T1.C3"
            }
          ]
        },
        {
          "user": "Каменная Горка",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S005.T2.C1"
            },
            {
              "type": "mentions_any_terms",
              "terms": [
                "шиномонтаж",
                "балансир",
                "вулкан"
              ],
              "min": 1,
              "description": "Должна сохраниться связь с исходным товаром/услугой",
              "id": "S005.T2.C2"
            },
            {
              "type": "includes_any",
              "patterns": [
                "минск",
                "камен"
              ],
              "description": "Должно учитываться гео-уточнение (город/район)",
              "id": "S005.T2.C3"
            }
          ]
        },
        {
          "user": "Сделай practical top-3 и напиши, кого прозвонить сегодня первым.",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S005.T3.C1"
            },
            {
              "type": "not_refusal_only",
              "description": "Ответ не должен быть пустым отказом без полезного next step",
              "id": "S005.T3.C2"
            },
            {
              "type": "any_of",
              "checks": [
                {
                  "type": "company_path_min_count",
                  "min": 2,
                  "description": "Должно быть минимум 2 ссылки вида /company/..."
                },
                {
                  "type": "all_of",
                  "checks": [
                    {
                      "type": "numbered_list_min",
                      "min": 2,
                      "description": "Должно быть минимум 2 нумерованных пункта"
                    },
                    {
                      "type": "includes_any",
                      "patterns": [
                        "критер",
                        "надеж",
                        "надеж",
                        "риск",
                        "прозрач"
                      ],
                      "description": "Если нет явных кандидатов, нужен прозрачный рейтинг/методика"
                    }
                  ],
                  "description": "Должны выполняться все условия в группе"
                }
              ],
              "description": "Нужен конкретный shortlist или прозрачное ранжирование",
              "id": "S005.T3.C3"
            }
          ]
        }
      ]
    },
    {
      "id": "S007",
      "title": "Молочная упаковка: Витебск -> Билево",
      "personaGoal": "Категорийный менеджер пищевого завода, ищет поставщиков упаковки.",
      "tags": [
        "sourcing",
        "geo_refinement",
        "multi_turn",
        "ranking"
      ],
      "expectedBehavior": [
        "Дать полезный first-pass по поиску поставщиков/подрядчиков без пустого отказа.",
        "На втором ходе интерпретировать короткое гео-уточнение как продолжение предыдущего запроса.",
        "На третьем ходе дать shortlist/рейтинг или прозрачную методику ранжирования с оговоркой по неопределенности."
      ],
      "strictPassFail": [
        "Каждый ход: не stub, содержательный ответ по теме.",
        "Ход 2: в ответе есть связь с исходной услугой/товаром + гео-уточнение.",
        "Ход 3: либо есть конкретные /company/ кандидаты, либо структурированный рейтинг с критериями; пустой отказ запрещен."
      ],
      "turns": [
        {
          "user": "Нужны поставщики молочной упаковки в Витебске, желательно с печатью этикетки.",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S007.T1.C1"
            },
            {
              "type": "includes_any",
              "patterns": [
                "упаков|молоч|этикет",
                "поставщ",
                "supplier",
                "рубр",
                "ключев"
              ],
              "description": "Ответ должен быть по теме поиска поставщиков/услуги",
              "id": "S007.T1.C2"
            },
            {
              "type": "reply_length_min",
              "min": 120,
              "description": "Ответ должен быть полезным, не односложным",
              "id": "S007.T1.C3"
            }
          ]
        },
        {
          "user": "Билево",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S007.T2.C1"
            },
            {
              "type": "mentions_any_terms",
              "terms": [
                "упаков",
                "молоч",
                "этикет"
              ],
              "min": 1,
              "description": "Должна сохраниться связь с исходным товаром/услугой",
              "id": "S007.T2.C2"
            },
            {
              "type": "includes_any",
              "patterns": [
                "витеб",
                "билев"
              ],
              "description": "Должно учитываться гео-уточнение (город/район)",
              "id": "S007.T2.C3"
            }
          ]
        },
        {
          "user": "Дай ranking 3 поставщиков и что проверить перед тестовой партией.",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S007.T3.C1"
            },
            {
              "type": "not_refusal_only",
              "description": "Ответ не должен быть пустым отказом без полезного next step",
              "id": "S007.T3.C2"
            },
            {
              "type": "any_of",
              "checks": [
                {
                  "type": "company_path_min_count",
                  "min": 2,
                  "description": "Должно быть минимум 2 ссылки вида /company/..."
                },
                {
                  "type": "all_of",
                  "checks": [
                    {
                      "type": "numbered_list_min",
                      "min": 2,
                      "description": "Должно быть минимум 2 нумерованных пункта"
                    },
                    {
                      "type": "includes_any",
                      "patterns": [
                        "критер",
                        "надеж",
                        "надеж",
                        "риск",
                        "прозрач"
                      ],
                      "description": "Если нет явных кандидатов, нужен прозрачный рейтинг/методика"
                    }
                  ],
                  "description": "Должны выполняться все условия в группе"
                }
              ],
              "description": "Нужен конкретный shortlist или прозрачное ранжирование",
              "id": "S007.T3.C3"
            }
          ]
        }
      ]
    },
    {
      "id": "S008",
      "title": "Нержавеющий лист: Минск -> Шабаны",
      "personaGoal": "Инженер-закупщик, ищет металл для мелкосерийного производства.",
      "tags": [
        "sourcing",
        "geo_refinement",
        "multi_turn",
        "ranking"
      ],
      "expectedBehavior": [
        "Дать полезный first-pass по поиску поставщиков/подрядчиков без пустого отказа.",
        "На втором ходе интерпретировать короткое гео-уточнение как продолжение предыдущего запроса.",
        "На третьем ходе дать shortlist/рейтинг или прозрачную методику ранжирования с оговоркой по неопределенности."
      ],
      "strictPassFail": [
        "Каждый ход: не stub, содержательный ответ по теме.",
        "Ход 2: в ответе есть связь с исходной услугой/товаром + гео-уточнение.",
        "Ход 3: либо есть конкретные /company/ кандидаты, либо структурированный рейтинг с критериями; пустой отказ запрещен."
      ],
      "turns": [
        {
          "user": "Need suppliers of stainless steel sheet 304 in Minsk, small wholesale.",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S008.T1.C1"
            },
            {
              "type": "includes_any",
              "patterns": [
                "stainless|лист|нержав",
                "поставщ",
                "supplier",
                "рубр",
                "ключев"
              ],
              "description": "Ответ должен быть по теме поиска поставщиков/услуги",
              "id": "S008.T1.C2"
            },
            {
              "type": "reply_length_min",
              "min": 120,
              "description": "Ответ должен быть полезным, не односложным",
              "id": "S008.T1.C3"
            }
          ]
        },
        {
          "user": "Шабаны",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S008.T2.C1"
            },
            {
              "type": "mentions_any_terms",
              "terms": [
                "stainless",
                "лист",
                "нержав"
              ],
              "min": 1,
              "description": "Должна сохраниться связь с исходным товаром/услугой",
              "id": "S008.T2.C2"
            },
            {
              "type": "includes_any",
              "patterns": [
                "минск",
                "шабан"
              ],
              "description": "Должно учитываться гео-уточнение (город/район)",
              "id": "S008.T2.C3"
            }
          ]
        },
        {
          "user": "Сделай топ-3 по надежности и availability, please.",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S008.T3.C1"
            },
            {
              "type": "not_refusal_only",
              "description": "Ответ не должен быть пустым отказом без полезного next step",
              "id": "S008.T3.C2"
            },
            {
              "type": "any_of",
              "checks": [
                {
                  "type": "company_path_min_count",
                  "min": 2,
                  "description": "Должно быть минимум 2 ссылки вида /company/..."
                },
                {
                  "type": "all_of",
                  "checks": [
                    {
                      "type": "numbered_list_min",
                      "min": 2,
                      "description": "Должно быть минимум 2 нумерованных пункта"
                    },
                    {
                      "type": "includes_any",
                      "patterns": [
                        "критер",
                        "надеж",
                        "надеж",
                        "риск",
                        "прозрач"
                      ],
                      "description": "Если нет явных кандидатов, нужен прозрачный рейтинг/методика"
                    }
                  ],
                  "description": "Должны выполняться все условия в группе"
                }
              ],
              "description": "Нужен конкретный shortlist или прозрачное ранжирование",
              "id": "S008.T3.C3"
            }
          ]
        }
      ]
    },
    {
      "id": "S014",
      "title": "Кофейные зерна HoReCa: Брест -> Центр",
      "personaGoal": "Собственник кафе, ищет B2B поставщиков зерна.",
      "tags": [
        "sourcing",
        "geo_refinement",
        "multi_turn",
        "ranking"
      ],
      "expectedBehavior": [
        "Дать полезный first-pass по поиску поставщиков/подрядчиков без пустого отказа.",
        "На втором ходе интерпретировать короткое гео-уточнение как продолжение предыдущего запроса.",
        "На третьем ходе дать shortlist/рейтинг или прозрачную методику ранжирования с оговоркой по неопределенности."
      ],
      "strictPassFail": [
        "Каждый ход: не stub, содержательный ответ по теме.",
        "Ход 2: в ответе есть связь с исходной услугой/товаром + гео-уточнение.",
        "Ход 3: либо есть конкретные /company/ кандидаты, либо структурированный рейтинг с критериями; пустой отказ запрещен."
      ],
      "turns": [
        {
          "user": "Нужны поставщики coffee beans для HoReCa в Бресте, интересует регулярная поставка.",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S014.T1.C1"
            },
            {
              "type": "includes_any",
              "patterns": [
                "coffee|кофе|зерн",
                "поставщ",
                "supplier",
                "рубр",
                "ключев"
              ],
              "description": "Ответ должен быть по теме поиска поставщиков/услуги",
              "id": "S014.T1.C2"
            },
            {
              "type": "reply_length_min",
              "min": 120,
              "description": "Ответ должен быть полезным, не односложным",
              "id": "S014.T1.C3"
            }
          ]
        },
        {
          "user": "центр",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S014.T2.C1"
            },
            {
              "type": "mentions_any_terms",
              "terms": [
                "coffee",
                "кофе",
                "зерн"
              ],
              "min": 1,
              "description": "Должна сохраниться связь с исходным товаром/услугой",
              "id": "S014.T2.C2"
            },
            {
              "type": "includes_any",
              "patterns": [
                "брест",
                "центр"
              ],
              "description": "Должно учитываться гео-уточнение (город/район)",
              "id": "S014.T2.C3"
            }
          ]
        },
        {
          "user": "Дай shortlist 3 и какие вопросы задать по обжарке и логистике.",
          "checks": [
            {
              "type": "not_stub",
              "description": "Ответ не должен быть stub/заглушкой",
              "id": "S014.T3.C1"
            },
            {
              "type": "not_refusal_only",
              "description": "Ответ не должен быть пустым отказом без полезного next step",
              "id": "S014.T3.C2"
            },
            {
              "type": "any_of",
              "checks": [
                {
                  "type": "company_path_min_count",
                  "min": 2,
                  "description": "Должно быть минимум 2 ссылки вида /company/..."
                },
                {
                  "type": "all_of",
                  "checks": [
                    {
                      "type": "numbered_list_min",
                      "min": 2,
                      "description": "Должно быть минимум 2 нумерованных пункта"
                    },
                    {
                      "type": "includes_any",
                      "patterns": [
                        "критер",
                        "надеж",
                        "надеж",
                        "риск",
                        "прозрач"
                      ],
                      "description": "Если нет явных кандидатов, нужен прозрачный рейтинг/методика"
                    }
                  ],
                  "description": "Должны выполняться все условия в группе"
                }
              ],
              "description": "Нужен конкретный shortlist или прозрачное ранжирование",
              "id": "S014.T3.C3"
            }
          ]
        }
      ]
    }
  ]
}
