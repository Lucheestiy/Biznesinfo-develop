{
  "runId": "judge-2026-02-14T23-54-48-621Z",
  "generatedAt": "2026-02-14T23:55:44.658Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-14T23-49-05-208Z-2955943-hl2re",
    "startedAt": "2026-02-14T23:49:05.208Z",
    "endedAt": "2026-02-14T23:51:22.332Z",
    "durationMs": 137124,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.user-ideas-multistep-variants.json",
    "totalScenarios": 2,
    "passedScenarios": 1,
    "failedScenarios": 1,
    "passRate": 0.5,
    "totalChecks": 20,
    "passedChecks": 19,
    "failedChecks": 1,
    "checkPassRate": 0.95,
    "targetPassCount": 2,
    "targetPassRate": 0.8,
    "targetReached": false,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "totalTurnsExecuted": 6,
    "avgTurnLatencyMs": 22787.83,
    "totalTurnLatencyMs": 136727,
    "totalStubReplies": 0,
    "totalBusyRetries": 0,
    "totalRateLimitRetries": 0,
    "totalStubRetries": 0,
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 2,
  "judges": [
    {
      "judge": "kimi",
      "summary": {
        "total": 2,
        "averageUsefulness": 1.5,
        "usefulCount": 0,
        "notUsefulCount": 2,
        "usefulRate": 0,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.25,
        "continueCount": 0,
        "continueRate": 0,
        "genericFallbackCount": 2,
        "genericFallbackRate": 1,
        "synthesizedRatingCount": 0,
        "synthesizedRatingRate": 0,
        "averageContinuityScore": 1.5,
        "topIssues": [
          {
            "issue": "turn 2: полный провал релевантности — в списке поликлиника и больница вместо обувных производителей",
            "count": 1
          },
          {
            "issue": "нет реального website scan: нет источников, нет цитат с сайтов, нет пометок подтверждения",
            "count": 1
          },
          {
            "issue": "generic fallback: вместо глубокой проверки — повторение каталога с boilerplate текстом",
            "count": 1
          },
          {
            "issue": "нарушение continuity: после явного запроса 'проверь на сайтах' ассистент игнорирует контекст",
            "count": 1
          },
          {
            "issue": "turn 3: generic fallback — повторение того же shortlist вместо поиска следующего кандидата",
            "count": 1
          },
          {
            "issue": "нет честной пометки 'на главной нет подтверждения производства' для shoesterra.by",
            "count": 1
          },
          {
            "issue": "нет continuity: после turn 2 ассистент должен был предложить проверить другую компанию, но вернулся к каталогу",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "UV012",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.2,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Turn 2: ассистент НЕ проверил сайты — выдал бессвязный список (поликлиника, больница) вместо производителей обуви",
              "Turn 3: вместо проверки сайтов — снова fallback к каталогу с '[проверьте данные]' и generic советами"
            ],
            "criticalIssues": [
              "Turn 2: полный провал релевантности — в списке поликлиника и больница вместо обувных производителей",
              "Нет реального website scan: нет источников, нет цитат с сайтов, нет пометок подтверждения"
            ]
          },
          {
            "scenarioId": "UV013",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.3,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Turn 2: частично полезно — дал источник shoesterra.by и контакты, но признал что нет извлеченных текстов со страниц Контакты/О компании/Продукция",
              "Turn 3: полный fallback к каталогу — вместо пометки 'на главной нет подтверждения' и предложения следующего кандидата, ассистент повторяет тот же shortlist"
            ],
            "criticalIssues": [
              "Turn 3: generic fallback — повторение того же shortlist вместо поиска следующего кандидата",
              "Нет честной пометки 'на главной нет подтверждения производства' для shoesterra.by"
            ]
          }
        ]
      },
      "diagnostics": {
        "totalBatches": 1,
        "nonJsonRetryBatches": 0,
        "schemaRetryBatches": 0,
        "synthesizedBatches": 0,
        "synthesizedRatingCount": 0,
        "nonJsonRetryRate": 0,
        "schemaRetryRate": 0,
        "synthesizedBatchRate": 0,
        "synthesizedRatingRate": 0
      },
      "ratings": [
        {
          "scenarioId": "UV012",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.9,
          "userSatisfaction": 0.2,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Turn 2: ассистент НЕ проверил сайты — выдал бессвязный список (поликлиника, больница) вместо производителей обуви",
            "Turn 3: вместо проверки сайтов — снова fallback к каталогу с '[проверьте данные]' и generic советами",
            "Пользователь трижды просил проверить сайты — ассистент так и не выполнил запрос"
          ],
          "criticalIssues": [
            "Turn 2: полный провал релевантности — в списке поликлиника и больница вместо обувных производителей",
            "Нет реального website scan: нет источников, нет цитат с сайтов, нет пометок подтверждения",
            "Generic fallback: вместо глубокой проверки — повторение каталога с boilerplate текстом",
            "Нарушение continuity: после явного запроса 'проверь на сайтах' ассистент игнорирует контекст"
          ],
          "strengths": [
            "Turn 1: корректно выдал 1 кандидата из каталога"
          ],
          "nextUserProbe": "Ты совсем не проверил сайты. Дай мне прямые ссылки на разделы 'О компании' этих производителей.",
          "judge": "kimi",
          "synthesized": false
        },
        {
          "scenarioId": "UV013",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.85,
          "userSatisfaction": 0.3,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Turn 2: частично полезно — дал источник shoesterra.by и контакты, но признал что нет извлеченных текстов со страниц Контакты/О компании/Продукция",
            "Turn 3: полный fallback к каталогу — вместо пометки 'на главной нет подтверждения' и предложения следующего кандидата, ассистент повторяет тот же shortlist",
            "Не выполнен запрос 'предложи следующего кандидата для проверки'"
          ],
          "criticalIssues": [
            "Turn 3: generic fallback — повторение того же shortlist вместо поиска следующего кандидата",
            "Нет честной пометки 'на главной нет подтверждения производства' для shoesterra.by",
            "Нет continuity: после turn 2 ассистент должен был предложить проверить другую компанию, но вернулся к каталогу"
          ],
          "strengths": [
            "Turn 2: честно признал ограничения данных (нет извлеченных текстов с конкретных разделов)",
            "Turn 2: дал реальный источник (shoesterra.by) и контакты"
          ],
          "nextUserProbe": "Понял, что shoesterra — магазин, не производитель. Найди мне реальных производителей обуви в Минске из рубрики 'Лёгкая промышленность'.",
          "judge": "kimi",
          "synthesized": false
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 2,
        "averageUsefulness": 1.5,
        "usefulCount": 0,
        "notUsefulCount": 2,
        "usefulRate": 0,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.2,
        "continueCount": 0,
        "continueRate": 0,
        "genericFallbackCount": 2,
        "genericFallbackRate": 1,
        "synthesizedRatingCount": 0,
        "synthesizedRatingRate": 0,
        "averageContinuityScore": 1.5,
        "topIssues": [
          {
            "issue": "major hallucination: listed поликлиники and больницы as shoe manufacturers",
            "count": 1
          },
          {
            "issue": "didn't follow user instruction to mark 'no confirmation' and suggest next candidate",
            "count": 1
          },
          {
            "issue": "confirmed retailer, not manufacturer - didn't catch this mismatch",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "UV012",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.1,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Assistant hallucinated 2 medical institutions as shoe manufacturers in turn 2",
              "Never actually verified any websites despite explicit user request"
            ],
            "criticalIssues": [
              "Major hallucination: listed поликлиники and больницы as shoe manufacturers"
            ]
          },
          {
            "scenarioId": "UV013",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.3,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Turn 2 provided actual website check with source + contacts - good partial effort",
              "Never confirmed if companies are manufacturers vs retailers (website shows retail of brands)"
            ],
            "criticalIssues": [
              "Didn't follow user instruction to mark 'no confirmation' and suggest next candidate",
              "Confirmed retailer, not manufacturer - didn't catch this mismatch"
            ]
          }
        ]
      },
      "diagnostics": {
        "totalBatches": 1,
        "nonJsonRetryBatches": 0,
        "schemaRetryBatches": 0,
        "synthesizedBatches": 0,
        "synthesizedRatingCount": 0,
        "nonJsonRetryRate": 0,
        "schemaRetryRate": 0,
        "synthesizedBatchRate": 0,
        "synthesizedRatingRate": 0
      },
      "ratings": [
        {
          "scenarioId": "UV012",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.95,
          "userSatisfaction": 0.1,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Assistant hallucinated 2 medical institutions as shoe manufacturers in turn 2",
            "Never actually verified any websites despite explicit user request",
            "Failed to provide source + contacts for verification as requested"
          ],
          "criticalIssues": [
            "Major hallucination: listed поликлиники and больницы as shoe manufacturers"
          ],
          "strengths": [
            "Honest about insufficient verified cards in turn 1"
          ],
          "nextUserProbe": "Это не производители обуви, а поликлиники! Вы что, шутите?",
          "judge": "minimax",
          "synthesized": false
        },
        {
          "scenarioId": "UV013",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.9,
          "userSatisfaction": 0.3,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Turn 2 provided actual website check with source + contacts - good partial effort",
            "Never confirmed if companies are manufacturers vs retailers (website shows retail of brands)",
            "Turn 3 dropped to generic fallback without addressing user's specific instruction"
          ],
          "criticalIssues": [
            "Didn't follow user instruction to mark 'no confirmation' and suggest next candidate",
            "Confirmed retailer, not manufacturer - didn't catch this mismatch"
          ],
          "strengths": [
            "Attempted website scan in turn 2 with honest limitations admission"
          ],
          "nextUserProbe": "Но это ритейлер брендовой обуви, а не производитель. Где следующий кандидат?",
          "judge": "minimax",
          "synthesized": false
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": null,
    "kimiAvg": 1.5,
    "minimaxAvg": 1.5,
    "geminiUserSatisfaction": null,
    "kimiUserSatisfaction": 0.25,
    "geminiContinueRate": null,
    "kimiContinueRate": 0,
    "geminiGenericFallbackRate": null,
    "kimiGenericFallbackRate": 1,
    "avgGap": null,
    "usefulRateGap": null,
    "pairwise": [
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": 0,
        "usefulRateGap": 0,
        "userSatisfactionGap": 0.05,
        "continueRateGap": 0,
        "genericFallbackRateGap": 0
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "kimi averageUserSatisfaction 0.25 < 0.72",
      "kimi continueRate 0 < 0.72",
      "kimi genericFallbackRate 1 > 0.35",
      "minimax averageUserSatisfaction 0.2 < 0.72",
      "minimax continueRate 0 < 0.72",
      "minimax genericFallbackRate 1 > 0.35"
    ],
    "checks": [
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.25,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 0,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 1,
        "expected": "<= 0.35",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.2,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 0,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 1,
        "expected": "<= 0.35",
        "pass": false
      }
    ]
  }
}
