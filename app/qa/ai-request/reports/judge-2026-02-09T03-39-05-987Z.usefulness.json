{
  "runId": "judge-2026-02-09T03-39-05-987Z",
  "generatedAt": "2026-02-09T03:40:20.950Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-09T03-38-18-308Z-783997-rymwp",
    "startedAt": "2026-02-09T03:38:18.308Z",
    "endedAt": "2026-02-09T03:39:02.462Z",
    "durationMs": 44154,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.geo-ambiguity.json",
    "totalScenarios": 2,
    "passedScenarios": 2,
    "failedScenarios": 0,
    "passRate": 1,
    "totalChecks": 17,
    "passedChecks": 17,
    "failedChecks": 0,
    "checkPassRate": 1,
    "targetPassCount": 2,
    "targetPassRate": 0.8,
    "targetReached": true,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 2,
  "judges": [
    {
      "judge": "gemini",
      "summary": {
        "total": 2,
        "averageUsefulness": 5,
        "usefulCount": 2,
        "notUsefulCount": 0,
        "usefulRate": 1,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 1,
        "continueCount": 2,
        "continueRate": 1,
        "genericFallbackCount": 0,
        "genericFallbackRate": 0,
        "averageContinuityScore": 5,
        "topIssues": [],
        "worstScenarios": [
          {
            "scenarioId": "GA001",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 1,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Ассистент эффективно обработал неоднозначный географический запрос, предоставив конкретные предложения и затем адаптировав стратегию при уточнении.",
              "Прозрачно сообщил об ограничениях данных по Минску, предложив практичные альтернативные пути поиска."
            ],
            "criticalIssues": []
          },
          {
            "scenarioId": "GA002",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 1,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Ассистент корректно адаптировался к уточнению географического контекста с города на область, не теряя предмет закупки.",
              "Интеллектуально переоценил ранее предложенные варианты с учетом нового ограничения, предоставив обоснование."
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 1,
          "userSatisfaction": 1,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Ассистент эффективно обработал неоднозначный географический запрос, предоставив конкретные предложения и затем адаптировав стратегию при уточнении.",
            "Прозрачно сообщил об ограничениях данных по Минску, предложив практичные альтернативные пути поиска.",
            "Сохранил контекст запроса на оптовые поставки молока и предложил четкие следующие шаги."
          ],
          "criticalIssues": [],
          "strengths": [
            "Конкретные названия компаний и их пригодность.",
            "Ясные инструкции по дальнейшим действиям и критерии отбора.",
            "Честность об отсутствии сильных вариантов по одному из городов, что повышает доверие."
          ],
          "nextUserProbe": "Отлично, попробую эти запросы. А что конкретно еще есть по Бресту, чтобы я мог сравнить?",
          "judge": "gemini"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 1,
          "userSatisfaction": 1,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Ассистент корректно адаптировался к уточнению географического контекста с города на область, не теряя предмет закупки.",
            "Интеллектуально переоценил ранее предложенные варианты с учетом нового ограничения, предоставив обоснование.",
            "Предложил новые стратегии поиска (рубрики и ключевые запросы), релевантные для Минской области."
          ],
          "criticalIssues": [],
          "strengths": [
            "Умная непрерывность контекста при изменении географии.",
            "Действенные советы по конкретному региону.",
            "Предоставление специфических поисковых запросов и категорий."
          ],
          "nextUserProbe": "Спасибо, это очень помогло. А есть ли у этих компаний опыт поставок в Борисов или Жодино?",
          "judge": "gemini"
        }
      ]
    },
    {
      "judge": "kimi",
      "summary": {
        "total": 2,
        "averageUsefulness": 3.5,
        "usefulCount": 2,
        "notUsefulCount": 0,
        "usefulRate": 1,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.675,
        "continueCount": 2,
        "continueRate": 1,
        "genericFallbackCount": 1,
        "genericFallbackRate": 0.5,
        "averageContinuityScore": 3,
        "topIssues": [
          {
            "issue": "ассистент ранее показал способность находить конкретные компании, но при уточнении 'минск как базовый' дал только общие советы 'искать в рубриках'",
            "count": 1
          },
          {
            "issue": "нет конкретных кандидатов из минска несмотря на явный запрос пользователя сделать его базовым",
            "count": 1
          },
          {
            "issue": "пользователь дал конкретное ограничение (логистика минск→брест), ассистент не использовал это для конкретных рекомендаций",
            "count": 1
          },
          {
            "issue": "не добавил новых кандидатов специфично для минской области (только переиспользовал старых)",
            "count": 1
          },
          {
            "issue": "часть ответа ушла в generic инструкции по поиску в рубриках — избыточно после уже найденных поставщиков",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "GA001",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.6,
            "wouldContinue": true,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Turn 1 дал конкретных 2 поставщика в Бресте с обоснованием — отличный старт",
              "Turn 2 резко упал в generic fallback: вместо конкретных минских поставщиков дал рубрики и поисковые запросы"
            ],
            "criticalIssues": [
              "Ассистент ранее показал способность находить конкретные компании, но при уточнении 'Минск как базовый' дал только общие советы 'искать в рубриках'",
              "Нет конкретных кандидатов из Минска несмотря на явный запрос пользователя сделать его базовым"
            ]
          },
          {
            "scenarioId": "GA002",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.75,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Turn 2 сохранил обоих кандидатов из Turn 1 и переоценил их релевантность под новое geo-условие",
              "Четко объяснил почему Агрокомбинат Ждановичи теперь в приоритете для области vs городского оптовика"
            ],
            "criticalIssues": [
              "Не добавил новых кандидатов специфично для Минской области (только переиспользовал старых)",
              "Часть ответа ушла в generic инструкции по поиску в рубриках — избыточно после уже найденных поставщиков"
            ]
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.75,
          "userSatisfaction": 0.6,
          "wouldContinue": true,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Turn 1 дал конкретных 2 поставщика в Бресте с обоснованием — отличный старт",
            "Turn 2 резко упал в generic fallback: вместо конкретных минских поставщиков дал рубрики и поисковые запросы"
          ],
          "criticalIssues": [
            "Ассистент ранее показал способность находить конкретные компании, но при уточнении 'Минск как базовый' дал только общие советы 'искать в рубриках'",
            "Нет конкретных кандидатов из Минска несмотря на явный запрос пользователя сделать его базовым",
            "Пользователь дал конкретное ограничение (логистика Минск→Брест), ассистент не использовал это для конкретных рекомендаций"
          ],
          "strengths": [
            "Turn 1: правильно отфильтровал нерелевантного поставщика (ДАЛМИО — оборудование, не молоко)",
            "Честно указал на ограниченность выборки по Минску, но не компенсировал конкретными альтернативами"
          ],
          "nextUserProbe": "А конкретно кто в Минске производит молоко? Дайте названия заводов или контакты.",
          "judge": "kimi"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.8,
          "userSatisfaction": 0.75,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Turn 2 сохранил обоих кандидатов из Turn 1 и переоценил их релевантность под новое geo-условие",
            "Четко объяснил почему Агрокомбинат Ждановичи теперь в приоритете для области vs городского оптовика"
          ],
          "criticalIssues": [
            "Не добавил новых кандидатов специфично для Минской области (только переиспользовал старых)",
            "Часть ответа ушла в generic инструкции по поиску в рубриках — избыточно после уже найденных поставщиков"
          ],
          "strengths": [
            "Отличная контекстная непрерывность: не потерял 'лук репчатый' при смене geo с города на область",
            "Правильная переоценка приоритетов: производитель (Ждановичи) лучше для области, чем городской оптовик",
            "Дал конкретные actionable next steps: проверить покрытие доставки Амифрутом по районам области"
          ],
          "nextUserProbe": "Есть ли у Ждановичей прямые контакты отдела оптовых продаж? Или только общий номер?",
          "judge": "kimi"
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 2,
        "averageUsefulness": 3,
        "usefulCount": 1,
        "notUsefulCount": 1,
        "usefulRate": 0.5,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.55,
        "continueCount": 1,
        "continueRate": 0.5,
        "genericFallbackCount": 1,
        "genericFallbackRate": 0.5,
        "averageContinuityScore": 3.5,
        "topIssues": [
          {
            "issue": "critical continuity failure: assistant drops to generic advice despite having named concrete suppliers in turn 1",
            "count": 1
          },
          {
            "issue": "user's additional constraint (minsk as base) triggered generic fallback rather than practical candidate re-evaluation",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "GA001",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.3,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Turn 1 provides 2 concrete Brest suppliers with valid reasoning",
              "Turn 2 abandons concrete candidates and falls back to generic rubric advice after user clarification"
            ],
            "criticalIssues": [
              "Critical continuity failure: assistant drops to generic advice despite having named concrete suppliers in Turn 1",
              "User's additional constraint (Minsk as base) triggered generic fallback rather than practical candidate re-evaluation"
            ]
          },
          {
            "scenarioId": "GA002",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.8,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Turn 1 provides 2 concrete suppliers with full contact details and verification checklist",
              "Turn 2 maintains the same concrete candidates while reprioritizing for the region"
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.9,
          "userSatisfaction": 0.3,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Turn 1 provides 2 concrete Brest suppliers with valid reasoning",
            "Turn 2 abandons concrete candidates and falls back to generic rubric advice after user clarification",
            "Assistant claims 'no strong relevant suppliers in Minsk' without actually re-examining or adapting the previous candidates",
            "Generic fallback wastes user's time after they invested in the conversation"
          ],
          "criticalIssues": [
            "Critical continuity failure: assistant drops to generic advice despite having named concrete suppliers in Turn 1",
            "User's additional constraint (Minsk as base) triggered generic fallback rather than practical candidate re-evaluation"
          ],
          "strengths": [
            "Good Turn 1 with specific supplier names, links, locations and exclusion rationale"
          ],
          "nextUserProbe": "А что насчёт Савушкина - они же в Бресте, но могут поставлять в Минск?",
          "judge": "minimax"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.8,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Turn 1 provides 2 concrete suppliers with full contact details and verification checklist",
            "Turn 2 maintains the same concrete candidates while reprioritizing for the region",
            "Assistant gives practical filtering advice for catalog navigation",
            "User gets actionable next steps without generic filler"
          ],
          "criticalIssues": [],
          "strengths": [
            "Consistent candidate list across turns with region-appropriate prioritization",
            "Clear contact information and verification points for supplier qualification",
            "Practical catalog filtering guidance without generic advice"
          ],
          "nextUserProbe": "Амифрут подтверждает доставку по Минской области?",
          "judge": "minimax"
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": 5,
    "kimiAvg": 3.5,
    "minimaxAvg": 3,
    "geminiUserSatisfaction": 1,
    "kimiUserSatisfaction": 0.675,
    "geminiContinueRate": 1,
    "kimiContinueRate": 1,
    "geminiGenericFallbackRate": 0,
    "kimiGenericFallbackRate": 0.5,
    "avgGap": 1.5,
    "usefulRateGap": 0,
    "pairwise": [
      {
        "left": "gemini",
        "right": "kimi",
        "avgGap": 1.5,
        "usefulRateGap": 0,
        "userSatisfactionGap": 0.325,
        "continueRateGap": 0,
        "genericFallbackRateGap": -0.5
      },
      {
        "left": "gemini",
        "right": "minimax",
        "avgGap": 2,
        "usefulRateGap": 0.5,
        "userSatisfactionGap": 0.45,
        "continueRateGap": 0.5,
        "genericFallbackRateGap": -0.5
      },
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": 0.5,
        "usefulRateGap": 0.5,
        "userSatisfactionGap": 0.125,
        "continueRateGap": 0.5,
        "genericFallbackRateGap": 0
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "kimi averageUserSatisfaction 0.675 < 0.72",
      "kimi genericFallbackRate 0.5 > 0.35",
      "minimax averageUserSatisfaction 0.55 < 0.72",
      "minimax continueRate 0.5 < 0.72",
      "minimax genericFallbackRate 0.5 > 0.35"
    ],
    "checks": [
      {
        "judge": "gemini",
        "metric": "averageUserSatisfaction",
        "actual": 1,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "gemini",
        "metric": "continueRate",
        "actual": 1,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "gemini",
        "metric": "genericFallbackRate",
        "actual": 0,
        "expected": "<= 0.35",
        "pass": true
      },
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.675,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 1,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 0.5,
        "expected": "<= 0.35",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.55,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 0.5,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 0.5,
        "expected": "<= 0.35",
        "pass": false
      }
    ]
  }
}
