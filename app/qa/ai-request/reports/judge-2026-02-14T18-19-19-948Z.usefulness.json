{
  "runId": "judge-2026-02-14T18-19-19-948Z",
  "generatedAt": "2026-02-14T18:20:37.071Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-14T16-22-07-000Z-2156753-wbhua",
    "startedAt": "2026-02-14T16:22:07.000Z",
    "endedAt": "2026-02-14T16:23:44.560Z",
    "durationMs": 97560,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.user-ideas-multistep-variants.json",
    "totalScenarios": 3,
    "passedScenarios": 3,
    "failedScenarios": 0,
    "passRate": 1,
    "totalChecks": 33,
    "passedChecks": 33,
    "failedChecks": 0,
    "checkPassRate": 1,
    "targetPassCount": 3,
    "targetPassRate": 0.8,
    "targetReached": true,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "totalTurnsExecuted": 12,
    "avgTurnLatencyMs": 8104.25,
    "totalTurnLatencyMs": 97251,
    "totalStubReplies": 0,
    "totalBusyRetries": 0,
    "totalRateLimitRetries": 0,
    "totalStubRetries": 0,
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 3,
  "judges": [
    {
      "judge": "kimi",
      "summary": {
        "total": 3,
        "averageUsefulness": 3,
        "usefulCount": 2,
        "notUsefulCount": 1,
        "usefulRate": 0.6667,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.5333,
        "continueCount": 2,
        "continueRate": 0.6667,
        "genericFallbackCount": 1,
        "genericFallbackRate": 0.3333,
        "synthesizedRatingCount": 0,
        "synthesizedRatingRate": 0,
        "averageContinuityScore": 3.333,
        "topIssues": [
          {
            "issue": "generic fallback на turn 3: вместо конкретных производителей дает абстрактный 'shortlist' с 1 сомнительной компанией",
            "count": 1
          },
          {
            "issue": "нет ни одного подтвержденного производителя обуви в минске за 4 хода",
            "count": 1
          },
          {
            "issue": "пользователь просил 3-5 в shortlist — получил 1 с пометкой 'проверьте данные'",
            "count": 1
          },
          {
            "issue": "turn 3: shortlist слишком короткий и формальный, не добавляет ценности к turn 1-2",
            "count": 1
          },
          {
            "issue": "не указал явно экспортную готовность по каждому заводу как требовалось в запросе",
            "count": 1
          },
          {
            "issue": "turn 2: не дает конкретных компаний даже в формате 'возможно есть' — слишком осторожно",
            "count": 1
          },
          {
            "issue": "turn 3: в конце ответа идет список совершенно нерелевантных компаний (автоцентр, рыболов, сантехника) — мусор в контексте",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "UV001",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.35,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Turn 1: Дает только 1 сомнительную компанию (ПЛЭЙ МОДА ООО) с оговоркой что это возможно не производитель — честно но слабо",
              "Turn 3: Критический провал — вместо shortlist из 3-5 производителей дает шаблон-заглушку с 1 компанией и списком рубрик каталога"
            ],
            "criticalIssues": [
              "Generic fallback на Turn 3: вместо конкретных производителей дает абстрактный 'shortlist' с 1 сомнительной компанией",
              "Нет ни одного подтвержденного производителя обуви в Минске за 4 хода"
            ]
          },
          {
            "scenarioId": "UV003",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.55,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Turn 1: Дает 5 вариантов где поесть, но без привязки к локации пользователя — запрашивает уточнение",
              "Turn 2: Хороший pivot к b2b-формату — предлагает искать через кейтеринг/корпоративное питание"
            ],
            "criticalIssues": [
              "Turn 2: Не дает конкретных компаний даже в формате 'возможно есть' — слишком осторожно",
              "Turn 3: В конце ответа идет список совершенно нерелевантных компаний (Автоцентр, Рыболов, Сантехника) — мусор в контексте"
            ]
          },
          {
            "scenarioId": "UV002",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.7,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Turn 1: Дает 3 конкретных завода с профилями, честно указывает что только Пинский КХП явно подтвержден по высшему сорту",
              "Turn 2: Отличная continuity — добавляет критерии белизны, клейковины, стабильности к существующему списку"
            ],
            "criticalIssues": [
              "Turn 3: Shortlist слишком короткий и формальный, не добавляет ценности к Turn 1-2",
              "Не указал явно экспортную готовность по каждому заводу как требовалось в запросе"
            ]
          }
        ]
      },
      "diagnostics": {
        "totalBatches": 1,
        "nonJsonRetryBatches": 0,
        "schemaRetryBatches": 0,
        "synthesizedBatches": 0,
        "synthesizedRatingCount": 0,
        "nonJsonRetryRate": 0,
        "schemaRetryRate": 0,
        "synthesizedBatchRate": 0,
        "synthesizedRatingRate": 0
      },
      "ratings": [
        {
          "scenarioId": "UV001",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.85,
          "userSatisfaction": 0.35,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Turn 1: Дает только 1 сомнительную компанию (ПЛЭЙ МОДА ООО) с оговоркой что это возможно не производитель — честно но слабо",
            "Turn 3: Критический провал — вместо shortlist из 3-5 производителей дает шаблон-заглушку с 1 компанией и списком рубрик каталога",
            "Нарушение continuity: после уточнения 'именно производители, мужская классическая обувь' ассистент не дает ни одного релевантного производителя"
          ],
          "criticalIssues": [
            "Generic fallback на Turn 3: вместо конкретных производителей дает абстрактный 'shortlist' с 1 сомнительной компанией",
            "Нет ни одного подтвержденного производителя обуви в Минске за 4 хода",
            "Пользователь просил 3-5 в shortlist — получил 1 с пометкой 'проверьте данные'"
          ],
          "strengths": [
            "Turn 4: Корректный структурированный шаблон контакта в нужном формате Subject/Body/WhatsApp",
            "Turn 2: Правильно понял уточнение про производителей vs розница"
          ],
          "nextUserProbe": "Вы так и не назвали ни одного производителя обуви. У вас вообще есть данные по обувным фабрикам в Минске?",
          "judge": "kimi",
          "synthesized": false
        },
        {
          "scenarioId": "UV002",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.8,
          "userSatisfaction": 0.7,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Turn 1: Дает 3 конкретных завода с профилями, честно указывает что только Пинский КХП явно подтвержден по высшему сорту",
            "Turn 2: Отличная continuity — добавляет критерии белизны, клейковины, стабильности к существующему списку",
            "Turn 3: Shortlist вырожденный (просто повторяет ссылки), но не полный fallback — структура сохранена",
            "Turn 4: Отличный чеклист из 6 пунктов по документам, полностью соответствует b2b-контексту экспорта"
          ],
          "criticalIssues": [
            "Turn 3: Shortlist слишком короткий и формальный, не добавляет ценности к Turn 1-2",
            "Не указал явно экспортную готовность по каждому заводу как требовалось в запросе"
          ],
          "strengths": [
            "Turn 1: Честность о границах данных — отмечает что только Пинский КХП явно указан как высший сорт",
            "Turn 2: Практичный рейтинг с конкретными параметрами качества для запроса",
            "Turn 4: Подробный чеклист документов для контракта, релевантный для экспорта муки"
          ],
          "nextUserProbe": "Уточните по Пинскому КХП — у них есть опыт экспорта в ЕС или только СНГ? И какие объемы?",
          "judge": "kimi",
          "synthesized": false
        },
        {
          "scenarioId": "UV003",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.75,
          "userSatisfaction": 0.55,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Turn 1: Дает 5 вариантов где поесть, но без привязки к локации пользователя — запрашивает уточнение",
            "Turn 2: Хороший pivot к b2b-формату — предлагает искать через кейтеринг/корпоративное питание",
            "Turn 3: Дает 3 варианта запросов по категориям (продукты, оборудование, услуги) — полезная структуризация",
            "Turn 4: Корректный outreach-шаблон в нужном формате Subject/Body/WhatsApp"
          ],
          "criticalIssues": [
            "Turn 2: Не дает конкретных компаний даже в формате 'возможно есть' — слишком осторожно",
            "Turn 3: В конце ответа идет список совершенно нерелевантных компаний (Автоцентр, Рыболов, Сантехника) — мусор в контексте"
          ],
          "strengths": [
            "Успешный переход от consumer-запроса к b2b-формату без ломки диалога",
            "Turn 3: Практичные поисковые строки для каждой категории",
            "Turn 4: Структурированный шаблон контакта с разделением Email/WhatsApp"
          ],
          "nextUserProbe": "А конкретно в Уручье есть какие-то столовые или кафе в вашем каталоге? Или только поставщики?",
          "judge": "kimi",
          "synthesized": false
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 3,
        "averageUsefulness": 2.333,
        "usefulCount": 1,
        "notUsefulCount": 2,
        "usefulRate": 0.3333,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.3,
        "continueCount": 1,
        "continueRate": 0.3333,
        "genericFallbackCount": 2,
        "genericFallbackRate": 0.6667,
        "synthesizedRatingCount": 0,
        "synthesizedRatingRate": 0,
        "averageContinuityScore": 2,
        "topIssues": [
          {
            "issue": "no concrete candidates delivered despite multiple requests",
            "count": 1
          },
          {
            "issue": "generic fallback after user clarification about specific constraints",
            "count": 1
          },
          {
            "issue": "shortlist has placeholder data instead of real export readiness assessment",
            "count": 1
          },
          {
            "issue": "nonsensical company recommendations in turn 3 with no relevance to cafe equipment/supplies",
            "count": 1
          },
          {
            "issue": "no actual b2b suppliers identified despite turn 2 guidance",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "UV001",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.2,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Turn 3 critical failure: requested 3-5 candidates, got 1 with placeholder 'expand search yourself'",
              "Message template in turn 4 completely generic, no connection to actual company found"
            ],
            "criticalIssues": [
              "No concrete candidates delivered despite multiple requests",
              "Generic fallback after user clarification about specific constraints"
            ]
          },
          {
            "scenarioId": "UV003",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.2,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Turn 3 company list completely unrelated to cafe/supplier queries (car dealer, fishing shop, plumbing)",
              "Message template in turn 4 generic, not tailored to B2B food supplier context"
            ],
            "criticalIssues": [
              "Nonsensical company recommendations in turn 3 with no relevance to cafe equipment/supplies",
              "No actual B2B suppliers identified despite turn 2 guidance"
            ]
          },
          {
            "scenarioId": "UV002",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.5,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 3,
            "reasons": [
              "Turn 3 provides incomplete shortlist (2 instead of 3) with placeholder data '[проверьте данные]'",
              "Excellent document checklist in turn 4 provides real value"
            ],
            "criticalIssues": [
              "Shortlist has placeholder data instead of real export readiness assessment"
            ]
          }
        ]
      },
      "diagnostics": {
        "totalBatches": 1,
        "nonJsonRetryBatches": 0,
        "schemaRetryBatches": 0,
        "synthesizedBatches": 0,
        "synthesizedRatingCount": 0,
        "nonJsonRetryRate": 0,
        "schemaRetryRate": 0,
        "synthesizedBatchRate": 0,
        "synthesizedRatingRate": 0
      },
      "ratings": [
        {
          "scenarioId": "UV001",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.9,
          "userSatisfaction": 0.2,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Turn 3 critical failure: requested 3-5 candidates, got 1 with placeholder 'expand search yourself'",
            "Message template in turn 4 completely generic, no connection to actual company found",
            "Assistant repeatedly deflects instead of providing alternatives"
          ],
          "criticalIssues": [
            "No concrete candidates delivered despite multiple requests",
            "Generic fallback after user clarification about specific constraints"
          ],
          "strengths": [
            "Initial honesty about data limitations"
          ],
          "nextUserProbe": "Напишите 3-5 конкретных компаний с контактами из Минской области, даже если не все точно производят обувь",
          "judge": "minimax",
          "synthesized": false
        },
        {
          "scenarioId": "UV002",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.85,
          "userSatisfaction": 0.5,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 3,
          "reasons": [
            "Turn 3 provides incomplete shortlist (2 instead of 3) with placeholder data '[проверьте данные]'",
            "Excellent document checklist in turn 4 provides real value",
            "Good handling of quality criteria in turn 2"
          ],
          "criticalIssues": [
            "Shortlist has placeholder data instead of real export readiness assessment"
          ],
          "strengths": [
            "Strong quality criteria handling",
            "Useful document checklist for contract preparation"
          ],
          "nextUserProbe": "Уточните по каждому из 2 заводов: есть ли опыт экспорта, какие страны, какие документы нужны для РФ/ЕАЭС",
          "judge": "minimax",
          "synthesized": false
        },
        {
          "scenarioId": "UV003",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.9,
          "userSatisfaction": 0.2,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Turn 3 company list completely unrelated to cafe/supplier queries (car dealer, fishing shop, plumbing)",
            "Message template in turn 4 generic, not tailored to B2B food supplier context",
            "Initial consumer-to-B2B bridge was smart but not followed through"
          ],
          "criticalIssues": [
            "Nonsensical company recommendations in turn 3 with no relevance to cafe equipment/supplies",
            "No actual B2B suppliers identified despite turn 2 guidance"
          ],
          "strengths": [
            "Good consumer restaurant suggestions in turn 1",
            "Smart B2B format suggestions in turn 2"
          ],
          "nextUserProbe": "Дайте 3-5 реальных компаний из Минска, которые поставляют продукты или оборудование для общепита, с проверкой на карточке",
          "judge": "minimax",
          "synthesized": false
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": null,
    "kimiAvg": 3,
    "minimaxAvg": 2.333,
    "geminiUserSatisfaction": null,
    "kimiUserSatisfaction": 0.5333,
    "geminiContinueRate": null,
    "kimiContinueRate": 0.6667,
    "geminiGenericFallbackRate": null,
    "kimiGenericFallbackRate": 0.3333,
    "avgGap": null,
    "usefulRateGap": null,
    "pairwise": [
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": 0.667,
        "usefulRateGap": 0.3334,
        "userSatisfactionGap": 0.2333,
        "continueRateGap": 0.3334,
        "genericFallbackRateGap": -0.3334
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "kimi averageUserSatisfaction 0.5333 < 0.72",
      "kimi continueRate 0.6667 < 0.72",
      "minimax averageUserSatisfaction 0.3 < 0.72",
      "minimax continueRate 0.3333 < 0.72",
      "minimax genericFallbackRate 0.6667 > 0.35"
    ],
    "checks": [
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.5333,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 0.6667,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 0.3333,
        "expected": "<= 0.35",
        "pass": true
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.3,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 0.3333,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 0.6667,
        "expected": "<= 0.35",
        "pass": false
      }
    ]
  }
}
