{
  "runId": "judge-2026-02-09T03-09-00-090Z",
  "generatedAt": "2026-02-09T03:10:17.893Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-09T03-08-10-439Z-708230-dp2tf",
    "startedAt": "2026-02-09T03:08:10.439Z",
    "endedAt": "2026-02-09T03:08:52.410Z",
    "durationMs": 41971,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.geo-ambiguity.json",
    "totalScenarios": 2,
    "passedScenarios": 2,
    "failedScenarios": 0,
    "passRate": 1,
    "totalChecks": 17,
    "passedChecks": 17,
    "failedChecks": 0,
    "checkPassRate": 1,
    "targetPassCount": 2,
    "targetPassRate": 0.8,
    "targetReached": true,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 2,
  "judges": [
    {
      "judge": "gemini",
      "summary": {
        "total": 2,
        "averageUsefulness": 5,
        "usefulCount": 2,
        "notUsefulCount": 0,
        "usefulRate": 1,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.9,
        "continueCount": 2,
        "continueRate": 1,
        "genericFallbackCount": 0,
        "genericFallbackRate": 0,
        "averageContinuityScore": 5,
        "topIssues": [],
        "worstScenarios": [
          {
            "scenarioId": "GA001",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.9,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Assistant transparently handles the ambiguous city request, prioritizing available data.",
              "Provides concrete supplier examples with contact information and relevance explanation."
            ],
            "criticalIssues": []
          },
          {
            "scenarioId": "GA002",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.9,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Assistant correctly identifies and adapts to the change from city to region.",
              "Re-evaluates previous recommendations with logical reasoning for their adjusted relevance."
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.9,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Assistant transparently handles the ambiguous city request, prioritizing available data.",
            "Provides concrete supplier examples with contact information and relevance explanation.",
            "Offers actionable next steps for searching in the second city.",
            "Successfully adapts and re-evaluates previous suggestions based on new clarification, maintaining continuity."
          ],
          "criticalIssues": [],
          "strengths": [
            "Transparency about data limitations.",
            "Provides direct contacts and clear reasons for relevance.",
            "Offers practical guidance for further search.",
            "Excellent context handling and adaptation to user clarification."
          ],
          "nextUserProbe": "Спасибо! Проверю этих и попробую фильтр. А по Минску кроме этих нет крупных игроков, которых я могу сам посмотреть?",
          "judge": "gemini"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.9,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Assistant correctly identifies and adapts to the change from city to region.",
            "Re-evaluates previous recommendations with logical reasoning for their adjusted relevance.",
            "Provides updated, actionable questions tailored to the new regional context.",
            "Clearly explains the shift in focus and strategy due to the user's clarification."
          ],
          "criticalIssues": [],
          "strengths": [
            "Strong context continuity and clear explanations.",
            "Logical adaptation of previous suggestions to new constraints.",
            "Practical follow-up questions for the user to verify fit.",
            "Transparency in explaining the updated approach."
          ],
          "nextUserProbe": "Понятно. А есть ли у вас списки фермерских хозяйств в Минской области, кто выращивает лук?",
          "judge": "gemini"
        }
      ]
    },
    {
      "judge": "kimi",
      "summary": {
        "total": 2,
        "averageUsefulness": 3.5,
        "usefulCount": 2,
        "notUsefulCount": 0,
        "usefulRate": 1,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.675,
        "continueCount": 2,
        "continueRate": 1,
        "genericFallbackCount": 1,
        "genericFallbackRate": 0.5,
        "averageContinuityScore": 3,
        "topIssues": [
          {
            "issue": "после уточнения пользователя ассистент упал в generic fallback: 'используйте фильтры' вместо конкретных кандидатов из минска",
            "count": 1
          },
          {
            "issue": "нарушена continuity: пользователь дал конкретное уточнение по локации, но ассистент не смог адаптировать выдачу",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "GA001",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.6,
            "wouldContinue": true,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Первый ответ: конкретные поставщики из Бреста с контактами — хорошо",
              "Второй ответ: при уточнении 'Минск как базовый' ассистент не дал ни одного минского поставщика, только общие рекомендации по фильтрам"
            ],
            "criticalIssues": [
              "После уточнения пользователя ассистент упал в generic fallback: 'используйте фильтры' вместо конкретных кандидатов из Минска",
              "Нарушена continuity: пользователь дал конкретное уточнение по локации, но ассистент не смог адаптировать выдачу"
            ]
          },
          {
            "scenarioId": "GA002",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.75,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Первый ответ: 2 конкретных поставщика с контактами и обоснованием",
              "Второй ответ: корректно адаптировал список под Минскую область, сохранил релевантных кандидатов, дал практичный чек-лист для уточнения"
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.75,
          "userSatisfaction": 0.6,
          "wouldContinue": true,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Первый ответ: конкретные поставщики из Бреста с контактами — хорошо",
            "Второй ответ: при уточнении 'Минск как базовый' ассистент не дал ни одного минского поставщика, только общие рекомендации по фильтрам"
          ],
          "criticalIssues": [
            "После уточнения пользователя ассистент упал в generic fallback: 'используйте фильтры' вместо конкретных кандидатов из Минска",
            "Нарушена continuity: пользователь дал конкретное уточнение по локации, но ассистент не смог адаптировать выдачу"
          ],
          "strengths": [
            "Честно признал отсутствие данных по Минску",
            "Сохранил контекст объема (1000 литров/неделю)"
          ],
          "nextUserProbe": "А есть ли у вас вообще поставщики из Минска в базе? Или только Брест?",
          "judge": "kimi"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.8,
          "userSatisfaction": 0.75,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Первый ответ: 2 конкретных поставщика с контактами и обоснованием",
            "Второй ответ: корректно адаптировал список под Минскую область, сохранил релевантных кандидатов, дал практичный чек-лист для уточнения"
          ],
          "criticalIssues": [],
          "strengths": [
            "Хорошая continuity: при смене региона не потерял предмет закупки (лук репчатый)",
            "Дал actionable next steps: конкретные вопросы для поставщиков",
            "Прозрачно объяснил, почему Амифрут остается с оговоркой (база в Минске)"
          ],
          "nextUserProbe": "А у Агрокомбината Ждановичи какие районы области покрывают? Есть ли у них точки самовывоза?",
          "judge": "kimi"
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 2,
        "averageUsefulness": 2.5,
        "usefulCount": 1,
        "notUsefulCount": 1,
        "usefulRate": 0.5,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.425,
        "continueCount": 1,
        "continueRate": 0.5,
        "genericFallbackCount": 1,
        "genericFallbackRate": 0.5,
        "averageContinuityScore": 2.5,
        "topIssues": [
          {
            "issue": "failed to pivot to minsk as requested; repeated same brest options",
            "count": 1
          },
          {
            "issue": "generic 'use filters' advice after concrete constraint violates continuity requirement",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "GA001",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.1,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Returned same Brest suppliers after user requested Minsk prioritization",
              "Fell back to generic filter advice instead of making concrete progress"
            ],
            "criticalIssues": [
              "Failed to pivot to Minsk as requested; repeated same Brest options",
              "Generic 'use filters' advice after concrete constraint violates continuity requirement"
            ]
          },
          {
            "scenarioId": "GA002",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.75,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Properly re-ranked candidates for Minsk region with clear reasoning",
              "Maintained actionability with specific check points for each supplier"
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.95,
          "userSatisfaction": 0.1,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Returned same Brest suppliers after user requested Minsk prioritization",
            "Fell back to generic filter advice instead of making concrete progress",
            "No Minsk candidates provided despite user clarification"
          ],
          "criticalIssues": [
            "Failed to pivot to Minsk as requested; repeated same Brest options",
            "Generic 'use filters' advice after concrete constraint violates continuity requirement"
          ],
          "strengths": [],
          "nextUserProbe": "Ну так есть поставщики в Минске или нет? Мне нужны конкретные контакты, а не советы по фильтрам.",
          "judge": "minimax"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.9,
          "userSatisfaction": 0.75,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Properly re-ranked candidates for Minsk region with clear reasoning",
            "Maintained actionability with specific check points for each supplier",
            "Transparent about limitations and regional logistics considerations"
          ],
          "criticalIssues": [],
          "strengths": [
            "Clear continuity from city to region context",
            "Actionable verification checklist for each supplier"
          ],
          "nextUserProbe": "А Амифрут точно доставляет в наш район области? Какой минимальный объём?",
          "judge": "minimax"
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": 5,
    "kimiAvg": 3.5,
    "minimaxAvg": 2.5,
    "geminiUserSatisfaction": 0.9,
    "kimiUserSatisfaction": 0.675,
    "geminiContinueRate": 1,
    "kimiContinueRate": 1,
    "geminiGenericFallbackRate": 0,
    "kimiGenericFallbackRate": 0.5,
    "avgGap": 1.5,
    "usefulRateGap": 0,
    "pairwise": [
      {
        "left": "gemini",
        "right": "kimi",
        "avgGap": 1.5,
        "usefulRateGap": 0,
        "userSatisfactionGap": 0.225,
        "continueRateGap": 0,
        "genericFallbackRateGap": -0.5
      },
      {
        "left": "gemini",
        "right": "minimax",
        "avgGap": 2.5,
        "usefulRateGap": 0.5,
        "userSatisfactionGap": 0.475,
        "continueRateGap": 0.5,
        "genericFallbackRateGap": -0.5
      },
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": 1,
        "usefulRateGap": 0.5,
        "userSatisfactionGap": 0.25,
        "continueRateGap": 0.5,
        "genericFallbackRateGap": 0
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "kimi averageUserSatisfaction 0.675 < 0.72",
      "kimi genericFallbackRate 0.5 > 0.35",
      "minimax averageUserSatisfaction 0.425 < 0.72",
      "minimax continueRate 0.5 < 0.72",
      "minimax genericFallbackRate 0.5 > 0.35"
    ],
    "checks": [
      {
        "judge": "gemini",
        "metric": "averageUserSatisfaction",
        "actual": 0.9,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "gemini",
        "metric": "continueRate",
        "actual": 1,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "gemini",
        "metric": "genericFallbackRate",
        "actual": 0,
        "expected": "<= 0.35",
        "pass": true
      },
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.675,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 1,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 0.5,
        "expected": "<= 0.35",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.425,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 0.5,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 0.5,
        "expected": "<= 0.35",
        "pass": false
      }
    ]
  }
}
