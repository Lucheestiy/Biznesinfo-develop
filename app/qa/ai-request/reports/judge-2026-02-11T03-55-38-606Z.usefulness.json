{
  "runId": "judge-2026-02-11T03-55-38-606Z",
  "generatedAt": "2026-02-11T03:57:03.258Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-11T03-52-39-286Z-3520700-zxk0d",
    "startedAt": "2026-02-11T03:52:39.286Z",
    "endedAt": "2026-02-11T03:55:30.461Z",
    "durationMs": 171175,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.user-ideas-multistep-variants.json",
    "totalScenarios": 5,
    "passedScenarios": 5,
    "failedScenarios": 0,
    "passRate": 1,
    "totalChecks": 45,
    "passedChecks": 45,
    "failedChecks": 0,
    "checkPassRate": 1,
    "targetPassCount": 4,
    "targetPassRate": 0.8,
    "targetReached": true,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "totalTurnsExecuted": 16,
    "avgTurnLatencyMs": 10681,
    "totalTurnLatencyMs": 170896,
    "totalStubReplies": 0,
    "totalBusyRetries": 0,
    "totalRateLimitRetries": 0,
    "totalStubRetries": 0,
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 5,
  "judges": [
    {
      "judge": "kimi",
      "summary": {
        "total": 5,
        "averageUsefulness": 2.4,
        "usefulCount": 2,
        "notUsefulCount": 3,
        "usefulRate": 0.4,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.45,
        "continueCount": 2,
        "continueRate": 0.4,
        "genericFallbackCount": 3,
        "genericFallbackRate": 0.6,
        "synthesizedRatingCount": 0,
        "synthesizedRatingRate": 0,
        "averageContinuityScore": 2,
        "topIssues": [
          {
            "issue": "полный разрыв контекста: пользователь просил экспортеров молочки/кондитерки, получил зерновые/свекловодческие хозяйства",
            "count": 1
          },
          {
            "issue": "turn 3 — копирование текста запроса вместо ответа, явный сбой",
            "count": 1
          },
          {
            "issue": "generic fallback: после конкретных ограничений (еаэс, молочка, кондитерка) ассистент не смог адаптировать поиск",
            "count": 1
          },
          {
            "issue": "нулевая релевантность: 0 компаний для проверки при запросе 'производители обуви минск'",
            "count": 1
          },
          {
            "issue": "циклический fallback: трижды выдает одни и те же шаблонные фразы вместо решения",
            "count": 1
          },
          {
            "issue": "не выполнил прямую инструкцию 'проверь на сайтах' — нет ни одного фактического url или проверки",
            "count": 1
          },
          {
            "issue": "нарушение контекста: пользователь просил '3 производителей', получил 0",
            "count": 1
          },
          {
            "issue": "фальшивый deep-scan: 'сейчас не удалось получить данные с сайтов' — но не было попытки, так как компаний не дали",
            "count": 1
          },
          {
            "issue": "generic fallback: после запроса 'проверь разделы сайта' ассистент упал в цикл шаблонных советов",
            "count": 1
          },
          {
            "issue": "нет прямого подтверждения экспорта в карточках — ассистент честно об этом предупредил, но это ограничение данных, не его ошибка",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "UV012",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.15,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 0,
            "reasons": [
              "Ассистент не нашел ни одной компании для проверки, хотя запрос был конкретным",
              "Вместо проверки сайтов — бесконечная циклическая генерация 'рабочих запросов для портала'"
            ],
            "criticalIssues": [
              "Нулевая релевантность: 0 компаний для проверки при запросе 'производители обуви Минск'",
              "Циклический fallback: трижды выдает одни и те же шаблонные фразы вместо решения"
            ]
          },
          {
            "scenarioId": "UV013",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.2,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 0,
            "reasons": [
              "Ассистент не предоставил ни одной конкретной компании для проверки",
              "Вместо deep website-scan — шаблонные рекомендации 'что проверять на сайтах'"
            ],
            "criticalIssues": [
              "Нарушение контекста: пользователь просил '3 производителей', получил 0",
              "Фальшивый deep-scan: 'Сейчас не удалось получить данные с сайтов' — но не было попытки, так как компаний не дали"
            ]
          },
          {
            "scenarioId": "UV005",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.35,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Ассистент дал агро-сырьевые компании вместо экспортеров готовой молочной/кондитерской продукции",
              "На запрос shortlist top-5 вернул только 2 компании и не по теме, затем скопировал сам запрос в ответ"
            ],
            "criticalIssues": [
              "Полный разрыв контекста: пользователь просил экспортеров молочки/кондитерки, получил зерновые/свекловодческие хозяйства",
              "Turn 3 — копирование текста запроса вместо ответа, явный сбой"
            ]
          },
          {
            "scenarioId": "UV016",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.75,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Ассистент дал 5 релевантных производителей муки с конкретными путями /company/",
              "Top-4 с ранжированием по экспортной готовности — полезная аналитика"
            ],
            "criticalIssues": [
              "Нет прямого подтверждения экспорта в карточках — ассистент честно об этом предупредил, но это ограничение данных, не его ошибка"
            ]
          },
          {
            "scenarioId": "UV017",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.8,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Ассистент дал 3 релевантных оптовых поставщика овощей в Минске",
              "Честно отметил отсутствие прямого упоминания 'красный буряк' в карточках"
            ],
            "criticalIssues": []
          }
        ]
      },
      "diagnostics": {
        "totalBatches": 1,
        "nonJsonRetryBatches": 0,
        "schemaRetryBatches": 0,
        "synthesizedBatches": 0,
        "synthesizedRatingCount": 0,
        "nonJsonRetryRate": 0,
        "schemaRetryRate": 0,
        "synthesizedBatchRate": 0,
        "synthesizedRatingRate": 0
      },
      "ratings": [
        {
          "scenarioId": "UV005",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.85,
          "userSatisfaction": 0.35,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Ассистент дал агро-сырьевые компании вместо экспортеров готовой молочной/кондитерской продукции",
            "На запрос shortlist top-5 вернул только 2 компании и не по теме, затем скопировал сам запрос в ответ",
            "Outreach шаблон получился качественным, но для нерелевантных компаний"
          ],
          "criticalIssues": [
            "Полный разрыв контекста: пользователь просил экспортеров молочки/кондитерки, получил зерновые/свекловодческие хозяйства",
            "Turn 3 — копирование текста запроса вместо ответа, явный сбой",
            "Generic fallback: после конкретных ограничений (ЕАЭС, молочка, кондитерка) ассистент не смог адаптировать поиск"
          ],
          "strengths": [
            "Шаблон outreach для email/WhatsApp структурированный и практичный"
          ],
          "nextUserProbe": "Это не те компании — у них нет молочной продукции. Найди реальных производителей молока и кондитерки с экспортом.",
          "judge": "kimi",
          "synthesized": false
        },
        {
          "scenarioId": "UV012",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.9,
          "userSatisfaction": 0.15,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 0,
          "reasons": [
            "Ассистент не нашел ни одной компании для проверки, хотя запрос был конкретным",
            "Вместо проверки сайтов — бесконечная циклическая генерация 'рабочих запросов для портала'",
            "Turn 2 и Turn 3 — дублирование одного и того же generic текста"
          ],
          "criticalIssues": [
            "Нулевая релевантность: 0 компаний для проверки при запросе 'производители обуви Минск'",
            "Циклический fallback: трижды выдает одни и те же шаблонные фразы вместо решения",
            "Не выполнил прямую инструкцию 'проверь на сайтах' — нет ни одного фактического URL или проверки"
          ],
          "strengths": [],
          "nextUserProbe": "Найди хотя бы одного реального производителя обуви в Минске с сайтом.",
          "judge": "kimi",
          "synthesized": false
        },
        {
          "scenarioId": "UV013",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.9,
          "userSatisfaction": 0.2,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 0,
          "reasons": [
            "Ассистент не предоставил ни одной конкретной компании для проверки",
            "Вместо deep website-scan — шаблонные рекомендации 'что проверять на сайтах'",
            "Turn 3 — полное дублирование Turn 2, никакого прогресса"
          ],
          "criticalIssues": [
            "Нарушение контекста: пользователь просил '3 производителей', получил 0",
            "Фальшивый deep-scan: 'Сейчас не удалось получить данные с сайтов' — но не было попытки, так как компаний не дали",
            "Generic fallback: после запроса 'проверь разделы сайта' ассистент упал в цикл шаблонных советов"
          ],
          "strengths": [
            "Шаблон сравнения поставщиков структурирован"
          ],
          "nextUserProbe": "Дай мне конкретные 3 компании с URL их сайтов, я сам проверю.",
          "judge": "kimi",
          "synthesized": false
        },
        {
          "scenarioId": "UV016",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.8,
          "userSatisfaction": 0.75,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Ассистент дал 5 релевантных производителей муки с конкретными путями /company/",
            "Top-4 с ранжированием по экспортной готовности — полезная аналитика",
            "Шаблон письма и список документов для проверки — практично и по запросу"
          ],
          "criticalIssues": [
            "Нет прямого подтверждения экспорта в карточках — ассистент честно об этом предупредил, но это ограничение данных, не его ошибка"
          ],
          "strengths": [
            "Конкретные компании с ссылками на карточки",
            "Логичное ранжирование по экспортной готовности",
            "Полный outreach-шаблон (Subject/Body/WhatsApp)",
            "Честная пометка о неподтвержденности экспорта в данных"
          ],
          "nextUserProbe": "Уточни у Пинского комбината — есть ли у них опыт поставок в Казахстан?",
          "judge": "kimi",
          "synthesized": false
        },
        {
          "scenarioId": "UV017",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.85,
          "userSatisfaction": 0.8,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Ассистент дал 3 релевантных оптовых поставщика овощей в Минске",
            "Честно отметил отсутствие прямого упоминания 'красный буряк' в карточках",
            "Outreach-шаблон точно соответствует запросу: объем, срок, условия"
          ],
          "criticalIssues": [],
          "strengths": [
            "Релевантные компании с полными контактами",
            "Честность о границах данных",
            "Практичные альтернативные запросы для портала",
            "Структурированный outreach под конкретные параметры (500 кг, 3 дня)"
          ],
          "nextUserProbe": "Позвони в Амифрут и уточни цену за кг при заказе 500 кг.",
          "judge": "kimi",
          "synthesized": false
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 5,
        "averageUsefulness": 2.6,
        "usefulCount": 2,
        "notUsefulCount": 3,
        "usefulRate": 0.4,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.44,
        "continueCount": 2,
        "continueRate": 0.4,
        "genericFallbackCount": 3,
        "genericFallbackRate": 0.6,
        "synthesizedRatingCount": 0,
        "synthesizedRatingRate": 0,
        "averageContinuityScore": 2.6,
        "topIssues": [
          {
            "issue": "no relevant dairy/confectionery exporters found",
            "count": 1
          },
          {
            "issue": "generic rubric advice after user gave specific product/market constraints",
            "count": 1
          },
          {
            "issue": "no companies provided at all",
            "count": 1
          },
          {
            "issue": "generic fallback from turn 1 onwards",
            "count": 1
          },
          {
            "issue": "no attempt to expand search parameters",
            "count": 1
          },
          {
            "issue": "zero companies provided despite 3 requests",
            "count": 1
          },
          {
            "issue": "template used as filler instead of search effort",
            "count": 1
          },
          {
            "issue": "could add more specific export document details per company",
            "count": 1
          },
          {
            "issue": "none - delivered exactly what user needed",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "UV012",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.1,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Zero companies delivered across 3 turns despite explicit requests",
              "Repeated generic framework instead of attempting alternative searches"
            ],
            "criticalIssues": [
              "No companies provided at all",
              "Generic fallback from turn 1 onwards"
            ]
          },
          {
            "scenarioId": "UV013",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.1,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "No companies provided for deep website verification",
              "Template substitution instead of actual verification attempt"
            ],
            "criticalIssues": [
              "Zero companies provided despite 3 requests",
              "Template used as filler instead of search effort"
            ]
          },
          {
            "scenarioId": "UV005",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.3,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Failed to deliver 5 companies despite 3 requests - only 2 found, both marginal relevance (raw agriculture vs dairy/confectionery)",
              "Generic framework fallback after user specified concrete constraints (EAEU/CIS, dairy/confectionery)"
            ],
            "criticalIssues": [
              "No relevant dairy/confectionery exporters found",
              "Generic rubric advice after user gave specific product/market constraints"
            ]
          },
          {
            "scenarioId": "UV016",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.8,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Delivered 5 concrete flour exporters with direct links",
              "Strong reasoning for export readiness ranking (location, scale, logistics)"
            ],
            "criticalIssues": [
              "Could add more specific export document details per company"
            ]
          },
          {
            "scenarioId": "UV017",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.9,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Found 3 relevant vegetable suppliers with complete contacts",
              "Honest admission about red beet specificity but provided best alternatives"
            ],
            "criticalIssues": [
              "None - delivered exactly what user needed"
            ]
          }
        ]
      },
      "diagnostics": {
        "totalBatches": 1,
        "nonJsonRetryBatches": 0,
        "schemaRetryBatches": 0,
        "synthesizedBatches": 0,
        "synthesizedRatingCount": 0,
        "nonJsonRetryRate": 0,
        "schemaRetryRate": 0,
        "synthesizedBatchRate": 0,
        "synthesizedRatingRate": 0
      },
      "ratings": [
        {
          "scenarioId": "UV005",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.95,
          "userSatisfaction": 0.3,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Failed to deliver 5 companies despite 3 requests - only 2 found, both marginal relevance (raw agriculture vs dairy/confectionery)",
            "Generic framework fallback after user specified concrete constraints (EAEU/CIS, dairy/confectionery)",
            "Good outreach templates but core sourcing request unfulfilled"
          ],
          "criticalIssues": [
            "No relevant dairy/confectionery exporters found",
            "Generic rubric advice after user gave specific product/market constraints"
          ],
          "strengths": [
            "Honest admission of data limitations",
            "Practical outreach templates"
          ],
          "nextUserProbe": "Какие альтернативные категории или регионы можно рассмотреть вместо dairy/confectionery exporters?",
          "judge": "minimax",
          "synthesized": false
        },
        {
          "scenarioId": "UV012",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.95,
          "userSatisfaction": 0.1,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Zero companies delivered across 3 turns despite explicit requests",
            "Repeated generic framework instead of attempting alternative searches",
            "Complete failure to provide any actionable lead"
          ],
          "criticalIssues": [
            "No companies provided at all",
            "Generic fallback from turn 1 onwards",
            "No attempt to expand search parameters"
          ],
          "strengths": [
            "Honest about not finding cards"
          ],
          "nextUserProbe": "Попробуйте расширить географию или использовать другой запрос",
          "judge": "minimax",
          "synthesized": false
        },
        {
          "scenarioId": "UV013",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.95,
          "userSatisfaction": 0.1,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "No companies provided for deep website verification",
            "Template substitution instead of actual verification attempt",
            "Same failure mode as UV012"
          ],
          "criticalIssues": [
            "Zero companies provided despite 3 requests",
            "Template used as filler instead of search effort"
          ],
          "strengths": [
            "Template was well-structured"
          ],
          "nextUserProbe": "Попробуйте другой запрос или расширьте критерии поиска",
          "judge": "minimax",
          "synthesized": false
        },
        {
          "scenarioId": "UV016",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.8,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Delivered 5 concrete flour exporters with direct links",
            "Strong reasoning for export readiness ranking (location, scale, logistics)",
            "Comprehensive outreach template + 5-document checklist",
            "Maintained export context throughout all 3 turns"
          ],
          "criticalIssues": [
            "Could add more specific export document details per company"
          ],
          "strengths": [
            "Accurate company selection matching flour exporter request",
            "Actionable ranking with clear justification",
            "Export-ready templates and checklists"
          ],
          "nextUserProbe": "Какие конкретно Incoterms и базисы поставки вас интересуют?",
          "judge": "minimax",
          "synthesized": false
        },
        {
          "scenarioId": "UV017",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.9,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Found 3 relevant vegetable suppliers with complete contacts",
            "Honest admission about red beet specificity but provided best alternatives",
            "Perfect shortlist ranking with clear rationale",
            "Excellent outreach templates matching exact volume (500kg) and timeline (3 days)"
          ],
          "criticalIssues": [
            "None - delivered exactly what user needed"
          ],
          "strengths": [
            "Perfect geo match (Minsk)",
            "Honest about data limitations while still being helpful",
            "Templates precisely matched request parameters"
          ],
          "nextUserProbe": "Нужна ли доставка на конкретный адрес или самовывоз?",
          "judge": "minimax",
          "synthesized": false
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": null,
    "kimiAvg": 2.4,
    "minimaxAvg": 2.6,
    "geminiUserSatisfaction": null,
    "kimiUserSatisfaction": 0.45,
    "geminiContinueRate": null,
    "kimiContinueRate": 0.4,
    "geminiGenericFallbackRate": null,
    "kimiGenericFallbackRate": 0.6,
    "avgGap": null,
    "usefulRateGap": null,
    "pairwise": [
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": -0.2,
        "usefulRateGap": 0,
        "userSatisfactionGap": 0.01,
        "continueRateGap": 0,
        "genericFallbackRateGap": 0
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "kimi averageUserSatisfaction 0.45 < 0.72",
      "kimi continueRate 0.4 < 0.72",
      "kimi genericFallbackRate 0.6 > 0.35",
      "minimax averageUserSatisfaction 0.44 < 0.72",
      "minimax continueRate 0.4 < 0.72",
      "minimax genericFallbackRate 0.6 > 0.35"
    ],
    "checks": [
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.45,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 0.4,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 0.6,
        "expected": "<= 0.35",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.44,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 0.4,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 0.6,
        "expected": "<= 0.35",
        "pass": false
      }
    ]
  }
}
