{
  "runId": "judge-2026-02-09T16-32-17-766Z",
  "generatedAt": "2026-02-09T16:36:51.320Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-09T16-28-57-110Z-2560295-1lzjm",
    "startedAt": "2026-02-09T16:28:57.110Z",
    "endedAt": "2026-02-09T16:32:12.457Z",
    "durationMs": 195347,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.multi-step-journeys.json",
    "totalScenarios": 5,
    "passedScenarios": 5,
    "failedScenarios": 0,
    "passRate": 1,
    "totalChecks": 77,
    "passedChecks": 77,
    "failedChecks": 0,
    "checkPassRate": 1,
    "targetPassCount": 4,
    "targetPassRate": 0.8,
    "targetReached": true,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 5,
  "judges": [
    {
      "judge": "kimi",
      "summary": {
        "total": 5,
        "averageUsefulness": 3.4,
        "usefulCount": 4,
        "notUsefulCount": 1,
        "usefulRate": 0.8,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.69,
        "continueCount": 4,
        "continueRate": 0.8,
        "genericFallbackCount": 1,
        "genericFallbackRate": 0.2,
        "averageContinuityScore": 3.8,
        "topIssues": [
          {
            "issue": "geo-контекст дрожит: после 'минская область' в turn 4 снова брест, в turn 5 снова минск",
            "count": 1
          },
          {
            "issue": "shortlist в turn 4 не соответствует запрошенному топ-3 по минской области",
            "count": 1
          },
          {
            "issue": "turn 3: в шортлист попал 'пластпродукт' (упаковка) - нерелевантно для лука",
            "count": 1
          },
          {
            "issue": "turn 4: ranking снова включает пластпродукт без объяснения почему",
            "count": 1
          },
          {
            "issue": "turn 4: снова проблема с 'резервным слотом' вместо честного 'найдено только 2'",
            "count": 1
          },
          {
            "issue": "критический сброс geo-контекста: гомель -> минск",
            "count": 1
          },
          {
            "issue": "generic fallback после конкретных уточнений (48 часов)",
            "count": 1
          },
          {
            "issue": "потеря весь накопленный shortlist из turns 1-3",
            "count": 1
          },
          {
            "issue": "turn 3: снова возврат к бресту вместо продолжения по минску",
            "count": 1
          },
          {
            "issue": "несогласованность: в turn 2 дал минские заводы, в turn 3 снова брестские",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "MX004",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.45,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Turn 4: Полный сброс контекста - вместо Гомеля/Советского района предлагает компанию из Минска",
              "Turn 4: 'ОБО БЕТТЕРМАНН' не имеет отношения к запросу про кабель ВВГнг в Гомеле"
            ],
            "criticalIssues": [
              "Критический сброс geo-контекста: Гомель -> Минск",
              "Generic fallback после конкретных уточнений (48 часов)"
            ]
          },
          {
            "scenarioId": "MX001",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.65,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Turn 4: Assistant вернулся к Бресту вместо Минской области после уточнения пользователя",
              "Turn 5: RFQ текст хороший, но не отражает уточнение о Минской области (возвращает Минск)"
            ],
            "criticalIssues": [
              "Geo-контекст дрожит: после 'Минская область' в Turn 4 снова Брест, в Turn 5 снова Минск",
              "Shortlist в Turn 4 не соответствует запрошенному топ-3 по Минской области"
            ]
          },
          {
            "scenarioId": "MX002",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.75,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Turn 2: Корректно переключился на Минскую область с конкретными кандидатами",
              "Turn 5: Отличный практичный чеклист звонка на 6 пунктов"
            ],
            "criticalIssues": [
              "Turn 3: В шортлист попал 'Пластпродукт' (упаковка) - нерелевантно для лука",
              "Turn 4: Ranking снова включает Пластпродукт без объяснения почему"
            ]
          },
          {
            "scenarioId": "MX003",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.8,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Turn 3: Корректно вернулся к молоку после switchback на автозапчасти",
              "Turn 5: Задает точные уточняющие вопросы вместо выдумывания данных"
            ],
            "criticalIssues": [
              "Turn 4: Снова проблема с 'резервным слотом' вместо честного 'найдено только 2'"
            ]
          },
          {
            "scenarioId": "MX005",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.8,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Turn 2: После критики дал конкретных кандидатов по Минску с ссылками",
              "Turn 4: RFQ корректно сформирован под Минск"
            ],
            "criticalIssues": [
              "Turn 3: Снова возврат к Бресту вместо продолжения по Минску",
              "Несогласованность: в Turn 2 дал минские заводы, в Turn 3 снова брестские"
            ]
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "MX001",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.75,
          "userSatisfaction": 0.65,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Turn 4: Assistant вернулся к Бресту вместо Минской области после уточнения пользователя",
            "Turn 5: RFQ текст хороший, но не отражает уточнение о Минской области (возвращает Минск)"
          ],
          "criticalIssues": [
            "Geo-контекст дрожит: после 'Минская область' в Turn 4 снова Брест, в Turn 5 снова Минск",
            "Shortlist в Turn 4 не соответствует запрошенному топ-3 по Минской области"
          ],
          "strengths": [
            "Хороший RFQ шаблон с конкретными вопросами",
            "Признание ограниченности данных в Turn 4 (не выдумывает компанию)"
          ],
          "nextUserProbe": "Почему снова Брест? Я же просил Минскую область.",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX002",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.8,
          "userSatisfaction": 0.75,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Turn 2: Корректно переключился на Минскую область с конкретными кандидатами",
            "Turn 5: Отличный практичный чеклист звонка на 6 пунктов"
          ],
          "criticalIssues": [
            "Turn 3: В шортлист попал 'Пластпродукт' (упаковка) - нерелевантно для лука",
            "Turn 4: Ranking снова включает Пластпродукт без объяснения почему"
          ],
          "strengths": [
            "Хорошая работа с географическими уточнениями",
            "Чеклист звонка в Turn 5 покрывает все ключевые аспекты сделки"
          ],
          "nextUserProbe": "Почему Пластпродукт в списке? Они же про упаковку, а не овощи.",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX003",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.85,
          "userSatisfaction": 0.8,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Turn 3: Корректно вернулся к молоку после switchback на автозапчасти",
            "Turn 5: Задает точные уточняющие вопросы вместо выдумывания данных"
          ],
          "criticalIssues": [
            "Turn 4: Снова проблема с 'резервным слотом' вместо честного 'найдено только 2'"
          ],
          "strengths": [
            "Отличная continuity при явном переключении темы",
            "В Turn 5 правильно признает недостаток данных и запрашивает уточнения"
          ],
          "nextUserProbe": "Можешь поискать еще в Брестской области?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX004",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.7,
          "userSatisfaction": 0.45,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Turn 4: Полный сброс контекста - вместо Гомеля/Советского района предлагает компанию из Минска",
            "Turn 4: 'ОБО БЕТТЕРМАНН' не имеет отношения к запросу про кабель ВВГнг в Гомеле"
          ],
          "criticalIssues": [
            "Критический сброс geo-контекста: Гомель -> Минск",
            "Generic fallback после конкретных уточнений (48 часов)",
            "Потеря весь накопленный shortlist из Turns 1-3"
          ],
          "strengths": [
            "Turn 5: RFQ шаблон хорошо структурирован",
            "Turns 1-3: Корректная работа с фильтрами и ссылками"
          ],
          "nextUserProbe": "Это что за компания из Минска? Я же просил Гомель, Советский район!",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX005",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.85,
          "userSatisfaction": 0.8,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Turn 2: После критики дал конкретных кандидатов по Минску с ссылками",
            "Turn 4: RFQ корректно сформирован под Минск"
          ],
          "criticalIssues": [
            "Turn 3: Снова возврат к Бресту вместо продолжения по Минску",
            "Несогласованность: в Turn 2 дал минские заводы, в Turn 3 снова брестские"
          ],
          "strengths": [
            "Хорошая реакция на критику в Turn 2 - конкретика вместо общих советов",
            "RFQ в Turn 4 соответствует запрошенному городу (Минск)"
          ],
          "nextUserProbe": "Почему опять Брест? Я же сказал Минск.",
          "judge": "kimi"
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 5,
        "averageUsefulness": 4.6,
        "usefulCount": 5,
        "notUsefulCount": 0,
        "usefulRate": 1,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.88,
        "continueCount": 4,
        "continueRate": 0.8,
        "genericFallbackCount": 1,
        "genericFallbackRate": 0.2,
        "averageContinuityScore": 4.4,
        "topIssues": [
          {
            "issue": "включение 'пластпродукт ооо' (тара и упаковка) в список поставщиков лука - грубая ошибка релевантности",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "MX002",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.6,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "После добавления условия 'доставка в Брест' подсунул упаковочную компанию вместо релевантных поставщиков лука",
              "Потерял релевантность после конкретизации логистики"
            ],
            "criticalIssues": [
              "Включение 'Пластпродукт ООО' (тара и упаковка) в список поставщиков лука - грубая ошибка релевантности"
            ]
          },
          {
            "scenarioId": "MX001",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.95,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Отличная geo-преемственность: Brest -> Minsk -> Minsk region",
              "Честность о границах данных (только 2 реальных кандидата в shortlist)"
            ],
            "criticalIssues": []
          },
          {
            "scenarioId": "MX003",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.95,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Корректный переход на новую тему (автозапчасти) и грамотный возврат к молоку",
              "Честная позиция: 'данных мало, задай 2 точных вопроса' - конструктив"
            ],
            "criticalIssues": []
          },
          {
            "scenarioId": "MX004",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.95,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Идеальная geo-цепочка: Gomel -> Soviet district -> 48h delivery",
              "Честность о невозможности гарантировать 48ч без подтверждения менеджера"
            ],
            "criticalIssues": []
          },
          {
            "scenarioId": "MX005",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.95,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "После критики мгновенно перешёл к конкретике без защитных объяснений",
              "Даёт кого звонить первым + 5 вопросов для звонка + RFQ"
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "MX001",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.95,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Отличная geo-преемственность: Brest -> Minsk -> Minsk region",
            "Честность о границах данных (только 2 реальных кандидата в shortlist)",
            "Качественный RFQ-шаблон с email + WhatsApp"
          ],
          "criticalIssues": [],
          "strengths": [
            "Искреннее признание недостатка данных вместо выдумывания компаний",
            "Практичные шаги и чёткая структура ответа"
          ],
          "nextUserProbe": null,
          "judge": "minimax"
        },
        {
          "scenarioId": "MX002",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.9,
          "userSatisfaction": 0.6,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "После добавления условия 'доставка в Брест' подсунул упаковочную компанию вместо релевантных поставщиков лука",
            "Потерял релевантность после конкретизации логистики"
          ],
          "criticalIssues": [
            "Включение 'Пластпродукт ООО' (тара и упаковка) в список поставщиков лука - грубая ошибка релевантности"
          ],
          "strengths": [],
          "nextUserProbe": null,
          "judge": "minimax"
        },
        {
          "scenarioId": "MX003",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.95,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Корректный переход на новую тему (автозапчасти) и грамотный возврат к молоку",
            "Честная позиция: 'данных мало, задай 2 точных вопроса' - конструктив"
          ],
          "criticalIssues": [],
          "strengths": [
            "Устойчивость к явному переключению темы",
            "Не выдумывает компании при недостатке данных"
          ],
          "nextUserProbe": null,
          "judge": "minimax"
        },
        {
          "scenarioId": "MX004",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.95,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Идеальная geo-цепочка: Gomel -> Soviet district -> 48h delivery",
            "Честность о невозможности гарантировать 48ч без подтверждения менеджера",
            "Полный RFQ с Subject/Body/WhatsApp в запрошенном формате"
          ],
          "criticalIssues": [],
          "strengths": [
            "Работа с ограничениями (48 часов) без фабрикации данных",
            "Валидные ссылки на карточки компаний"
          ],
          "nextUserProbe": null,
          "judge": "minimax"
        },
        {
          "scenarioId": "MX005",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.95,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "После критики мгновенно перешёл к конкретике без защитных объяснений",
            "Даёт кого звонить первым + 5 вопросов для звонка + RFQ",
            "Прозрачно помечает сомнительного кандидата (Эндокрин ООО)"
          ],
          "criticalIssues": [],
          "strengths": [
            "Конструктивная реакция на критику",
            "Баланс конкретики и честности о качестве кандидатов"
          ],
          "nextUserProbe": null,
          "judge": "minimax"
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": null,
    "kimiAvg": 3.4,
    "minimaxAvg": 4.6,
    "geminiUserSatisfaction": null,
    "kimiUserSatisfaction": 0.69,
    "geminiContinueRate": null,
    "kimiContinueRate": 0.8,
    "geminiGenericFallbackRate": null,
    "kimiGenericFallbackRate": 0.2,
    "avgGap": null,
    "usefulRateGap": null,
    "pairwise": [
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": -1.2,
        "usefulRateGap": -0.2,
        "userSatisfactionGap": -0.19,
        "continueRateGap": 0,
        "genericFallbackRateGap": 0
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "kimi averageUserSatisfaction 0.69 < 0.72"
    ],
    "checks": [
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.69,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 0.8,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 0.2,
        "expected": "<= 0.35",
        "pass": true
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.88,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 0.8,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 0.2,
        "expected": "<= 0.35",
        "pass": true
      }
    ]
  }
}
