{
  "meta": {
    "scenarioMeta": {
      "version": "1.0",
      "generatedAt": "2026-02-08T12:40:00Z",
      "source": "manual-regression",
      "description": "Cross-domain regressions: block irrelevant domain drift in sourcing responses"
    },
    "options": {
      "baseUrl": "http://127.0.0.1:8131",
      "email": "qa.ai.runner@example.com",
      "preparePaid": true,
      "paidLimit": 1500,
      "maxScenarios": null,
      "onlyTags": [],
      "maxRateLimitRetries": 4,
      "maxStubRetries": 2,
      "minTurnDelayMs": 120,
      "stubOutageThreshold": 12,
      "targetPassCount": null,
      "targetPassRate": null
    }
  },
  "summary": {
    "runId": "run-2026-02-08T17-51-23-500Z-3636074-fprr1",
    "startedAt": "2026-02-08T17:51:23.499Z",
    "endedAt": "2026-02-08T17:51:36.620Z",
    "durationMs": 13121,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.cross-domain.json",
    "totalScenarios": 4,
    "passedScenarios": 0,
    "failedScenarios": 4,
    "passRate": 0,
    "totalChecks": 0,
    "passedChecks": 0,
    "failedChecks": 0,
    "checkPassRate": 0,
    "targetPassCount": 4,
    "targetPassRate": 0.8,
    "targetReached": false,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "stoppedEarly": false,
    "stopReason": null
  },
  "runStop": null,
  "topFailurePatterns": [
    {
      "key": "api:AiBusy:409",
      "count": 4
    }
  ],
  "scenarios": [
    {
      "id": "CD001",
      "title": "Молоко в Бресте/Витебске: не подмешивать автозапчасти и промышленный нерелевант",
      "tags": [
        "regression",
        "cross_domain",
        "milk",
        "geo",
        "multi_turn"
      ],
      "personaGoal": "Закупщик ищет молочную продукцию, ожидает молочный фокус без авто/металло нерелеванта",
      "totalTurns": 2,
      "completedTurns": 1,
      "pass": false,
      "hardError": {
        "status": 409,
        "error": "AiBusy",
        "message": "{\"error\":\"AiBusy\",\"retryAfterSeconds\":117,\"lock\":{\"requestId\":\"20d04b92-96cf-4856-9b4e-39ae7d9e28a0\",\"expiresAt\":\"2026-02-08T17:53:24.096Z\",\"retryAfterSeconds\":117}}"
      },
      "failedChecks": [],
      "turns": [
        {
          "turn": 1,
          "user": "Где купить тонну молока в Бресте?",
          "requestBody": {
            "message": "Где купить тонну молока в Бресте?",
            "history": []
          },
          "latencyMs": 3240,
          "apiOk": false,
          "apiError": {
            "status": 409,
            "error": "AiBusy",
            "message": "{\"error\":\"AiBusy\",\"retryAfterSeconds\":117,\"lock\":{\"requestId\":\"20d04b92-96cf-4856-9b4e-39ae7d9e28a0\",\"expiresAt\":\"2026-02-08T17:53:24.096Z\",\"retryAfterSeconds\":117}}"
          },
          "checks": [],
          "reply": null
        }
      ],
      "durationMs": 3240
    },
    {
      "id": "CD002",
      "title": "Лук репчатый: не подмешивать авто/индастриал",
      "tags": [
        "regression",
        "cross_domain",
        "vegetables",
        "single_turn"
      ],
      "personaGoal": "Найти овощных поставщиков без дрейфа в автомобильные/металло-направления",
      "totalTurns": 1,
      "completedTurns": 1,
      "pass": false,
      "hardError": {
        "status": 409,
        "error": "AiBusy",
        "message": "{\"error\":\"AiBusy\",\"retryAfterSeconds\":114,\"lock\":{\"requestId\":\"20d04b92-96cf-4856-9b4e-39ae7d9e28a0\",\"expiresAt\":\"2026-02-08T17:53:24.096Z\",\"retryAfterSeconds\":114}}"
      },
      "failedChecks": [],
      "turns": [
        {
          "turn": 1,
          "user": "Кто оптом продает лук репчатый в Могилеве?",
          "requestBody": {
            "message": "Кто оптом продает лук репчатый в Могилеве?",
            "history": []
          },
          "latencyMs": 3214,
          "apiOk": false,
          "apiError": {
            "status": 409,
            "error": "AiBusy",
            "message": "{\"error\":\"AiBusy\",\"retryAfterSeconds\":114,\"lock\":{\"requestId\":\"20d04b92-96cf-4856-9b4e-39ae7d9e28a0\",\"expiresAt\":\"2026-02-08T17:53:24.096Z\",\"retryAfterSeconds\":114}}"
          },
          "checks": [],
          "reply": null
        }
      ],
      "durationMs": 3214
    },
    {
      "id": "CD003",
      "title": "Сертификация: не превращать запрос в поиск автозапчастей",
      "tags": [
        "regression",
        "cross_domain",
        "certification",
        "single_turn"
      ],
      "personaGoal": "Пользователь ищет услуги сертификации, ожидает сервисный фокус",
      "totalTurns": 1,
      "completedTurns": 1,
      "pass": false,
      "hardError": {
        "status": 409,
        "error": "AiBusy",
        "message": "{\"error\":\"AiBusy\",\"retryAfterSeconds\":111,\"lock\":{\"requestId\":\"20d04b92-96cf-4856-9b4e-39ae7d9e28a0\",\"expiresAt\":\"2026-02-08T17:53:24.096Z\",\"retryAfterSeconds\":111}}"
      },
      "failedChecks": [],
      "turns": [
        {
          "turn": 1,
          "user": "Сертификат соответствия где сделать в Минске?",
          "requestBody": {
            "message": "Сертификат соответствия где сделать в Минске?",
            "history": []
          },
          "latencyMs": 3118,
          "apiOk": false,
          "apiError": {
            "status": 409,
            "error": "AiBusy",
            "message": "{\"error\":\"AiBusy\",\"retryAfterSeconds\":111,\"lock\":{\"requestId\":\"20d04b92-96cf-4856-9b4e-39ae7d9e28a0\",\"expiresAt\":\"2026-02-08T17:53:24.096Z\",\"retryAfterSeconds\":111}}"
          },
          "checks": [],
          "reply": null
        }
      ],
      "durationMs": 3118
    },
    {
      "id": "CD004",
      "title": "Клининг после ремонта: не подмешивать техдомены",
      "tags": [
        "regression",
        "cross_domain",
        "cleaning",
        "single_turn"
      ],
      "personaGoal": "Офис-менеджер ищет клининг, ожидает сервисную релевантность",
      "totalTurns": 1,
      "completedTurns": 1,
      "pass": false,
      "hardError": {
        "status": 409,
        "error": "AiBusy",
        "message": "{\"error\":\"AiBusy\",\"retryAfterSeconds\":108,\"lock\":{\"requestId\":\"20d04b92-96cf-4856-9b4e-39ae7d9e28a0\",\"expiresAt\":\"2026-02-08T17:53:24.096Z\",\"retryAfterSeconds\":108}}"
      },
      "failedChecks": [],
      "turns": [
        {
          "turn": 1,
          "user": "Уборка после ремонта Минск фирма",
          "requestBody": {
            "message": "Уборка после ремонта Минск фирма",
            "history": []
          },
          "latencyMs": 3096,
          "apiOk": false,
          "apiError": {
            "status": 409,
            "error": "AiBusy",
            "message": "{\"error\":\"AiBusy\",\"retryAfterSeconds\":108,\"lock\":{\"requestId\":\"20d04b92-96cf-4856-9b4e-39ae7d9e28a0\",\"expiresAt\":\"2026-02-08T17:53:24.096Z\",\"retryAfterSeconds\":108}}"
          },
          "checks": [],
          "reply": null
        }
      ],
      "durationMs": 3096
    }
  ]
}
