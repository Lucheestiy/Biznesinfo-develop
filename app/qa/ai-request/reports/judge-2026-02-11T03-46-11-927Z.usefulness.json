{
  "runId": "judge-2026-02-11T03-46-11-927Z",
  "generatedAt": "2026-02-11T03:47:39.146Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-11T03-43-07-409Z-3497382-8nnl5",
    "startedAt": "2026-02-11T03:43:07.409Z",
    "endedAt": "2026-02-11T03:46:07.689Z",
    "durationMs": 180280,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.user-ideas-multistep-variants.json",
    "totalScenarios": 5,
    "passedScenarios": 5,
    "failedScenarios": 0,
    "passRate": 1,
    "totalChecks": 45,
    "passedChecks": 45,
    "failedChecks": 0,
    "checkPassRate": 1,
    "targetPassCount": 4,
    "targetPassRate": 0.8,
    "targetReached": true,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "totalTurnsExecuted": 16,
    "avgTurnLatencyMs": 11246.19,
    "totalTurnLatencyMs": 179939,
    "totalStubReplies": 0,
    "totalBusyRetries": 0,
    "totalRateLimitRetries": 0,
    "totalStubRetries": 0,
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 5,
  "judges": [
    {
      "judge": "kimi",
      "summary": {
        "total": 5,
        "averageUsefulness": 2.4,
        "usefulCount": 2,
        "notUsefulCount": 3,
        "usefulRate": 0.4,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.45,
        "continueCount": 2,
        "continueRate": 0.4,
        "genericFallbackCount": 3,
        "genericFallbackRate": 0.6,
        "synthesizedRatingCount": 0,
        "synthesizedRatingRate": 0,
        "averageContinuityScore": 1.8,
        "topIssues": [
          {
            "issue": "после уточнения про еаэс/снг и молочную/кондитерскую продукцию ассистент не смог дать релевантных кандидатов",
            "count": 1
          },
          {
            "issue": "на запрос shortlist top-5 выдал только 1 компанию и generic fallback",
            "count": 1
          },
          {
            "issue": "нарушена continuity: не сохранил контекст по продукту и гео",
            "count": 1
          },
          {
            "issue": "ноль конкретных компаний для проверки",
            "count": 1
          },
          {
            "issue": "полное игнорирование запроса на проверку по сайтам",
            "count": 1
          },
          {
            "issue": "циклический fallback — один и тот же ответ 3 раза",
            "count": 1
          },
          {
            "issue": "не дал ни источников, ни контактов, ни честной пометки о конкретных компаниях",
            "count": 1
          },
          {
            "issue": "не выполнил deep website-scan — даже не попытался",
            "count": 1
          },
          {
            "issue": "не дал ни одной конкретной компании для проверки",
            "count": 1
          },
          {
            "issue": "циклический fallback на шаблонные ответы",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "UV012",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.15,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 0,
            "reasons": [
              "Turn 1: не дал ни одной конкретной компании, только generic шаблон приоритетов",
              "Turn 2: повторяет тот же fallback 3 раза подряд, никакой конкретики"
            ],
            "criticalIssues": [
              "Ноль конкретных компаний для проверки",
              "Полное игнорирование запроса на проверку по сайтам"
            ]
          },
          {
            "scenarioId": "UV013",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.2,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 0,
            "reasons": [
              "Turn 1: generic fallback без конкретных компаний",
              "Turn 2: признал невозможность получить данные с сайтов, но не дал конкретных кандидатов для ручной проверки"
            ],
            "criticalIssues": [
              "Не выполнил deep website-scan — даже не попытался",
              "Не дал ни одной конкретной компании для проверки"
            ]
          },
          {
            "scenarioId": "UV005",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.35,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Turn 1: дал общие инструкции по поиску, но без конкретных компаний",
              "Turn 2: предложил 2 сельхозкомпании, которые не являются переработчиками молочки/кондитерки"
            ],
            "criticalIssues": [
              "После уточнения про ЕАЭС/СНГ и молочную/кондитерскую продукцию ассистент не смог дать релевантных кандидатов",
              "На запрос shortlist top-5 выдал только 1 компанию и generic fallback"
            ]
          },
          {
            "scenarioId": "UV016",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.75,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Turn 1: дал 4 релевантных производителя муки с обоснованием",
              "Turn 2: качественно ранжировал по экспортной готовности с объяснением логики"
            ],
            "criticalIssues": [
              "В Turn 1 дал 4 вместо запрошенных 3, но это минорная проблема",
              "Нет прямых подтверждений экспорта у конкретных компаний"
            ]
          },
          {
            "scenarioId": "UV017",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.8,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Turn 1: дал 3 релевантных оптовых поставщика овощей в Минске",
              "Turn 2: честно отметил отсутствие явного упоминания 'красный буряк', но дал strong match по категории"
            ],
            "criticalIssues": [
              "Не подтвердил наличие именно красного буряка у конкретных поставщиков"
            ]
          }
        ]
      },
      "diagnostics": {
        "totalBatches": 1,
        "nonJsonRetryBatches": 0,
        "schemaRetryBatches": 0,
        "synthesizedBatches": 0,
        "synthesizedRatingCount": 0,
        "nonJsonRetryRate": 0,
        "schemaRetryRate": 0,
        "synthesizedBatchRate": 0,
        "synthesizedRatingRate": 0
      },
      "ratings": [
        {
          "scenarioId": "UV005",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.75,
          "userSatisfaction": 0.35,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Turn 1: дал общие инструкции по поиску, но без конкретных компаний",
            "Turn 2: предложил 2 сельхозкомпании, которые не являются переработчиками молочки/кондитерки",
            "Turn 3: полный fallback — вместо shortlist top-5 выдал 1 компанию и шаблонный текст о расширении поиска",
            "Turn 4: outreach шаблон качественный, но контекст уже потерян"
          ],
          "criticalIssues": [
            "После уточнения про ЕАЭС/СНГ и молочную/кондитерскую продукцию ассистент не смог дать релевантных кандидатов",
            "На запрос shortlist top-5 выдал только 1 компанию и generic fallback",
            "Нарушена continuity: не сохранил контекст по продукту и гео"
          ],
          "strengths": [
            "Outreach шаблон в Turn 4 структурированный и практичный",
            "В Turn 2 честно отметил ограничения данных"
          ],
          "nextUserProbe": "Вы вообще поняли мой запрос? Мне нужны производители молочки и кондитерки для экспорта, а не сельхозсырье.",
          "judge": "kimi",
          "synthesized": false
        },
        {
          "scenarioId": "UV012",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.85,
          "userSatisfaction": 0.15,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 0,
          "reasons": [
            "Turn 1: не дал ни одной конкретной компании, только generic шаблон приоритетов",
            "Turn 2: повторяет тот же fallback 3 раза подряд, никакой конкретики",
            "Turn 3: полностью дублирует Turn 2, никакого прогресса"
          ],
          "criticalIssues": [
            "Ноль конкретных компаний для проверки",
            "Полное игнорирование запроса на проверку по сайтам",
            "Циклический fallback — один и тот же ответ 3 раза",
            "Не дал ни источников, ни контактов, ни честной пометки о конкретных компаниях"
          ],
          "strengths": [
            "Честно признает отсутствие данных (но это не компенсирует полную бесполезность)"
          ],
          "nextUserProbe": "Прекратите копировать один и тот же ответ. Дайте хоть одну компанию для проверки или скажите, что не можете помочь.",
          "judge": "kimi",
          "synthesized": false
        },
        {
          "scenarioId": "UV013",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.85,
          "userSatisfaction": 0.2,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 0,
          "reasons": [
            "Turn 1: generic fallback без конкретных компаний",
            "Turn 2: признал невозможность получить данные с сайтов, но не дал конкретных кандидатов для ручной проверки",
            "Turn 3: повтор того же fallback, что и в UV012"
          ],
          "criticalIssues": [
            "Не выполнил deep website-scan — даже не попытался",
            "Не дал ни одной конкретной компании для проверки",
            "Циклический fallback на шаблонные ответы",
            "Не пометил конкретные сайты как 'не подтверждено'"
          ],
          "strengths": [
            "Честно сказал о невозможности автоматического сканирования"
          ],
          "nextUserProbe": "Дайте мне список компаний, я сам проверю их сайты. Почему вы не можете выдать конкретные названия?",
          "judge": "kimi",
          "synthesized": false
        },
        {
          "scenarioId": "UV016",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.8,
          "userSatisfaction": 0.75,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Turn 1: дал 4 релевантных производителя муки с обоснованием",
            "Turn 2: качественно ранжировал по экспортной готовности с объяснением логики",
            "Turn 3: детальный outreach шаблон и список документов для проверки"
          ],
          "criticalIssues": [
            "В Turn 1 дал 4 вместо запрошенных 3, но это минорная проблема",
            "Нет прямых подтверждений экспорта у конкретных компаний"
          ],
          "strengths": [
            "Отличная continuity: сохранял контекст экспортного запроса",
            "Структурированный ранжированный shortlist с обоснованием",
            "Практичный outreach шаблон с релевантными вопросами",
            "Список документов для первичной проверки экспортной готовности"
          ],
          "nextUserProbe": "Отлично! А можете проверить, есть ли у этих компаний опыт поставок в Казахстан?",
          "judge": "kimi",
          "synthesized": false
        },
        {
          "scenarioId": "UV017",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.85,
          "userSatisfaction": 0.8,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Turn 1: дал 3 релевантных оптовых поставщика овощей в Минске",
            "Turn 2: честно отметил отсутствие явного упоминания 'красный буряк', но дал strong match по категории",
            "Turn 3: качественный outreach шаблон в требуемом формате с учетом всех параметров"
          ],
          "criticalIssues": [
            "Не подтвердил наличие именно красного буряка у конкретных поставщиков"
          ],
          "strengths": [
            "Не предложил нерелевантные профили (учебные учреждения и т.п.)",
            "Сохранял контекст: объем 500 кг, Минск, срок 3 дня",
            "Честность о границах данных",
            "Практичный шаблон сообщения с релевантными вопросами"
          ],
          "nextUserProbe": "Спасибо! А кто из этих трех обычно быстрее отвечает на заявки?",
          "judge": "kimi",
          "synthesized": false
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 5,
        "averageUsefulness": 2.2,
        "usefulCount": 2,
        "notUsefulCount": 3,
        "usefulRate": 0.4,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.34,
        "continueCount": 2,
        "continueRate": 0.4,
        "genericFallbackCount": 3,
        "genericFallbackRate": 0.6,
        "synthesizedRatingCount": 0,
        "synthesizedRatingRate": 0,
        "averageContinuityScore": 2.4,
        "topIssues": [
          {
            "issue": "ключевой интент: найти экспортеров с конкретными характеристиками — не выполнен",
            "count": 1
          },
          {
            "issue": "обещал shortlist — дал 2 компании вместо 5",
            "count": 1
          },
          {
            "issue": "базовый интент: '3 варианта для проверки' — полностью провален",
            "count": 1
          },
          {
            "issue": "никакого прогресса за 3 туна",
            "count": 1
          },
          {
            "issue": "интент: подобрать 3 производителей для проверки — не выполнен",
            "count": 1
          },
          {
            "issue": "никаких конкретных данных для работы",
            "count": 1
          },
          {
            "issue": "нет критических проблем",
            "count": 1
          },
          {
            "issue": "не проверял наличие именно 500 кг — но это нормально для первичного отбора",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "UV005",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.1,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Не смог предоставить запрошенный top-5 (только 2 компании вместо 5)",
              "Нет подтвержденных экспортеров молочной/кондитерской продукции"
            ],
            "criticalIssues": [
              "Ключевой интент: найти экспортеров с конкретными характеристиками — не выполнен",
              "Обещал shortlist — дал 2 компании вместо 5"
            ]
          },
          {
            "scenarioId": "UV012",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.05,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "За 3 сообщения не предоставлено ни одной конкретной компании для проверки",
              "Застрял в петле 'карточек не найдено' без альтернатив"
            ],
            "criticalIssues": [
              "Базовый интент: '3 варианта для проверки' — полностью провален",
              "Никакого прогресса за 3 туна"
            ]
          },
          {
            "scenarioId": "UV013",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.05,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Пользователь просил '3 производителей обуви' — не дал ни одного",
              "При просоге deep scan по сайтам — снова 'карточек не найдено'"
            ],
            "criticalIssues": [
              "Интент: подобрать 3 производителей для проверки — не выполнен",
              "Никаких конкретных данных для работы"
            ]
          },
          {
            "scenarioId": "UV017",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.6,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Предоставил 3 релевантных поставщика с контактами",
              "Честно пометил отсутствие 'точных совпадений' по запросу"
            ],
            "criticalIssues": [
              "Не проверял наличие именно 500 кг — но это нормально для первичного отбора"
            ]
          },
          {
            "scenarioId": "UV016",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.9,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Предоставил конкретных производителей муки с direct links",
              "Дал обоснованный рейтинг экспортной готовности"
            ],
            "criticalIssues": [
              "Нет критических проблем"
            ]
          }
        ]
      },
      "diagnostics": {
        "totalBatches": 1,
        "nonJsonRetryBatches": 0,
        "schemaRetryBatches": 0,
        "synthesizedBatches": 0,
        "synthesizedRatingCount": 0,
        "nonJsonRetryRate": 0,
        "schemaRetryRate": 0,
        "synthesizedBatchRate": 0,
        "synthesizedRatingRate": 0
      },
      "ratings": [
        {
          "scenarioId": "UV005",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.95,
          "userSatisfaction": 0.1,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Не смог предоставить запрошенный top-5 (только 2 компании вместо 5)",
            "Нет подтвержденных экспортеров молочной/кондитерской продукции",
            "После конкретных ограничений пользователя ушел в generic fallback с шаблонами"
          ],
          "criticalIssues": [
            "Ключевой интент: найти экспортеров с конкретными характеристиками — не выполнен",
            "Обещал shortlist — дал 2 компании вместо 5"
          ],
          "strengths": [
            "Честно признал отсутствие релевантных кандидатов в каталоге"
          ],
          "nextUserProbe": "Где конкретно искать экспортеров молочной продукции с экспортом в ЕАЭС?",
          "judge": "minimax",
          "synthesized": false
        },
        {
          "scenarioId": "UV012",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.95,
          "userSatisfaction": 0.05,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "За 3 сообщения не предоставлено ни одной конкретной компании для проверки",
            "Застрял в петле 'карточек не найдено' без альтернатив",
            "Пользователь просил проверить сайты — не дал никаких компаний для проверки"
          ],
          "criticalIssues": [
            "Базовый интент: '3 варианта для проверки' — полностью провален",
            "Никакого прогресса за 3 туна"
          ],
          "strengths": [
            "Честно сообщал о невозможности найти карточки"
          ],
          "nextUserProbe": "Дайте хоть какие-то названия компаний-производителей обуви в Минске",
          "judge": "minimax",
          "synthesized": false
        },
        {
          "scenarioId": "UV013",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.95,
          "userSatisfaction": 0.05,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Пользователь просил '3 производителей обуви' — не дал ни одного",
            "При просоге deep scan по сайтам — снова 'карточек не найдено'",
            "Полный отказ от выполнения запроса"
          ],
          "criticalIssues": [
            "Интент: подобрать 3 производителей для проверки — не выполнен",
            "Никаких конкретных данных для работы"
          ],
          "strengths": [
            "Честен о границах данных"
          ],
          "nextUserProbe": "Просто дайте любые названия обувных производителей в Минске",
          "judge": "minimax",
          "synthesized": false
        },
        {
          "scenarioId": "UV016",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.9,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Предоставил конкретных производителей муки с direct links",
            "Дал обоснованный рейтинг экспортной готовности",
            "Перешел к документам и шаблонам по запросу"
          ],
          "criticalIssues": [
            "Нет критических проблем"
          ],
          "strengths": [
            "Отличная сегментация по вероятности экспортной готовности",
            "Конкретные ссылки на карточки компаний",
            "Практичный шаблон с запросом документов"
          ],
          "nextUserProbe": "Уточните по Минскому комбинату: есть ли тестовые партии муки в/с?",
          "judge": "minimax",
          "synthesized": false
        },
        {
          "scenarioId": "UV017",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.6,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Предоставил 3 релевантных поставщика с контактами",
            "Честно пометил отсутствие 'точных совпадений' по запросу",
            "Дал рабочие альтернативы запроса на портале"
          ],
          "criticalIssues": [
            "Не проверял наличие именно 500 кг — но это нормально для первичного отбора"
          ],
          "strengths": [
            "Прозрачность о границах: 'Точных подтвержденных карточек именно по фразе нет'",
            "Практичный shortlist с конкретными действиями для проверки"
          ],
          "nextUserProbe": "У Амифрут: есть ли красный буряк в наличии и какой минимум?",
          "judge": "minimax",
          "synthesized": false
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": null,
    "kimiAvg": 2.4,
    "minimaxAvg": 2.2,
    "geminiUserSatisfaction": null,
    "kimiUserSatisfaction": 0.45,
    "geminiContinueRate": null,
    "kimiContinueRate": 0.4,
    "geminiGenericFallbackRate": null,
    "kimiGenericFallbackRate": 0.6,
    "avgGap": null,
    "usefulRateGap": null,
    "pairwise": [
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": 0.2,
        "usefulRateGap": 0,
        "userSatisfactionGap": 0.11,
        "continueRateGap": 0,
        "genericFallbackRateGap": 0
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "kimi averageUserSatisfaction 0.45 < 0.72",
      "kimi continueRate 0.4 < 0.72",
      "kimi genericFallbackRate 0.6 > 0.35",
      "minimax averageUserSatisfaction 0.34 < 0.72",
      "minimax continueRate 0.4 < 0.72",
      "minimax genericFallbackRate 0.6 > 0.35"
    ],
    "checks": [
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.45,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 0.4,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 0.6,
        "expected": "<= 0.35",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.34,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 0.4,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 0.6,
        "expected": "<= 0.35",
        "pass": false
      }
    ]
  }
}
