{
  "runId": "judge-2026-02-09T19-25-11-221Z",
  "generatedAt": "2026-02-09T19:27:17.190Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-09T19-24-48-228Z-2997260-42f4x",
    "startedAt": "2026-02-09T19:24:48.228Z",
    "endedAt": "2026-02-09T19:25:11.113Z",
    "durationMs": 22885,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.multi-step-journeys.json",
    "totalScenarios": 5,
    "passedScenarios": 1,
    "failedScenarios": 4,
    "passRate": 0.2,
    "totalChecks": 77,
    "passedChecks": 69,
    "failedChecks": 8,
    "checkPassRate": 0.8961,
    "targetPassCount": 4,
    "targetPassRate": 0.8,
    "targetReached": false,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 5,
  "judges": [
    {
      "judge": "kimi",
      "summary": {
        "total": 5,
        "averageUsefulness": 2.4,
        "usefulCount": 2,
        "notUsefulCount": 3,
        "usefulRate": 0.4,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.47,
        "continueCount": 2,
        "continueRate": 0.4,
        "genericFallbackCount": 3,
        "genericFallbackRate": 0.6,
        "averageContinuityScore": 2.2,
        "topIssues": [
          {
            "issue": "generic fallback на turn 3: полная потеря контекста — молоко заменено на 'недвижимость' и 'химия'",
            "count": 1
          },
          {
            "issue": "turn 4: полный отказ от поиска конкретных поставщиков — только методология без компаний",
            "count": 1
          },
          {
            "issue": "нарушение continuity: после уточнения гео ассистент не смог адаптировать поиск и упал в generic шаблон",
            "count": 1
          },
          {
            "issue": "rfq содержит placeholder 'уточняется' вместо реальных данных из диалога",
            "count": 1
          },
          {
            "issue": "turn 3: полный generic fallback — 'недвижимость' и 'химия' вместо поставщиков лука",
            "count": 1
          },
          {
            "issue": "turn 5: ассистент полностью отказался отвечать на запрос чеклиста",
            "count": 1
          },
          {
            "issue": "нарушение continuity: после добавления логистики (доставка в брест) контекст потерян",
            "count": 1
          },
          {
            "issue": "turn 1: нерелевантный первый shortlist (3 из 4 не про лук)",
            "count": 1
          },
          {
            "issue": "turn 2: не выполнен запрос на автозапчасти — только generic шаблон",
            "count": 1
          },
          {
            "issue": "turn 3: возврат к молоку слишком размытый — нет конкретных компаний, только рубрики",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "MX002",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.35,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Turn 1: Слабый старт — из 4 компаний только 1 релевантна (Амифрут), остальные пчеловодство и магазины",
              "Turn 2: Хорошая коррекция — даны 2 фермерских хозяйства в Минской области"
            ],
            "criticalIssues": [
              "Turn 3: Полный generic fallback — 'Недвижимость' и 'Химия' вместо поставщиков лука",
              "Turn 5: Ассистент полностью отказался отвечать на запрос чеклиста"
            ]
          },
          {
            "scenarioId": "MX004",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.45,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Turn 1: Хороший старт — 4 конкретных поставщика электротехники в Гомеле",
              "Turn 2: Проблема — уточнение 'Советский район' проигнорировано, выданы те же компании из Гомеля"
            ],
            "criticalIssues": [
              "Turn 3-4: Generic fallback — нет реального ranking с причинами, просто повтор списка",
              "Turn 5: RFQ с ошибками — 'сформируй rfq' вместо названия товара, placeholder 'уточняется' вместо конкретики"
            ]
          },
          {
            "scenarioId": "MX001",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.4,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Turn 1-2: Хороший старт с конкретными компаниями, контактами и ссылками",
              "Turn 3: КРИТИЧЕСКИЙ ПРОВАЛ — после уточнения 'Минская область, не город Минск' ассистент выдает generic рубрики 'Недвижимость' и 'Химия' вместо молочных поставщиков"
            ],
            "criticalIssues": [
              "Generic fallback на Turn 3: полная потеря контекста — молоко заменено на 'Недвижимость' и 'Химия'",
              "Turn 4: Полный отказ от поиска конкретных поставщиков — только методология без компаний"
            ]
          },
          {
            "scenarioId": "MX003",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.55,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 3,
            "reasons": [
              "Turn 1: Отличный старт — 2 конкретных поставщика молока в Бресте с контактами",
              "Turn 2: Проблема — вместо поиска автозапчастей ассистент выдает generic приоритеты A/B/C"
            ],
            "criticalIssues": [
              "Turn 2: Не выполнен запрос на автозапчасти — только generic шаблон",
              "Turn 3: Возврат к молоку слишком размытый — нет конкретных компаний, только рубрики"
            ]
          },
          {
            "scenarioId": "MX005",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.6,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Turn 1: Слабый старт — только Брест, хотя в запросе 'Брест или Минск'",
              "Turn 2: Отличная реакция на критику — 4 конкретных минских завода с контактами"
            ],
            "criticalIssues": [
              "Turn 1: Проигнорирован Минск в первоначальном запросе",
              "Turn 3: Нет четкого ответа 'кого звонить первым' — просто список всех трех"
            ]
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "MX001",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.85,
          "userSatisfaction": 0.4,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Turn 1-2: Хороший старт с конкретными компаниями, контактами и ссылками",
            "Turn 3: КРИТИЧЕСКИЙ ПРОВАЛ — после уточнения 'Минская область, не город Минск' ассистент выдает generic рубрики 'Недвижимость' и 'Химия' вместо молочных поставщиков",
            "Turn 4: Продолжение провала — вместо топ-3 поставщиков из Минской области выдает generic приоритеты A/B/C без конкретных компаний",
            "Turn 5: RFQ шаблон технически есть, но с ошибками ('уточняется' вместо конкретики, 'Минск' вместо 'Минская область')"
          ],
          "criticalIssues": [
            "Generic fallback на Turn 3: полная потеря контекста — молоко заменено на 'Недвижимость' и 'Химия'",
            "Turn 4: Полный отказ от поиска конкретных поставщиков — только методология без компаний",
            "Нарушение continuity: после уточнения гео ассистент не смог адаптировать поиск и упал в generic шаблон",
            "RFQ содержит placeholder 'уточняется' вместо реальных данных из диалога"
          ],
          "strengths": [
            "Turn 1-2: Корректные конкретные компании с контактами и ссылками",
            "Turn 5: Структура RFQ правильная (Subject/Body/WhatsApp)"
          ],
          "nextUserProbe": "Почему вы перестали искать поставщиков молока и начали предлагать мне рубрики недвижимости?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX002",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.8,
          "userSatisfaction": 0.35,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Turn 1: Слабый старт — из 4 компаний только 1 релевантна (Амифрут), остальные пчеловодство и магазины",
            "Turn 2: Хорошая коррекция — даны 2 фермерских хозяйства в Минской области",
            "Turn 3: КРИТИЧЕСКИЙ ПРОВАЛ — после упоминания доставки в Брест ассистент выдает generic рубрики 'Недвижимость' вместо лука/овощей",
            "Turn 4: Продолжение провала — generic приоритеты A/B/C без конкретных компаний",
            "Turn 5: Пустой ответ — только 'Работаю по данным каталога Biznesinfo'"
          ],
          "criticalIssues": [
            "Turn 3: Полный generic fallback — 'Недвижимость' и 'Химия' вместо поставщиков лука",
            "Turn 5: Ассистент полностью отказался отвечать на запрос чеклиста",
            "Нарушение continuity: после добавления логистики (доставка в Брест) контекст потерян",
            "Turn 1: Нерелевантный первый shortlist (3 из 4 не про лук)"
          ],
          "strengths": [
            "Turn 2: Хорошая адаптация к уточнению географии — конкретные ФХ в Минской области"
          ],
          "nextUserProbe": "Где мой чеклист звонка? И почему вы снова про недвижимость?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX003",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.75,
          "userSatisfaction": 0.55,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 3,
          "reasons": [
            "Turn 1: Отличный старт — 2 конкретных поставщика молока в Бресте с контактами",
            "Turn 2: Проблема — вместо поиска автозапчастей ассистент выдает generic приоритеты A/B/C",
            "Turn 3: Возврат к молоку работает, но ответ слишком generic — рубрики вместо конкретных компаний",
            "Turn 4: Хороший recovery — конкретные компании по молоку, правильный ответ 'кого звонить первым'",
            "Turn 5: Отличный ответ — 2 точных вопроса без воды, по делу"
          ],
          "criticalIssues": [
            "Turn 2: Не выполнен запрос на автозапчасти — только generic шаблон",
            "Turn 3: Возврат к молоку слишком размытый — нет конкретных компаний, только рубрики"
          ],
          "strengths": [
            "Turn 1 и Turn 4: Конкретные компании с контактами и ссылками по молоку",
            "Turn 5: Точные вопросы по объему и приоритетам — именно то что нужно",
            "Switchback тест пройден — вернулся к исходной теме"
          ],
          "nextUserProbe": "А теперь все-таки дай мне поставщиков автозапчастей в Минске",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX004",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.8,
          "userSatisfaction": 0.45,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Turn 1: Хороший старт — 4 конкретных поставщика электротехники в Гомеле",
            "Turn 2: Проблема — уточнение 'Советский район' проигнорировано, выданы те же компании из Гомеля",
            "Turn 3: Generic fallback — вместо топ-3 с причинами выдано простое перечисление без обоснования",
            "Turn 4: Повторение того же списка без фильтрации по 48 часам — никакой новой информации",
            "Turn 5: RFQ содержит placeholder 'уточняется' и бессмысленный текст 'сформируй rfq' вместо 'кабель ВВГнг'"
          ],
          "criticalIssues": [
            "Turn 3-4: Generic fallback — нет реального ranking с причинами, просто повтор списка",
            "Turn 5: RFQ с ошибками — 'сформируй rfq' вместо названия товара, placeholder 'уточняется' вместо конкретики",
            "Уточнение 'Советский район' полностью проигнорировано на протяжении диалога",
            "Ограничение '48 часов' не обработано — нет фильтрации или комментария"
          ],
          "strengths": [
            "Turn 1: Хороший первичный shortlist с конкретными компаниями",
            "Ссылки на карточки компаний валидны"
          ],
          "nextUserProbe": "Почему в RFQ написано 'сформируй rfq' вместо кабеля?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX005",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.78,
          "userSatisfaction": 0.6,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Turn 1: Слабый старт — только Брест, хотя в запросе 'Брест или Минск'",
            "Turn 2: Отличная реакция на критику — 4 конкретных минских завода с контактами",
            "Turn 3: Хороший ответ — конкретные компании для прозвона, 5 вопросов для звонка (хотя просили кого первым)",
            "Turn 4: RFQ структурирован правильно, но содержит placeholder 'уточняется'"
          ],
          "criticalIssues": [
            "Turn 1: Проигнорирован Минск в первоначальном запросе",
            "Turn 3: Нет четкого ответа 'кого звонить первым' — просто список всех трех",
            "Turn 4: RFQ содержит placeholder 'уточняется' вместо реальных данных из диалога"
          ],
          "strengths": [
            "Отличная реакция на критику в Turn 2 — конкретные компании с контактами",
            "Хороший чеклист вопросов для звонка",
            "Сохранение контекста объема (1000 л/нед) и географии"
          ],
          "nextUserProbe": "Можете убрать 'уточняется' из RFQ и вставить реальные данные?",
          "judge": "kimi"
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 5,
        "averageUsefulness": 1.6,
        "usefulCount": 1,
        "notUsefulCount": 4,
        "usefulRate": 0.2,
        "zeroUsefulnessCount": 1,
        "averageUserSatisfaction": 0.25,
        "continueCount": 1,
        "continueRate": 0.2,
        "genericFallbackCount": 3,
        "genericFallbackRate": 0.6,
        "averageContinuityScore": 2.4,
        "topIssues": [
          {
            "issue": "complete failure to find suppliers in minsk region",
            "count": 1
          },
          {
            "issue": "generic rubric fallback after specific user clarification",
            "count": 1
          },
          {
            "issue": "zero actual supplier candidates in 5 turns",
            "count": 1
          },
          {
            "issue": "broken continuity - geo constraints cause complete failure",
            "count": 1
          },
          {
            "issue": "turn 2-3 context confusion - repeated old topic",
            "count": 1
          },
          {
            "issue": "failed to apply 48-hour filter to companies",
            "count": 1
          },
          {
            "issue": "rfq template has placeholder text ('уточняется')",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "MX002",
            "usefulness": 0,
            "verdict": "not_useful",
            "userSatisfaction": 0.05,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 0,
            "reasons": [
              "Never provided actual onion suppliers for Minsk region",
              "Turn 3: Brest delivery requirement triggered real estate fallback again"
            ],
            "criticalIssues": [
              "Zero actual supplier candidates in 5 turns",
              "Broken continuity - geo constraints cause complete failure"
            ]
          },
          {
            "scenarioId": "MX001",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.1,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Geo-failure: after Minsk REGION clarification, assistant gave real estate categories instead of suppliers",
              "No actual companies provided from turn 3 onward"
            ],
            "criticalIssues": [
              "Complete failure to find suppliers in Minsk region",
              "Generic rubric fallback after specific user clarification"
            ]
          },
          {
            "scenarioId": "MX003",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.25,
            "wouldContinue": false,
            "feltGenericFallback": false,
            "continuityScore": 3,
            "reasons": [
              "Turn 2 confused topic switch, repeated irrelevant context",
              "Turn 4: Proper shortlist with companies when returning to milk"
            ],
            "criticalIssues": [
              "Turn 2-3 context confusion - repeated old topic"
            ]
          },
          {
            "scenarioId": "MX004",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.25,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 3,
            "reasons": [
              "Good companies in turns 1-3 with links",
              "Turn 4: 48-hour requirement caused generic fallback - no filtering"
            ],
            "criticalIssues": [
              "Failed to apply 48-hour filter to companies"
            ]
          },
          {
            "scenarioId": "MX005",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.6,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Turn 2: After user complaint, gave actual Minsk dairy companies",
              "Turn 3: Good priority ranking + specific call questions"
            ],
            "criticalIssues": [
              "RFQ template has placeholder text ('уточняется')"
            ]
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "MX001",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.95,
          "userSatisfaction": 0.1,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Geo-failure: after Minsk REGION clarification, assistant gave real estate categories instead of suppliers",
            "No actual companies provided from turn 3 onward",
            "RFQ template has repetitive placeholder text ('уточняется', 'срок срок')"
          ],
          "criticalIssues": [
            "Complete failure to find suppliers in Minsk region",
            "Generic rubric fallback after specific user clarification"
          ],
          "strengths": [],
          "nextUserProbe": "Минская область: молоко, 1000 л/неделю. Кто конкретно может поставить?",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX002",
          "usefulness": 0,
          "verdict": "not_useful",
          "confidence": 0.95,
          "userSatisfaction": 0.05,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 0,
          "reasons": [
            "Never provided actual onion suppliers for Minsk region",
            "Turn 3: Brest delivery requirement triggered real estate fallback again",
            "Turn 5: Empty response to checklist request"
          ],
          "criticalIssues": [
            "Zero actual supplier candidates in 5 turns",
            "Broken continuity - geo constraints cause complete failure"
          ],
          "strengths": [],
          "nextUserProbe": "Лук репчатый 2 тонны в неделю, Минская область. Дайте конкретные 3 компании с телефонами.",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX003",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.85,
          "userSatisfaction": 0.25,
          "wouldContinue": false,
          "feltGenericFallback": false,
          "continuityScore": 3,
          "reasons": [
            "Turn 2 confused topic switch, repeated irrelevant context",
            "Turn 4: Proper shortlist with companies when returning to milk",
            "Turn 5: Good clarifying questions"
          ],
          "criticalIssues": [
            "Turn 2-3 context confusion - repeated old topic"
          ],
          "strengths": [
            "Final two turns showed good recovery with actual companies"
          ],
          "nextUserProbe": "Брестское мороженое уже позвонили, какие следующие шаги?",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX004",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.9,
          "userSatisfaction": 0.25,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 3,
          "reasons": [
            "Good companies in turns 1-3 with links",
            "Turn 4: 48-hour requirement caused generic fallback - no filtering",
            "Turn 5: RFQ template has placeholder issues"
          ],
          "criticalIssues": [
            "Failed to apply 48-hour filter to companies"
          ],
          "strengths": [
            "Links to company cards provided correctly"
          ],
          "nextUserProbe": "Кто из твоих 4 компаний точно отгрузит кабель за 48 часов?",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX005",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.9,
          "userSatisfaction": 0.6,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Turn 2: After user complaint, gave actual Minsk dairy companies",
            "Turn 3: Good priority ranking + specific call questions",
            "Turn 4: RFQ template (same placeholder issues but structured)"
          ],
          "criticalIssues": [
            "RFQ template has placeholder text ('уточняется')"
          ],
          "strengths": [
            "Best continuity - addressed user frustration with concrete action",
            "Clear call priority and questions"
          ],
          "nextUserProbe": "Первый завод не отвечает, какие условия второго и третьего?",
          "judge": "minimax"
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": null,
    "kimiAvg": 2.4,
    "minimaxAvg": 1.6,
    "geminiUserSatisfaction": null,
    "kimiUserSatisfaction": 0.47,
    "geminiContinueRate": null,
    "kimiContinueRate": 0.4,
    "geminiGenericFallbackRate": null,
    "kimiGenericFallbackRate": 0.6,
    "avgGap": null,
    "usefulRateGap": null,
    "pairwise": [
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": 0.8,
        "usefulRateGap": 0.2,
        "userSatisfactionGap": 0.22,
        "continueRateGap": 0.2,
        "genericFallbackRateGap": 0
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "kimi averageUserSatisfaction 0.47 < 0.72",
      "kimi continueRate 0.4 < 0.72",
      "kimi genericFallbackRate 0.6 > 0.35",
      "minimax averageUserSatisfaction 0.25 < 0.72",
      "minimax continueRate 0.2 < 0.72",
      "minimax genericFallbackRate 0.6 > 0.35"
    ],
    "checks": [
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.47,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 0.4,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 0.6,
        "expected": "<= 0.35",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.25,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 0.2,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 0.6,
        "expected": "<= 0.35",
        "pass": false
      }
    ]
  }
}
