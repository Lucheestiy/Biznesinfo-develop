{
  "runId": "judge-2026-02-09T03-29-05-255Z",
  "generatedAt": "2026-02-09T03:30:54.156Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-09T03-28-08-464Z-759285-6b0nm",
    "startedAt": "2026-02-09T03:28:08.464Z",
    "endedAt": "2026-02-09T03:28:49.648Z",
    "durationMs": 41184,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.geo-ambiguity.json",
    "totalScenarios": 2,
    "passedScenarios": 2,
    "failedScenarios": 0,
    "passRate": 1,
    "totalChecks": 17,
    "passedChecks": 17,
    "failedChecks": 0,
    "checkPassRate": 1,
    "targetPassCount": 2,
    "targetPassRate": 0.8,
    "targetReached": true,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 2,
  "judges": [
    {
      "judge": "gemini",
      "summary": {
        "total": 2,
        "averageUsefulness": 3,
        "usefulCount": 1,
        "notUsefulCount": 1,
        "usefulRate": 0.5,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.6,
        "continueCount": 1,
        "continueRate": 0.5,
        "genericFallbackCount": 1,
        "genericFallbackRate": 0.5,
        "averageContinuityScore": 3.5,
        "topIssues": [
          {
            "issue": "предложены абсолютно нерелевантные компании для запроса пользователя.",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "GA001",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.2,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Ассистент предложил абсолютно нерелевантные компании ('Школы красоты', 'Белгип') для запроса 'молоко оптом Минск'.",
              "Противоречие: после заявления об отсутствии релевантных компаний для Минска в первом ходу, во втором ходу были предложены нерелевантные вместо их отсутствия."
            ],
            "criticalIssues": [
              "Предложены абсолютно нерелевантные компании для запроса пользователя."
            ]
          },
          {
            "scenarioId": "GA002",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 1,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Ассистент точно и полностью адаптировался под уточнение региона с города на область.",
              "Даны конкретные и actionable шаги для поиска в новом регионе, включая рубрики, поисковые запросы и критерии отбора."
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.9,
          "userSatisfaction": 0.2,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Ассистент предложил абсолютно нерелевантные компании ('Школы красоты', 'Белгип') для запроса 'молоко оптом Минск'.",
            "Противоречие: после заявления об отсутствии релевантных компаний для Минска в первом ходу, во втором ходу были предложены нерелевантные вместо их отсутствия.",
            "Подрывает доверие пользователя и практическую ценность диалога."
          ],
          "criticalIssues": [
            "Предложены абсолютно нерелевантные компании для запроса пользователя."
          ],
          "strengths": [
            "Хорошо обработан первый запрос с двумя городами, включая конкретные рекомендации по рубрикам и фильтрам."
          ],
          "nextUserProbe": "Почему вы предлагаете школы красоты для закупки молока?",
          "judge": "gemini"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 1,
          "userSatisfaction": 1,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Ассистент точно и полностью адаптировался под уточнение региона с города на область.",
            "Даны конкретные и actionable шаги для поиска в новом регионе, включая рубрики, поисковые запросы и критерии отбора.",
            "Прозрачно объяснены текущие ограничения (отсутствие готовых кандидатов для новой гео) и предложены эффективные пути решения."
          ],
          "criticalIssues": [],
          "strengths": [
            "Четко сохраняет контекст продукта ('лук репчатый') при изменении гео.",
            "Предлагает дальнейшую помощь (чек-лист, шаблон запроса), что повышает практическую ценность."
          ],
          "nextUserProbe": "Подготовьте, пожалуйста, чек-лист отбора и шаблон запроса.",
          "judge": "gemini"
        }
      ]
    },
    {
      "judge": "kimi",
      "summary": {
        "total": 2,
        "averageUsefulness": 2.5,
        "usefulCount": 1,
        "notUsefulCount": 1,
        "usefulRate": 0.5,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.55,
        "continueCount": 1,
        "continueRate": 0.5,
        "genericFallbackCount": 2,
        "genericFallbackRate": 1,
        "averageContinuityScore": 1.5,
        "topIssues": [
          {
            "issue": "после уточнения 'минск как базовый' ассистент не предоставил конкретных минских поставщиков, хотя в turn 1 показал способность находить конкретные компании",
            "count": 1
          },
          {
            "issue": "в конце turn 2 внезапно появляются нерелевантные компании (арт-образ чп — школа красоты!) — явный баг поиска",
            "count": 1
          },
          {
            "issue": "пользователь дал конкретные ограничения (объем, города), но ассистент ответил шаблонными инструкциями вместо конкретных кандидатов",
            "count": 1
          },
          {
            "issue": "критический regression: после уточнения региона (минская область вместо минска) ассистент полностью отказался от конкретных рекомендаций и перешел к общим инструкциям",
            "count": 1
          },
          {
            "issue": "не использована возможность предложить близких кандидатов — агрокомбинат ждановичи явно в минской области, можно было уточнить зону доставки",
            "count": 1
          },
          {
            "issue": "пользователь уже получил конкретные имена в turn 1, а в turn 2 получил 'поищите в рубрике' — это разочаровывающий опыт",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "GA002",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.45,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Turn 1: Отлично — даны 2 релевантных оптовых поставщика овощей в Минске с конкретными ссылками",
              "Turn 2: Полный fallback в generic-рубрику — вместо поиска поставщиков в Минской области ассистент просто объясняет КАК искать"
            ],
            "criticalIssues": [
              "Критический regression: после уточнения региона (Минская область вместо Минска) ассистент полностью отказался от конкретных рекомендаций и перешел к общим инструкциям",
              "Не использована возможность предложить близких кандидатов — Агрокомбинат Ждановичи явно в Минской области, можно было уточнить зону доставки"
            ]
          },
          {
            "scenarioId": "GA001",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.65,
            "wouldContinue": true,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Turn 1: Хороший старт — даны конкретные поставщики из Бреста с объяснениями почему подходят",
              "Turn 2: Падение в generic-советы — вместо поиска минских поставщиков ассистент дает только общие инструкции по поиску"
            ],
            "criticalIssues": [
              "После уточнения 'Минск как базовый' ассистент не предоставил конкретных минских поставщиков, хотя в Turn 1 показал способность находить конкретные компании",
              "В конце Turn 2 внезапно появляются нерелевантные компании (Арт-Образ ЧП — школа красоты!) — явный баг поиска"
            ]
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.75,
          "userSatisfaction": 0.65,
          "wouldContinue": true,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Turn 1: Хороший старт — даны конкретные поставщики из Бреста с объяснениями почему подходят",
            "Turn 2: Падение в generic-советы — вместо поиска минских поставщиков ассистент дает только общие инструкции по поиску"
          ],
          "criticalIssues": [
            "После уточнения 'Минск как базовый' ассистент не предоставил конкретных минских поставщиков, хотя в Turn 1 показал способность находить конкретные компании",
            "В конце Turn 2 внезапно появляются нерелевантные компании (Арт-Образ ЧП — школа красоты!) — явный баг поиска",
            "Пользователь дал конкретные ограничения (объем, города), но ассистент ответил шаблонными инструкциями вместо конкретных кандидатов"
          ],
          "strengths": [
            "Turn 1: Правильно определил конкретных производителей молока в Бресте",
            "Предложил практичный чек-лист для первого контакта с поставщиками",
            "Честно указал на отсутствие данных по Минску в текущем списке"
          ],
          "nextUserProbe": "А конкретно по Минску кто есть? Вы же нашли Савушкина в Бресте, почему не можете найти минских?",
          "judge": "kimi"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.8,
          "userSatisfaction": 0.45,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Turn 1: Отлично — даны 2 релевантных оптовых поставщика овощей в Минске с конкретными ссылками",
            "Turn 2: Полный fallback в generic-рубрику — вместо поиска поставщиков в Минской области ассистент просто объясняет КАК искать"
          ],
          "criticalIssues": [
            "Критический regression: после уточнения региона (Минская область вместо Минска) ассистент полностью отказался от конкретных рекомендаций и перешел к общим инструкциям",
            "Не использована возможность предложить близких кандидатов — Агрокомбинат Ждановичи явно в Минской области, можно было уточнить зону доставки",
            "Пользователь уже получил конкретные имена в Turn 1, а в Turn 2 получил 'поищите в рубрике' — это разочаровывающий опыт"
          ],
          "strengths": [
            "Turn 1: Точные рекомендации с причинами выбора каждого поставщика",
            "Правильно отфильтровал ритейл (магазины ПОСТТОРГ) с оговоркой",
            "Предложил чек-лист проверки перед заказом"
          ],
          "nextUserProbe": "Но Ждановичи же в области? Они могут доставлять? Или дайте хотя бы 2-3 конкретных сельхоза из области, а не общие советы.",
          "judge": "kimi"
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 2,
        "averageUsefulness": 2,
        "usefulCount": 0,
        "notUsefulCount": 2,
        "usefulRate": 0,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.175,
        "continueCount": 0,
        "continueRate": 0,
        "genericFallbackCount": 2,
        "genericFallbackRate": 1,
        "averageContinuityScore": 1.5,
        "topIssues": [
          {
            "issue": "irrelevant supplier (beauty school) shown for milk sourcing request",
            "count": 1
          },
          {
            "issue": "fell back to generic search advice after concrete user constraints",
            "count": 1
          },
          {
            "issue": "list appears cut off mid-sentence with 'белгип…' suggesting more irrelevant entries",
            "count": 1
          },
          {
            "issue": "no actual suppliers for minsk oblast despite claiming to help",
            "count": 1
          },
          {
            "issue": "generic fallback after geographic clarification - no real progress",
            "count": 1
          },
          {
            "issue": "user must do all research themselves despite assistant claiming to help",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "GA001",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.2,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Turn 2 provides irrelevant beauty school (Арт-Образ ЧП) instead of Minsk milk suppliers after user's clarification",
              "Major continuity failure: user clarified Minsk base with Brest delivery option, received completely wrong company category"
            ],
            "criticalIssues": [
              "Irrelevant supplier (beauty school) shown for milk sourcing request",
              "Fell back to generic search advice after concrete user constraints"
            ]
          },
          {
            "scenarioId": "GA002",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.15,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "After user clarified Minsk Oblast requirement, assistant provided only generic search instructions",
              "Zero concrete suppliers found for the actual request (Onion wholesale in Minsk Oblast)"
            ],
            "criticalIssues": [
              "No actual suppliers for Minsk Oblast despite claiming to help",
              "Generic fallback after geographic clarification - no real progress"
            ]
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.95,
          "userSatisfaction": 0.2,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Turn 2 provides irrelevant beauty school (Арт-Образ ЧП) instead of Minsk milk suppliers after user's clarification",
            "Major continuity failure: user clarified Minsk base with Brest delivery option, received completely wrong company category",
            "Broken trust: promised first-pass candidates but delivered non-functional list"
          ],
          "criticalIssues": [
            "Irrelevant supplier (beauty school) shown for milk sourcing request",
            "Fell back to generic search advice after concrete user constraints",
            "List appears cut off mid-sentence with 'Белгип…' suggesting more irrelevant entries"
          ],
          "strengths": [
            "Turn 1 gave 2 relevant Brest suppliers with explanations"
          ],
          "nextUserProbe": "Почему вы предложили школу красоты для поставок молока? Это ошибка?",
          "judge": "minimax"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.95,
          "userSatisfaction": 0.15,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "After user clarified Minsk Oblast requirement, assistant provided only generic search instructions",
            "Zero concrete suppliers found for the actual request (Onion wholesale in Minsk Oblast)",
            "User expected actionable candidates, got repeated rubric advice"
          ],
          "criticalIssues": [
            "No actual suppliers for Minsk Oblast despite claiming to help",
            "Generic fallback after geographic clarification - no real progress",
            "User must do all research themselves despite assistant claiming to help"
          ],
          "strengths": [
            "Turn 1 provided Amifrut as genuinely relevant wholesale option"
          ],
          "nextUserProbe": "Можете назвать хотя бы 2-3 конкретных поставщика лука в Минской области с телефонами?",
          "judge": "minimax"
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": 3,
    "kimiAvg": 2.5,
    "minimaxAvg": 2,
    "geminiUserSatisfaction": 0.6,
    "kimiUserSatisfaction": 0.55,
    "geminiContinueRate": 0.5,
    "kimiContinueRate": 0.5,
    "geminiGenericFallbackRate": 0.5,
    "kimiGenericFallbackRate": 1,
    "avgGap": 0.5,
    "usefulRateGap": 0,
    "pairwise": [
      {
        "left": "gemini",
        "right": "kimi",
        "avgGap": 0.5,
        "usefulRateGap": 0,
        "userSatisfactionGap": 0.05,
        "continueRateGap": 0,
        "genericFallbackRateGap": -0.5
      },
      {
        "left": "gemini",
        "right": "minimax",
        "avgGap": 1,
        "usefulRateGap": 0.5,
        "userSatisfactionGap": 0.425,
        "continueRateGap": 0.5,
        "genericFallbackRateGap": -0.5
      },
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": 0.5,
        "usefulRateGap": 0.5,
        "userSatisfactionGap": 0.375,
        "continueRateGap": 0.5,
        "genericFallbackRateGap": 0
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "gemini averageUserSatisfaction 0.6 < 0.72",
      "gemini continueRate 0.5 < 0.72",
      "gemini genericFallbackRate 0.5 > 0.35",
      "kimi averageUserSatisfaction 0.55 < 0.72",
      "kimi continueRate 0.5 < 0.72",
      "kimi genericFallbackRate 1 > 0.35",
      "minimax averageUserSatisfaction 0.175 < 0.72",
      "minimax continueRate 0 < 0.72",
      "minimax genericFallbackRate 1 > 0.35"
    ],
    "checks": [
      {
        "judge": "gemini",
        "metric": "averageUserSatisfaction",
        "actual": 0.6,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "gemini",
        "metric": "continueRate",
        "actual": 0.5,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "gemini",
        "metric": "genericFallbackRate",
        "actual": 0.5,
        "expected": "<= 0.35",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.55,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 0.5,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 1,
        "expected": "<= 0.35",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.175,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 0,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 1,
        "expected": "<= 0.35",
        "pass": false
      }
    ]
  }
}
