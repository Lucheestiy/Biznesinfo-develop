{
  "runId": "judge-2026-02-09T18-15-23-898Z",
  "generatedAt": "2026-02-09T18:16:52.593Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-09T18-12-04-894Z-2818579-bdcjw",
    "startedAt": "2026-02-09T18:12:04.894Z",
    "endedAt": "2026-02-09T18:15:18.184Z",
    "durationMs": 193290,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.multi-step-journeys.json",
    "totalScenarios": 5,
    "passedScenarios": 5,
    "failedScenarios": 0,
    "passRate": 1,
    "totalChecks": 77,
    "passedChecks": 77,
    "failedChecks": 0,
    "checkPassRate": 1,
    "targetPassCount": 4,
    "targetPassRate": 0.8,
    "targetReached": true,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 5,
  "judges": [
    {
      "judge": "kimi",
      "summary": {
        "total": 5,
        "averageUsefulness": 3,
        "usefulCount": 3,
        "notUsefulCount": 2,
        "usefulRate": 0.6,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.58,
        "continueCount": 3,
        "continueRate": 0.6,
        "genericFallbackCount": 2,
        "genericFallbackRate": 0.4,
        "averageContinuityScore": 2.6,
        "topIssues": [
          {
            "issue": "ассистент не смог адаптировать shortlist после уточнения гео — выдал компании из бреста вместо минской области",
            "count": 1
          },
          {
            "issue": "generic fallback на turn 3: вместо конкретных поставщиков — инструкции 'как искать'",
            "count": 1
          },
          {
            "issue": "нарушение континuity: после уточнения гео ассистент возвращается к старым кандидатам из бреста",
            "count": 1
          },
          {
            "issue": "penalty: после конкретных ограничений от пользователя ассистент откатился к generic советам",
            "count": 1
          },
          {
            "issue": "turn 1: первый shortlist содержит нерелевантные компании",
            "count": 1
          },
          {
            "issue": "turn 3: ответ слишком краткий, можно было дать больше конкретики по логистике",
            "count": 1
          },
          {
            "issue": "turn 4: смешение контекста молока и автозапчастей, неверная локация (минск вместо бреста)",
            "count": 1
          },
          {
            "issue": "turn 5: generic fallback — вместо конкретного top-3 ассистент задает вопросы, хотя данные уже были в turn 1",
            "count": 1
          },
          {
            "issue": "ассистент не справился с switchback тестом — после возврата к теме молока качество резко упало",
            "count": 1
          },
          {
            "issue": "critical failure: на финальном turn ассистент полностью забыл о чем диалог",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "MX003",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.2,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 0,
            "reasons": [
              "Turn 1: Хороший старт с конкретными компаниями по молоку в Бресте",
              "Turn 2: Корректное переключение на автозапчасти"
            ],
            "criticalIssues": [
              "Turn 4: Смешение контекста молока и автозапчастей, неверная локация (Минск вместо Бреста)",
              "Turn 5: Generic fallback — вместо конкретного top-3 ассистент задает вопросы, хотя данные уже были в Turn 1"
            ]
          },
          {
            "scenarioId": "MX001",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.4,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Turn 1-2: Хороший старт с конкретными компаниями и контактами",
              "Turn 3: Критический провал — после уточнения 'Минская область, не город Минск' ассистент дает generic инструкции 'как искать' вместо конкретных поставщиков"
            ],
            "criticalIssues": [
              "Ассистент не смог адаптировать shortlist после уточнения гео — выдал компании из Бреста вместо Минской области",
              "Generic fallback на Turn 3: вместо конкретных поставщиков — инструкции 'как искать'"
            ]
          },
          {
            "scenarioId": "MX005",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.75,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Turn 1: Слабый старт — shortlist дает только 2 компании из Бреста, игнорируя Минск в запросе",
              "Turn 2: Отличная реакция на критику — ассистент дает 3 конкретных минских завода с контактами и обоснованием"
            ],
            "criticalIssues": [
              "Turn 1: Первый ответ неполный — пропущен Минск из запроса 'Брест или Минск'",
              "Turn 3: Нет конкретного ответа 'кого звонить первым'"
            ]
          },
          {
            "scenarioId": "MX002",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.75,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Turn 1: Начало слабое — 2 из 3 компаний нерелевантны, но есть конкретные ссылки",
              "Turn 2: Отличная коррекция после уточнения — даны 2 релевантных фермерских хозяйства с обоснованием"
            ],
            "criticalIssues": [
              "Turn 1: Первый shortlist содержит нерелевантные компании",
              "Turn 3: Ответ слишком краткий, можно было дать больше конкретики по логистике"
            ]
          },
          {
            "scenarioId": "MX004",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.8,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Turn 1: Отличный старт — 3 конкретных поставщика с обоснованием, контактами и ссылками",
              "Turn 2: Хорошая адаптация к уточнению района — сохранены релевантные компании"
            ],
            "criticalIssues": [
              "Turn 4: Можно было дать более агрессивный план проверки SLA"
            ]
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "MX001",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.85,
          "userSatisfaction": 0.4,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Turn 1-2: Хороший старт с конкретными компаниями и контактами",
            "Turn 3: Критический провал — после уточнения 'Минская область, не город Минск' ассистент дает generic инструкции 'как искать' вместо конкретных поставщиков",
            "Turn 4: Полный провал континuity — вместо топ-3 из Минской области выдает компании из Бреста (Савушкин, Брестское мороженое), полностью игнорируя уточнение пользователя",
            "Turn 5: RFQ текст хороший, но контекст уже полностью потерян"
          ],
          "criticalIssues": [
            "Ассистент не смог адаптировать shortlist после уточнения гео — выдал компании из Бреста вместо Минской области",
            "Generic fallback на Turn 3: вместо конкретных поставщиков — инструкции 'как искать'",
            "Нарушение континuity: после уточнения гео ассистент возвращается к старым кандидатам из Бреста",
            "Penalty: после конкретных ограничений от пользователя ассистент откатился к generic советам"
          ],
          "strengths": [
            "Хороший RFQ шаблон в Turn 5",
            "Начало диалога было с конкретными компаниями и контактами"
          ],
          "nextUserProbe": "Почему вы дали мне компании из Бреста, когда я просил Минскую область?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX002",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.8,
          "userSatisfaction": 0.75,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Turn 1: Начало слабое — 2 из 3 компаний нерелевантны, но есть конкретные ссылки",
            "Turn 2: Отличная коррекция после уточнения — даны 2 релевантных фермерских хозяйства с обоснованием",
            "Turn 3: Небольшой regression — слишком короткий ответ, но контекст сохранен",
            "Turn 4: Хороший shortlist с приоритизацией и чеклистом документов",
            "Turn 5: Отличный чеклист звонка на 6 пунктов — конкретный, actionable"
          ],
          "criticalIssues": [
            "Turn 1: Первый shortlist содержит нерелевантные компании",
            "Turn 3: Ответ слишком краткий, можно было дать больше конкретики по логистике"
          ],
          "strengths": [
            "Отличная адаптация к уточнению географии в Turn 2",
            "Хороший чеклист документов в Turn 4",
            "Практичный чеклист звонка в Turn 5 с конкретными вопросами",
            "Сохранение контекста (лук, 2т/нед, Минская область, доставка в Брест)"
          ],
          "nextUserProbe": "Какие у ТИТУЛ ФХ реальные отзывы или репутация на рынке?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX003",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.9,
          "userSatisfaction": 0.2,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 0,
          "reasons": [
            "Turn 1: Хороший старт с конкретными компаниями по молоку в Бресте",
            "Turn 2: Корректное переключение на автозапчасти",
            "Turn 3: Возврат к молоку работает, но ассистент теряет структуру",
            "Turn 4: Катастрофа — ответ содержит битые ссылки, смешение контекста молока и автозапчастей ('локация: Минск', 'фокус: автозапчасти')",
            "Turn 5: Полный крах — ассистент не дает top-3, а задает уточняющие вопросы, хотя в Turn 4 уже был shortlist"
          ],
          "criticalIssues": [
            "Turn 4: Смешение контекста молока и автозапчастей, неверная локация (Минск вместо Бреста)",
            "Turn 5: Generic fallback — вместо конкретного top-3 ассистент задает вопросы, хотя данные уже были в Turn 1",
            "Ассистент не справился с switchback тестом — после возврата к теме молока качество резко упало",
            "Critical failure: на финальном turn ассистент полностью забыл о чем диалог"
          ],
          "strengths": [
            "Turn 1-3: Начало и переключение темы работали корректно"
          ],
          "nextUserProbe": "Вы вообще понимаете о чем мы говорим?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX004",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.82,
          "userSatisfaction": 0.8,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Turn 1: Отличный старт — 3 конкретных поставщика с обоснованием, контактами и ссылками",
            "Turn 2: Хорошая адаптация к уточнению района — сохранены релевантные компании",
            "Turn 3: Отличный топ-3 с четкими причинами и валидными ссылками на карточки",
            "Turn 4: Правильный подход к SLA 48 часов — честно указано что нельзя подтвердить заранее",
            "Turn 5: Отличный RFQ — структурированный, с нужными блоками Subject/Body/WhatsApp"
          ],
          "criticalIssues": [
            "Turn 4: Можно было дать более агрессивный план проверки SLA"
          ],
          "strengths": [
            "Отличная структура ответов на протяжении всего диалога",
            "Все ссылки валидны и соответствуют запросу",
            "Правильная работа с ограничением по времени — честность + практичность",
            "Отличный RFQ шаблон с конкретными вопросами про 48 часов",
            "Сохранение контекста: ВВГнг 3х2.5, Гомель, Советский район"
          ],
          "nextUserProbe": "У кого из этих троих реально есть ВВГнг 3х2.5 на складе прямо сейчас?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX005",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.78,
          "userSatisfaction": 0.75,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Turn 1: Слабый старт — shortlist дает только 2 компании из Бреста, игнорируя Минск в запросе",
            "Turn 2: Отличная реакция на критику — ассистент дает 3 конкретных минских завода с контактами и обоснованием",
            "Turn 3: Небольшой regression — ответ слишком generic, нет конкретики 'кого первым'",
            "Turn 4: Отличный RFQ — полный, структурированный, с нужными блоками Subject/Body/WhatsApp"
          ],
          "criticalIssues": [
            "Turn 1: Первый ответ неполный — пропущен Минск из запроса 'Брест или Минск'",
            "Turn 3: Нет конкретного ответа 'кого звонить первым'"
          ],
          "strengths": [
            "Отличная реакция на критику в Turn 2 — конкретные компании, контакты, обоснование",
            "Хороший чеклист вопросов для звонка в Turn 3",
            "Отличный RFQ шаблон в Turn 4 — полный и практичный",
            "Сохранение контекста объема (1000 л/нед) и географии"
          ],
          "nextUserProbe": "Какой из этих трех заводов обычно дает лучшие цены на опт?",
          "judge": "kimi"
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 5,
        "averageUsefulness": 4.4,
        "usefulCount": 5,
        "notUsefulCount": 0,
        "usefulRate": 1,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.82,
        "continueCount": 5,
        "continueRate": 1,
        "genericFallbackCount": 0,
        "genericFallbackRate": 0,
        "averageContinuityScore": 4.6,
        "topIssues": [
          {
            "issue": "не хватило 3-го кандидата в shortlist (честно указала, что данных меньше)",
            "count": 1
          },
          {
            "issue": "в turn 4 ошибочно применила фильтр 'минск' вместо 'брест'",
            "count": 1
          },
          {
            "issue": "вопросы для звонка слишком общие (sla, штрафы)",
            "count": 1
          },
          {
            "issue": "не адаптировала вопросы под молоко",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "MX003",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.75,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Корректно обработала переключение темы и возврат",
              "Честно указала, что только 2 подтвержденных компании"
            ],
            "criticalIssues": [
              "В turn 4 ошибочно применила фильтр 'Минск' вместо 'Брест'"
            ]
          },
          {
            "scenarioId": "MX001",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.85,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Правильно уточнила географию (Минская область vs город Минск)",
              "Четкий shortlist с реальными компаниями из каталога"
            ],
            "criticalIssues": [
              "Не хватило 3-го кандидата в shortlist (честно указала, что данных меньше)"
            ]
          },
          {
            "scenarioId": "MX005",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.7,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "После критики дала конкретных кандидатов по Минску",
              "5 конкретных вопросов для звонка"
            ],
            "criticalIssues": [
              "Вопросы для звонка слишком общие (SLA, штрафы)",
              "Не адаптировала вопросы под молоко"
            ]
          },
          {
            "scenarioId": "MX002",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.9,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Отлично уточняла географию на каждом шаге",
              "Чек-лист звонка на 6 пунктов — готов к использованию"
            ],
            "criticalIssues": []
          },
          {
            "scenarioId": "MX004",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.9,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Все 3 компании с валидными ссылками на карточки",
              "Правильно обработала уточнение '48 часов' с честной оговоркой"
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "MX001",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.85,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Правильно уточнила географию (Минская область vs город Минск)",
            "Четкий shortlist с реальными компаниями из каталога",
            "Готовый RFQ-шаблон для email + WhatsApp"
          ],
          "criticalIssues": [
            "Не хватило 3-го кандидата в shortlist (честно указала, что данных меньше)"
          ],
          "strengths": [
            "Контекст сохранен полностью",
            "Практичные критерии отбора",
            "Прозрачность про ограничения данных"
          ],
          "nextUserProbe": "Скинь контакты Савушкин прямо в WhatsApp",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX002",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.9,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Отлично уточняла географию на каждом шаге",
            "Чек-лист звонка на 6 пунктов — готов к использованию",
            "Конкретные поставщики с Минской области"
          ],
          "criticalIssues": [],
          "strengths": [
            "Плавное наращивание требований (Минск → область → Брест доставка)",
            "Практичный чек-лист для первого звонка"
          ],
          "nextUserProbe": "Сколько стоит тонна лука у ТИТУЛ ФХ?",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX003",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.9,
          "userSatisfaction": 0.75,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Корректно обработала переключение темы и возврат",
            "Честно указала, что только 2 подтвержденных компании",
            "Задала 2 точных уточняющих вопроса"
          ],
          "criticalIssues": [
            "В turn 4 ошибочно применила фильтр 'Минск' вместо 'Брест'"
          ],
          "strengths": [
            "Не выдумывала компании при нехватке данных",
            "Уместная прозрачность про ограничения"
          ],
          "nextUserProbe": "Какой объем молока нужен для первого заказа?",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX004",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.9,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Все 3 компании с валидными ссылками на карточки",
            "Правильно обработала уточнение '48 часов' с честной оговоркой",
            "Готовый RFQ в трех форматах"
          ],
          "criticalIssues": [],
          "strengths": [
            "Идеальная ссылочная целостность",
            "Практичные критерии сравнения поставщиков",
            "Профессиональный RFQ-шаблон"
          ],
          "nextUserProbe": "БелСтройКомплект — есть ВВГнг 3х2.5 на складе?",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX005",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.7,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "После критики дала конкретных кандидатов по Минску",
            "5 конкретных вопросов для звонка",
            "Готовый RFQ-шаблон"
          ],
          "criticalIssues": [
            "Вопросы для звонка слишком общие (SLA, штрафы)",
            "Не адаптировала вопросы под молоко"
          ],
          "strengths": [
            "Быстрая реакция на критику",
            "Конкретные контакты минских заводов"
          ],
          "nextUserProbe": "Минский молочный №1 — минимальная партия для 1000 л/нед?",
          "judge": "minimax"
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": null,
    "kimiAvg": 3,
    "minimaxAvg": 4.4,
    "geminiUserSatisfaction": null,
    "kimiUserSatisfaction": 0.58,
    "geminiContinueRate": null,
    "kimiContinueRate": 0.6,
    "geminiGenericFallbackRate": null,
    "kimiGenericFallbackRate": 0.4,
    "avgGap": null,
    "usefulRateGap": null,
    "pairwise": [
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": -1.4,
        "usefulRateGap": -0.4,
        "userSatisfactionGap": -0.24,
        "continueRateGap": -0.4,
        "genericFallbackRateGap": 0.4
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "kimi averageUserSatisfaction 0.58 < 0.72",
      "kimi continueRate 0.6 < 0.72",
      "kimi genericFallbackRate 0.4 > 0.35"
    ],
    "checks": [
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.58,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 0.6,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 0.4,
        "expected": "<= 0.35",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.82,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 1,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 0,
        "expected": "<= 0.35",
        "pass": true
      }
    ]
  }
}
