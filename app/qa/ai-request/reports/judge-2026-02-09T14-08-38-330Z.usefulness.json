{
  "runId": "judge-2026-02-09T14-08-38-330Z",
  "generatedAt": "2026-02-09T14:10:47.329Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-09T14-05-03-371Z-2204369-9gv24",
    "startedAt": "2026-02-09T14:05:03.371Z",
    "endedAt": "2026-02-09T14:08:29.861Z",
    "durationMs": 206490,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.multi-step-journeys.json",
    "totalScenarios": 5,
    "passedScenarios": 5,
    "failedScenarios": 0,
    "passRate": 1,
    "totalChecks": 77,
    "passedChecks": 77,
    "failedChecks": 0,
    "checkPassRate": 1,
    "targetPassCount": 4,
    "targetPassRate": 0.8,
    "targetReached": true,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 5,
  "judges": [
    {
      "judge": "kimi",
      "summary": {
        "total": 5,
        "averageUsefulness": 3.4,
        "usefulCount": 4,
        "notUsefulCount": 1,
        "usefulRate": 0.8,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.7,
        "continueCount": 4,
        "continueRate": 0.8,
        "genericFallbackCount": 1,
        "genericFallbackRate": 0.2,
        "averageContinuityScore": 3.6,
        "topIssues": [
          {
            "issue": "в turn 4 топ-3 включает минский завод №1, хотя пользователь просил минскую область без города минск",
            "count": 1
          },
          {
            "issue": "в turn 3 пропущены названия компаний в начале ответа (только 'почему в списке')",
            "count": 1
          },
          {
            "issue": "нет явного подтверждения наличия лука у поставщиков",
            "count": 1
          },
          {
            "issue": "в turn 4 выдал broken shortlist с пустыми названиями компаний",
            "count": 1
          },
          {
            "issue": "после возврата к молоку не предложил новых кандидатов, только повторил старых",
            "count": 1
          },
          {
            "issue": "в turn 4 при запросе 'только 48 часов' дал generic advice вместо конкретного подтверждения",
            "count": 1
          },
          {
            "issue": "в turn 3 полностью проигнорировал минск и предложил звонить в брест (савушкин, брестское мороженое)",
            "count": 1
          },
          {
            "issue": "5 вопросов для звонка generic и не соответствуют закупке молока",
            "count": 1
          },
          {
            "issue": "в turn 4 rfq не содержит конкретики по минским заводам",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "MX005",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.45,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "После критики 'не уходи в общие советы' дал конкретных кандидатов - хорошо",
              "Но в turn 3 упал в generic fallback: предложил звонить в Брест вместо Минска"
            ],
            "criticalIssues": [
              "В turn 3 полностью проигнорировал Минск и предложил звонить в Брест (Савушкин, Брестское мороженое)",
              "5 вопросов для звонка generic и не соответствуют закупке молока"
            ]
          },
          {
            "scenarioId": "MX003",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.65,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 3,
            "reasons": [
              "Корректно обработал switchback молоко -> автозапчасти -> молоко",
              "В turn 5 задал 2 точных вопроса как просили"
            ],
            "criticalIssues": [
              "В turn 4 выдал broken shortlist с пустыми названиями компаний",
              "После возврата к молоку не предложил новых кандидатов, только повторил старых"
            ]
          },
          {
            "scenarioId": "MX002",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.78,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Корректно обработал смену локации Минск -> Минская область",
              "Чеклист звонка на 6 пунктов релевантен и конкретен"
            ],
            "criticalIssues": [
              "В turn 3 пропущены названия компаний в начале ответа (только 'Почему в списке')",
              "Нет явного подтверждения наличия лука у поставщиков"
            ]
          },
          {
            "scenarioId": "MX001",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.8,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Хорошая цепочка уточнений: Брест/Минск -> Минская область",
              "RFQ в финале полный и практичный"
            ],
            "criticalIssues": [
              "В turn 4 топ-3 включает Минский завод №1, хотя пользователь просил Минскую область без города Минск"
            ]
          },
          {
            "scenarioId": "MX004",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.82,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Отличная ссылочная целостность: все 3 компании со ссылками на карточки",
              "RFQ в трех форматах готов к отправке"
            ],
            "criticalIssues": [
              "В turn 4 при запросе 'только 48 часов' дал generic advice вместо конкретного подтверждения"
            ]
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "MX001",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.85,
          "userSatisfaction": 0.8,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Хорошая цепочка уточнений: Брест/Минск -> Минская область",
            "RFQ в финале полный и практичный"
          ],
          "criticalIssues": [
            "В turn 4 топ-3 включает Минский завод №1, хотя пользователь просил Минскую область без города Минск"
          ],
          "strengths": [
            "Сохраняет контекст объема 1000 л/нед на протяжении всего диалога",
            "Чеклист звонка и RFQ готовы к использованию"
          ],
          "nextUserProbe": "Можете уточнить, есть ли у этих заводов филиалы именно в Минской области, а не в городе?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX002",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.82,
          "userSatisfaction": 0.78,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Корректно обработал смену локации Минск -> Минская область",
            "Чеклист звонка на 6 пунктов релевантен и конкретен"
          ],
          "criticalIssues": [
            "В turn 3 пропущены названия компаний в начале ответа (только 'Почему в списке')",
            "Нет явного подтверждения наличия лука у поставщиков"
          ],
          "strengths": [
            "Хорошая работа с географией: Минская область + Брест",
            "Прозрачность о рисках несоответствия"
          ],
          "nextUserProbe": "Уточните, пожалуйста, есть ли у этих поставщиков именно лук репчатый сейчас в наличии?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX003",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.7,
          "userSatisfaction": 0.65,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 3,
          "reasons": [
            "Корректно обработал switchback молоко -> автозапчасти -> молоко",
            "В turn 5 задал 2 точных вопроса как просили"
          ],
          "criticalIssues": [
            "В turn 4 выдал broken shortlist с пустыми названиями компаний",
            "После возврата к молоку не предложил новых кандидатов, только повторил старых"
          ],
          "strengths": [
            "Честно признал ограниченность данных в turn 4",
            "Не выдумывал несуществующие компании"
          ],
          "nextUserProbe": "Можете поискать еще поставщиков молока в Брестской области?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX004",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.88,
          "userSatisfaction": 0.82,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Отличная ссылочная целостность: все 3 компании со ссылками на карточки",
            "RFQ в трех форматах готов к отправке"
          ],
          "criticalIssues": [
            "В turn 4 при запросе 'только 48 часов' дал generic advice вместо конкретного подтверждения"
          ],
          "strengths": [
            "Сохранял контекст Советского района на протяжении всего диалога",
            "Честно указал на отсутствие подтвержденного SLA"
          ],
          "nextUserProbe": "Можете проверить у БелСтройКомплекта наличие ВВГнг 3х2.5 на складе прямо сейчас?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX005",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.75,
          "userSatisfaction": 0.45,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "После критики 'не уходи в общие советы' дал конкретных кандидатов - хорошо",
            "Но в turn 3 упал в generic fallback: предложил звонить в Брест вместо Минска"
          ],
          "criticalIssues": [
            "В turn 3 полностью проигнорировал Минск и предложил звонить в Брест (Савушкин, Брестское мороженое)",
            "5 вопросов для звонка generic и не соответствуют закупке молока",
            "В turn 4 RFQ не содержит конкретики по Минским заводам"
          ],
          "strengths": [
            "В turn 2 отреагировал на критику и дал 3 конкретных минских завода"
          ],
          "nextUserProbe": "Почему вы предлагаете звонить в Брест, когда я просил по Минску?",
          "judge": "kimi"
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 5,
        "averageUsefulness": 4.4,
        "usefulCount": 5,
        "notUsefulCount": 0,
        "usefulRate": 1,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.832,
        "continueCount": 5,
        "continueRate": 1,
        "genericFallbackCount": 0,
        "genericFallbackRate": 0,
        "averageContinuityScore": 4.4,
        "topIssues": [
          {
            "issue": "turn 4: only provides 2 companies instead of requested top-3",
            "count": 1
          },
          {
            "issue": "turn 3 shortlist still references brest instead of minsk despite correction in turn 2",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "MX003",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.6,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 3,
            "reasons": [
              "Successfully handles topic switchback (milk→auto parts→milk)",
              "Turn 4 lacks concrete top-3 due to limited catalog data"
            ],
            "criticalIssues": [
              "Turn 4: Only provides 2 companies instead of requested top-3"
            ]
          },
          {
            "scenarioId": "MX005",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.8,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Assistant recovers well after user criticism in Turn 2",
              "Provides concrete candidates for Minsk"
            ],
            "criticalIssues": [
              "Turn 3 shortlist still references Brest instead of Minsk despite correction in Turn 2"
            ]
          },
          {
            "scenarioId": "MX001",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.92,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Excellent geo-continuity: adapts Brest→Minsk→Minsk region correctly",
              "Actionable shortlist with concrete company links"
            ],
            "criticalIssues": []
          },
          {
            "scenarioId": "MX002",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.92,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Perfect progressive refinement: Minsk→Minsk region→+Brest delivery",
              "Shortlist + checklists delivered as requested"
            ],
            "criticalIssues": []
          },
          {
            "scenarioId": "MX004",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.92,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Complex multi-step sourcing handled flawlessly",
              "Links to cards maintained across all turns"
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "MX001",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.92,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Excellent geo-continuity: adapts Brest→Minsk→Minsk region correctly",
            "Actionable shortlist with concrete company links",
            "RFQ template ready for immediate use"
          ],
          "criticalIssues": [],
          "strengths": [
            "Stays concrete throughout all 5 turns",
            "Properly handles progressive geo-constraints",
            "Links and company names appear valid"
          ],
          "nextUserProbe": "Какой минимальный объём они готовы отгрузить и какая цена при 1000 л/нед?",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX002",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.92,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Perfect progressive refinement: Minsk→Minsk region→+Brest delivery",
            "Shortlist + checklists delivered as requested",
            "Realistic candidate companies with geo-context"
          ],
          "criticalIssues": [],
          "strengths": [
            "Handles multi-constraint geo-logistics seamlessly",
            "Actionable checklists for documents and calls",
            "Maintains specificity despite limited catalog data"
          ],
          "nextUserProbe": "Проверили остатки лука на этих фермерских хозяйствах? Какой сорт и калибр доступны?",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX003",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.9,
          "userSatisfaction": 0.6,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 3,
          "reasons": [
            "Successfully handles topic switchback (milk→auto parts→milk)",
            "Turn 4 lacks concrete top-3 due to limited catalog data",
            "Good self-awareness about data limitations"
          ],
          "criticalIssues": [
            "Turn 4: Only provides 2 companies instead of requested top-3"
          ],
          "strengths": [
            "Quick adaptation to topic changes",
            "Transparent about data gaps",
            "Asks clarifying questions appropriately"
          ],
          "nextUserProbe": "Расширь поиск на дистрибьюторов молока в Бресте, не только производителей",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX004",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.92,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Complex multi-step sourcing handled flawlessly",
            "Links to cards maintained across all turns",
            "48h SLA constraint properly qualified"
          ],
          "criticalIssues": [],
          "strengths": [
            "Link integrity preserved throughout conversation",
            "Progressive constraints added smoothly",
            "RFQ in 3 formats (email/WhatsApp) as requested"
          ],
          "nextUserProbe": "Какой метраж ВВГнг 3х2.5 есть в наличии на складе у каждого из топ-3?",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX005",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.9,
          "userSatisfaction": 0.8,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Assistant recovers well after user criticism in Turn 2",
            "Provides concrete candidates for Minsk",
            "RFQ template ready but slight confusion in Turn 3 shortlist"
          ],
          "criticalIssues": [
            "Turn 3 shortlist still references Brest instead of Minsk despite correction in Turn 2"
          ],
          "strengths": [
            "Good response to direct criticism",
            "Strong RFQ templates",
            "Actionable call questions"
          ],
          "nextUserProbe": "Исправь shortlist под Минск и укажи приоритет по кого звонить первым",
          "judge": "minimax"
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": null,
    "kimiAvg": 3.4,
    "minimaxAvg": 4.4,
    "geminiUserSatisfaction": null,
    "kimiUserSatisfaction": 0.7,
    "geminiContinueRate": null,
    "kimiContinueRate": 0.8,
    "geminiGenericFallbackRate": null,
    "kimiGenericFallbackRate": 0.2,
    "avgGap": null,
    "usefulRateGap": null,
    "pairwise": [
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": -1,
        "usefulRateGap": -0.2,
        "userSatisfactionGap": -0.132,
        "continueRateGap": -0.2,
        "genericFallbackRateGap": 0.2
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "kimi averageUserSatisfaction 0.7 < 0.72"
    ],
    "checks": [
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.7,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 0.8,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 0.2,
        "expected": "<= 0.35",
        "pass": true
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.832,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 1,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 0,
        "expected": "<= 0.35",
        "pass": true
      }
    ]
  }
}
