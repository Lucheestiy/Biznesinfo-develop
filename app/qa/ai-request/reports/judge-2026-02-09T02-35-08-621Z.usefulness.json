{
  "runId": "judge-2026-02-09T02-35-08-621Z",
  "generatedAt": "2026-02-09T02:36:14.921Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-09T02-32-49-950Z-622958-n3s4q",
    "startedAt": "2026-02-09T02:32:49.950Z",
    "endedAt": "2026-02-09T02:33:25.470Z",
    "durationMs": 35520,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.geo-ambiguity.json",
    "totalScenarios": 2,
    "passedScenarios": 1,
    "failedScenarios": 1,
    "passRate": 0.5,
    "totalChecks": 17,
    "passedChecks": 16,
    "failedChecks": 1,
    "checkPassRate": 0.9412,
    "targetPassCount": 2,
    "targetPassRate": 0.8,
    "targetReached": false,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 2,
  "judges": [
    {
      "judge": "gemini",
      "summary": {
        "total": 2,
        "averageUsefulness": 5,
        "usefulCount": 2,
        "notUsefulCount": 0,
        "usefulRate": 1,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 1,
        "continueCount": 2,
        "continueRate": 1,
        "genericFallbackCount": 0,
        "genericFallbackRate": 0,
        "averageContinuityScore": 5,
        "topIssues": [],
        "worstScenarios": [
          {
            "scenarioId": "GA001",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 1,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Отлично реагирует на смену приоритетов пользователя, предлагает конкретные действия и контакты, сохраняет контекст.",
              "Честно указывает на ограничения данных, но предлагает пути их решения."
            ],
            "criticalIssues": []
          },
          {
            "scenarioId": "GA002",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 1,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Грамотно обрабатывает уточнение региона, объясняя релевантность предложенных ранее поставщиков для новой географии.",
              "Предлагает конкретный чек-лист для дальнейшей работы с поставщиками."
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 1,
          "userSatisfaction": 1,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Отлично реагирует на смену приоритетов пользователя, предлагает конкретные действия и контакты, сохраняет контекст.",
            "Честно указывает на ограничения данных, но предлагает пути их решения."
          ],
          "criticalIssues": [],
          "strengths": [
            "Конкретные рекомендации с контактами",
            "Гибкость в адаптации к изменениям запроса",
            "Предложение по расширению поиска"
          ],
          "nextUserProbe": "Отлично, дайте скрипт звонка и шаблон запроса.",
          "judge": "gemini"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 1,
          "userSatisfaction": 1,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Грамотно обрабатывает уточнение региона, объясняя релевантность предложенных ранее поставщиков для новой географии.",
            "Предлагает конкретный чек-лист для дальнейшей работы с поставщиками."
          ],
          "criticalIssues": [],
          "strengths": [
            "Успешная адаптация к новому географическому контексту",
            "Обоснование сохранения предыдущих кандидатов",
            "Конкретный чек-лист"
          ],
          "nextUserProbe": "Дайте чек-лист сравнения, пожалуйста.",
          "judge": "gemini"
        }
      ]
    },
    {
      "judge": "kimi",
      "summary": {
        "total": 2,
        "averageUsefulness": 3.5,
        "usefulCount": 2,
        "notUsefulCount": 0,
        "usefulRate": 1,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.725,
        "continueCount": 2,
        "continueRate": 1,
        "genericFallbackCount": 0,
        "genericFallbackRate": 0,
        "averageContinuityScore": 3.5,
        "topIssues": [
          {
            "issue": "не добавил новых кандидатов из минской области (только переиспользовал тех же двух, один из которых в самом минске)",
            "count": 1
          },
          {
            "issue": "«убрал нерелевантные варианты (например, молочное предприятие)» — странная фраза, молочного предприятия в контексте лука и не было",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "GA002",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.65,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 3,
            "reasons": [
              "Сохраняет предмет закупки (лук репчатый) при смене географии с города на область",
              "Не теряет ранее найденных кандидатов — перепроверяет их релевантность под новую географию"
            ],
            "criticalIssues": [
              "Не добавил новых кандидатов из Минской области (только переиспользовал тех же двух, один из которых в самом Минске)",
              "«Убрал нерелевантные варианты (например, молочное предприятие)» — странная фраза, молочного предприятия в контексте лука и не было"
            ]
          },
          {
            "scenarioId": "GA001",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.8,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Ассистент сразу даёт конкретных кандидатов (Савушкин продукт, Брестское мороженое) с контактами и объяснением почему подходят",
              "При уточнении приоритета (Минск база) сохраняет контекст — не сбрасывает Брест, а предлагает параллельную стратегию"
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.85,
          "userSatisfaction": 0.8,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Ассистент сразу даёт конкретных кандидатов (Савушкин продукт, Брестское мороженое) с контактами и объяснением почему подходят",
            "При уточнении приоритета (Минск база) сохраняет контекст — не сбрасывает Брест, а предлагает параллельную стратегию",
            "Даёт практичные следующие шаги: скрипт звонка, фильтры поиска, критерии отбора"
          ],
          "criticalIssues": [],
          "strengths": [
            "Честно признаёт ограниченность выборки («сильных кандидатов только 1–2»)",
            "Структурированный ответ с приоритетами и конкретными действиями",
            "Сохраняет континуитет при смене приоритета города"
          ],
          "nextUserProbe": "А есть у Савушкина прямые контакты отдела оптовых продаж? Или лучше через общий info@savushkin.com писать?",
          "judge": "kimi"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.75,
          "userSatisfaction": 0.65,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 3,
          "reasons": [
            "Сохраняет предмет закупки (лук репчатый) при смене географии с города на область",
            "Не теряет ранее найденных кандидатов — перепроверяет их релевантность под новую географию",
            "Даёт конкретный чек-лист для звонка/запроса по ключевым параметрам"
          ],
          "criticalIssues": [
            "Не добавил новых кандидатов из Минской области (только переиспользовал тех же двух, один из которых в самом Минске)",
            "«Убрал нерелевантные варианты (например, молочное предприятие)» — странная фраза, молочного предприятия в контексте лука и не было"
          ],
          "strengths": [
            "Корректно обработал уточнение географии без потери контекста запроса",
            "Предложил чек-лист сравнения поставщиков как следующий шаг"
          ],
          "nextUserProbe": "А есть поставщики именно в самой Минской области, не в городе Минск? Например, в Смолевичах или Жодино?",
          "judge": "kimi"
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 2,
        "averageUsefulness": 3,
        "usefulCount": 1,
        "notUsefulCount": 1,
        "usefulRate": 0.5,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.6,
        "continueCount": 1,
        "continueRate": 0.5,
        "genericFallbackCount": 1,
        "genericFallbackRate": 0.5,
        "averageContinuityScore": 3.5,
        "topIssues": [
          {
            "issue": "failed to find new candidates for corrected geography",
            "count": 1
          },
          {
            "issue": "appears to be placeholder response after user constraint clarification",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "GA002",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.3,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Same 2 candidates reused after geo clarification",
              "No actual new suppliers found for Minsk Oblast"
            ],
            "criticalIssues": [
              "Failed to find new candidates for corrected geography",
              "Appears to be placeholder response after user constraint clarification"
            ]
          },
          {
            "scenarioId": "GA001",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.9,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Concrete supplier candidates with contacts",
              "Clear geo handling for Brest/Minsk ambiguity"
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.9,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Concrete supplier candidates with contacts",
            "Clear geo handling for Brest/Minsk ambiguity",
            "Practical step-by-step sourcing guidance",
            "Provides script/template for next steps"
          ],
          "criticalIssues": [],
          "strengths": [
            "Addresses both cities pragmatically",
            "Prioritizes based on user clarification",
            "Actionable criteria for supplier selection"
          ],
          "nextUserProbe": "Давай тот скрипт звонка и шаблон запроса для поставщиков",
          "judge": "minimax"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.9,
          "userSatisfaction": 0.3,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Same 2 candidates reused after geo clarification",
            "No actual new suppliers found for Minsk Oblast",
            "Generic justification instead of concrete progress"
          ],
          "criticalIssues": [
            "Failed to find new candidates for corrected geography",
            "Appears to be placeholder response after user constraint clarification"
          ],
          "strengths": [
            "Acknowledged user correction",
            "Provided contacts"
          ],
          "nextUserProbe": "А какие ещё есть поставщики именно в Минской области?",
          "judge": "minimax"
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": 5,
    "kimiAvg": 3.5,
    "minimaxAvg": 3,
    "geminiUserSatisfaction": 1,
    "kimiUserSatisfaction": 0.725,
    "geminiContinueRate": 1,
    "kimiContinueRate": 1,
    "geminiGenericFallbackRate": 0,
    "kimiGenericFallbackRate": 0,
    "avgGap": 1.5,
    "usefulRateGap": 0,
    "pairwise": [
      {
        "left": "gemini",
        "right": "kimi",
        "avgGap": 1.5,
        "usefulRateGap": 0,
        "userSatisfactionGap": 0.275,
        "continueRateGap": 0,
        "genericFallbackRateGap": 0
      },
      {
        "left": "gemini",
        "right": "minimax",
        "avgGap": 2,
        "usefulRateGap": 0.5,
        "userSatisfactionGap": 0.4,
        "continueRateGap": 0.5,
        "genericFallbackRateGap": -0.5
      },
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": 0.5,
        "usefulRateGap": 0.5,
        "userSatisfactionGap": 0.125,
        "continueRateGap": 0.5,
        "genericFallbackRateGap": -0.5
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "minimax averageUserSatisfaction 0.6 < 0.72",
      "minimax continueRate 0.5 < 0.72",
      "minimax genericFallbackRate 0.5 > 0.35"
    ],
    "checks": [
      {
        "judge": "gemini",
        "metric": "averageUserSatisfaction",
        "actual": 1,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "gemini",
        "metric": "continueRate",
        "actual": 1,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "gemini",
        "metric": "genericFallbackRate",
        "actual": 0,
        "expected": "<= 0.35",
        "pass": true
      },
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.725,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 1,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 0,
        "expected": "<= 0.35",
        "pass": true
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.6,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 0.5,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 0.5,
        "expected": "<= 0.35",
        "pass": false
      }
    ]
  }
}
