{
  "runId": "judge-2026-02-09T02-42-14-929Z",
  "generatedAt": "2026-02-09T02:43:19.133Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-09T02-41-30-031Z-644115-laj86",
    "startedAt": "2026-02-09T02:41:30.031Z",
    "endedAt": "2026-02-09T02:42:09.152Z",
    "durationMs": 39121,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.geo-ambiguity.json",
    "totalScenarios": 2,
    "passedScenarios": 2,
    "failedScenarios": 0,
    "passRate": 1,
    "totalChecks": 17,
    "passedChecks": 17,
    "failedChecks": 0,
    "checkPassRate": 1,
    "targetPassCount": 2,
    "targetPassRate": 0.8,
    "targetReached": true,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 2,
  "judges": [
    {
      "judge": "gemini",
      "summary": {
        "total": 2,
        "averageUsefulness": 5,
        "usefulCount": 2,
        "notUsefulCount": 0,
        "usefulRate": 1,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.9,
        "continueCount": 2,
        "continueRate": 1,
        "genericFallbackCount": 0,
        "genericFallbackRate": 0,
        "averageContinuityScore": 5,
        "topIssues": [],
        "worstScenarios": [
          {
            "scenarioId": "GA001",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.9,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Assistant correctly identified and proposed suppliers based on initial ambiguous request.",
              "Assistant transparently acknowledged lack of candidates for one city."
            ],
            "criticalIssues": []
          },
          {
            "scenarioId": "GA002",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.9,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Assistant provided relevant candidates for the initial 'Minsk' query for onions.",
              "Assistant correctly understood and adjusted to the user's clarification for 'Minsk region, not city'."
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.9,
          "userSatisfaction": 0.9,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Assistant correctly identified and proposed suppliers based on initial ambiguous request.",
            "Assistant transparently acknowledged lack of candidates for one city.",
            "Assistant seamlessly adapted to user's clarification, providing a highly actionable plan with specific filtering criteria and a contact script.",
            "Context and product (milk) maintained throughout the conversation."
          ],
          "criticalIssues": [],
          "strengths": [
            "Clear and practical guidance for ambiguous input.",
            "Excellent adaptation to changing user constraints.",
            "Detailed actionable next steps."
          ],
          "nextUserProbe": "Спасибо. А какие еще поставщики есть по Минской области, если объем нужен 5000 литров?",
          "judge": "gemini"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.9,
          "userSatisfaction": 0.9,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Assistant provided relevant candidates for the initial 'Minsk' query for onions.",
            "Assistant correctly understood and adjusted to the user's clarification for 'Minsk region, not city'.",
            "Assistant honestly stated that previous candidates were tied to the city and offered concrete steps for the new regional search.",
            "Provided specific filtering criteria, keywords, and a list of cities for the new geographic scope."
          ],
          "criticalIssues": [],
          "strengths": [
            "Maintained product context while adapting geographic scope.",
            "Provided practical, actionable steps for refining search in a new region.",
            "Honest about limitations of current search results."
          ],
          "nextUserProbe": "Понятно. Можешь показать компании по луку в Борисове и Молодечно?",
          "judge": "gemini"
        }
      ]
    },
    {
      "judge": "kimi",
      "summary": {
        "total": 2,
        "averageUsefulness": 3.5,
        "usefulCount": 2,
        "notUsefulCount": 0,
        "usefulRate": 1,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.7,
        "continueCount": 2,
        "continueRate": 1,
        "genericFallbackCount": 1,
        "genericFallbackRate": 0.5,
        "averageContinuityScore": 3,
        "topIssues": [
          {
            "issue": "turn 2: no concrete minsk suppliers provided — only generic search instructions despite having catalog access",
            "count": 1
          },
          {
            "issue": "turn 2: 'в списке сейчас нет релевантных молочных поставщиков из минска' — but didn't attempt to find any",
            "count": 1
          },
          {
            "issue": "turn 2: fell back to generic search advice instead of checking if the 2 existing candidates actually serve minsk region",
            "count": 1
          },
          {
            "issue": "no attempt to verify if amifruit or agrokombinat zhdanovichi deliver outside minsk city",
            "count": 1
          },
          {
            "issue": "generic city list (borisov, molodechno, etc.) without any concrete suppliers in those cities",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "GA002",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.6,
            "wouldContinue": true,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Turn 1: Provided 2 concrete onion suppliers in Minsk with relevant profiles",
              "Turn 2: Acknowledged geo correction (Minsk region, not city) and gave search keywords for region"
            ],
            "criticalIssues": [
              "Turn 2: Fell back to generic search advice instead of checking if the 2 existing candidates actually serve Minsk region",
              "No attempt to verify if Amifruit or Agrokombinat Zhdanovichi deliver outside Minsk city"
            ]
          },
          {
            "scenarioId": "GA001",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.8,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Turn 1: Provided 2 concrete candidates for Brest with direct links and clear relevance assessment",
              "Turn 2: Correctly pivoted to Minsk as base city while maintaining delivery-to-Brest constraint; gave actionable filter strategy"
            ],
            "criticalIssues": [
              "Turn 2: No concrete Minsk suppliers provided — only generic search instructions despite having catalog access",
              "Turn 2: 'В списке сейчас нет релевантных молочных поставщиков из Минска' — but didn't attempt to find any"
            ]
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.85,
          "userSatisfaction": 0.8,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Turn 1: Provided 2 concrete candidates for Brest with direct links and clear relevance assessment",
            "Turn 2: Correctly pivoted to Minsk as base city while maintaining delivery-to-Brest constraint; gave actionable filter strategy"
          ],
          "criticalIssues": [
            "Turn 2: No concrete Minsk suppliers provided — only generic search instructions despite having catalog access",
            "Turn 2: 'В списке сейчас нет релевантных молочных поставщиков из Минска' — but didn't attempt to find any"
          ],
          "strengths": [
            "Excellent honesty in Turn 1 about DALMIO being equipment supplier, not milk producer",
            "Maintained volume constraint (1000L/week) across both turns",
            "Turn 2 provided practical call script with specific questions about volume and logistics"
          ],
          "nextUserProbe": "А конкретно в Минске кто есть? Дайте 2-3 производителя молока",
          "judge": "kimi"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.75,
          "userSatisfaction": 0.6,
          "wouldContinue": true,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Turn 1: Provided 2 concrete onion suppliers in Minsk with relevant profiles",
            "Turn 2: Acknowledged geo correction (Minsk region, not city) and gave search keywords for region"
          ],
          "criticalIssues": [
            "Turn 2: Fell back to generic search advice instead of checking if the 2 existing candidates actually serve Minsk region",
            "No attempt to verify if Amifruit or Agrokombinat Zhdanovichi deliver outside Minsk city",
            "Generic city list (Borisov, Molodechno, etc.) without any concrete suppliers in those cities"
          ],
          "strengths": [
            "Correctly identified both initial candidates as city-Minsk based",
            "Provided relevant search keywords for regional sourcing",
            "Honest about limited candidates in current selection for Minsk region specifically"
          ],
          "nextUserProbe": "Амифрут и Ждановичи — они в область возят? Или только по Минску?",
          "judge": "kimi"
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 2,
        "averageUsefulness": 3.5,
        "usefulCount": 2,
        "notUsefulCount": 0,
        "usefulRate": 1,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.675,
        "continueCount": 1,
        "continueRate": 0.5,
        "genericFallbackCount": 1,
        "genericFallbackRate": 0.5,
        "averageContinuityScore": 3.5,
        "topIssues": [
          {
            "issue": "сильный штраф за generic fallback после конкретного уточнения пользователя",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "GA002",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.5,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "После уточнения Минская область вместо Минска не предоставил новых кандидатов",
              "Переключился на общие советы по поиску вместо конкретных действий"
            ],
            "criticalIssues": [
              "Сильный штраф за generic fallback после конкретного уточнения пользователя"
            ]
          },
          {
            "scenarioId": "GA001",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.85,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Прямой релевантный ответ с конкретными поставщиками молока",
              "Честно признаёт отсутствие сильных минских кандидатов"
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "GA001",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.85,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Прямой релевантный ответ с конкретными поставщиками молока",
            "Честно признаёт отсутствие сильных минских кандидатов",
            "Практичный план с контактным скриптом и критериями отбора",
            "Корректно обработал уточнение Минск как база + доставка в Брест"
          ],
          "criticalIssues": [],
          "strengths": [
            "Конкретные ссылки на компании с объяснением причин",
            "Действенный скрипт для первого контакта"
          ],
          "nextUserProbe": "Какой жирности и в какой упаковке нужно молоко?",
          "judge": "minimax"
        },
        {
          "scenarioId": "GA002",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.9,
          "userSatisfaction": 0.5,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "После уточнения Минская область вместо Минска не предоставил новых кандидатов",
            "Переключился на общие советы по поиску вместо конкретных действий",
            "Оба кандидата из первого ответа были для города Минска, а не области"
          ],
          "criticalIssues": [
            "Сильный штраф за generic fallback после конкретного уточнения пользователя"
          ],
          "strengths": [
            "Честно признал, что текущие кандидаты не подходят под уточнённый регион"
          ],
          "nextUserProbe": null,
          "judge": "minimax"
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": 5,
    "kimiAvg": 3.5,
    "minimaxAvg": 3.5,
    "geminiUserSatisfaction": 0.9,
    "kimiUserSatisfaction": 0.7,
    "geminiContinueRate": 1,
    "kimiContinueRate": 1,
    "geminiGenericFallbackRate": 0,
    "kimiGenericFallbackRate": 0.5,
    "avgGap": 1.5,
    "usefulRateGap": 0,
    "pairwise": [
      {
        "left": "gemini",
        "right": "kimi",
        "avgGap": 1.5,
        "usefulRateGap": 0,
        "userSatisfactionGap": 0.2,
        "continueRateGap": 0,
        "genericFallbackRateGap": -0.5
      },
      {
        "left": "gemini",
        "right": "minimax",
        "avgGap": 1.5,
        "usefulRateGap": 0,
        "userSatisfactionGap": 0.225,
        "continueRateGap": 0.5,
        "genericFallbackRateGap": -0.5
      },
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": 0,
        "usefulRateGap": 0,
        "userSatisfactionGap": 0.025,
        "continueRateGap": 0.5,
        "genericFallbackRateGap": 0
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "kimi averageUserSatisfaction 0.7 < 0.72",
      "kimi genericFallbackRate 0.5 > 0.35",
      "minimax averageUserSatisfaction 0.675 < 0.72",
      "minimax continueRate 0.5 < 0.72",
      "minimax genericFallbackRate 0.5 > 0.35"
    ],
    "checks": [
      {
        "judge": "gemini",
        "metric": "averageUserSatisfaction",
        "actual": 0.9,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "gemini",
        "metric": "continueRate",
        "actual": 1,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "gemini",
        "metric": "genericFallbackRate",
        "actual": 0,
        "expected": "<= 0.35",
        "pass": true
      },
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.7,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 1,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 0.5,
        "expected": "<= 0.35",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.675,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 0.5,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 0.5,
        "expected": "<= 0.35",
        "pass": false
      }
    ]
  }
}
