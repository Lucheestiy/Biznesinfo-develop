{
  "runId": "judge-2026-02-15T05-18-05-165Z",
  "generatedAt": "2026-02-15T05:18:56.648Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-15T05-17-30-355Z-3539499-1yv8r",
    "startedAt": "2026-02-15T05:17:30.355Z",
    "endedAt": "2026-02-15T05:18:05.067Z",
    "durationMs": 34712,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.user-ideas-multistep-variants.json",
    "totalScenarios": 1,
    "passedScenarios": 1,
    "failedScenarios": 0,
    "passRate": 1,
    "totalChecks": 9,
    "passedChecks": 9,
    "failedChecks": 0,
    "checkPassRate": 1,
    "targetPassCount": 1,
    "targetPassRate": 0.8,
    "targetReached": true,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "totalTurnsExecuted": 3,
    "avgTurnLatencyMs": 11472,
    "totalTurnLatencyMs": 34416,
    "totalStubReplies": 0,
    "totalBusyRetries": 0,
    "totalRateLimitRetries": 0,
    "totalStubRetries": 0,
    "providerUsage": [
      {
        "provider": "minimax",
        "turns": 3
      }
    ],
    "modelUsage": [
      {
        "model": "MiniMax-M2.5",
        "turns": 3
      }
    ],
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 1,
  "judges": [
    {
      "judge": "kimi",
      "summary": {
        "total": 1,
        "averageUsefulness": 1,
        "usefulCount": 0,
        "notUsefulCount": 1,
        "usefulRate": 0,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.25,
        "continueCount": 0,
        "continueRate": 0,
        "genericFallbackCount": 1,
        "genericFallbackRate": 1,
        "synthesizedRatingCount": 0,
        "synthesizedRatingRate": 0,
        "averageContinuityScore": 2,
        "topIssues": [
          {
            "issue": "turn 3: полный сбой генерации — шаблон содержит мусор 'subject: запрос по сформируй сообщение', 'нам нужно сформируй сообщение в минск' — это не шаблон, а артефакт сломанного парсинга",
            "count": 1
          },
          {
            "issue": "ни в одном turn не подтверждено, что компании реально торгуют свеклой — только общие 'продукты питания' и 'оптовая торговля'",
            "count": 1
          },
          {
            "issue": "turn 3 полностью проигнорировал контекст запроса (свекла 500 кг) и сгенерировал бессмысленный шаблон с placeholder-замыканиями на сам запрос пользователя",
            "count": 1
          },
          {
            "issue": "нарушение continuity: после запроса shortlist 'релевантных поставщиков' и шаблона с конкретными параметрами (500 кг, 3 дня) — выдан полный мусор вместо actionable контента",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "UV017",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.25,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Turn 1: Нерелевантные кандидаты — Минская овощная фабрика КУП указана как 'Пчеловодство', Агромашмаркет ООО — 'Запчасти к сельхозтехнике', что не имеет отношения к свекле",
              "Turn 2: Shortlist повторяет те же нерелевантные компании без фильтрации, Турпродплюс и Амифрут — общие оптовики без подтверждения работы со свеклой"
            ],
            "criticalIssues": [
              "Turn 3: Полный сбой генерации — шаблон содержит мусор 'Subject: Запрос по сформируй сообщение', 'Нам нужно сформируй сообщение в Минск' — это не шаблон, а артефакт сломанного парсинга",
              "Ни в одном turn не подтверждено, что компании реально торгуют свеклой — только общие 'продукты питания' и 'оптовая торговля'"
            ]
          }
        ]
      },
      "diagnostics": {
        "totalBatches": 1,
        "nonJsonRetryBatches": 0,
        "schemaRetryBatches": 0,
        "synthesizedBatches": 0,
        "synthesizedRatingCount": 0,
        "nonJsonRetryRate": 0,
        "schemaRetryRate": 0,
        "synthesizedBatchRate": 0,
        "synthesizedRatingRate": 0
      },
      "ratings": [
        {
          "scenarioId": "UV017",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.88,
          "userSatisfaction": 0.25,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Turn 1: Нерелевантные кандидаты — Минская овощная фабрика КУП указана как 'Пчеловодство', Агромашмаркет ООО — 'Запчасти к сельхозтехнике', что не имеет отношения к свекле",
            "Turn 2: Shortlist повторяет те же нерелевантные компании без фильтрации, Турпродплюс и Амифрут — общие оптовики без подтверждения работы со свеклой",
            "Turn 3: Катастрофический провал — вместо шаблона для поставщика свеклы сгенерирован бессмысленный текст с повторением слов 'уточняется', 'сформируй сообщение' как переменных"
          ],
          "criticalIssues": [
            "Turn 3: Полный сбой генерации — шаблон содержит мусор 'Subject: Запрос по сформируй сообщение', 'Нам нужно сформируй сообщение в Минск' — это не шаблон, а артефакт сломанного парсинга",
            "Ни в одном turn не подтверждено, что компании реально торгуют свеклой — только общие 'продукты питания' и 'оптовая торговля'",
            "Turn 3 полностью проигнорировал контекст запроса (свекла 500 кг) и сгенерировал бессмысленный шаблон с placeholder-замыканиями на сам запрос пользователя",
            "Нарушение continuity: после запроса shortlist 'релевантных поставщиков' и шаблона с конкретными параметрами (500 кг, 3 дня) — выдан полный мусор вместо actionable контента"
          ],
          "strengths": [
            "Turn 1: Правильная локация (Минск) и формат выдачи с ссылками на компании",
            "Turn 2: Попытка структурированного ranking с указанием критериев"
          ],
          "nextUserProbe": "Что это за бред? Уточняется, сформируй сообщение — это не шаблон, а мусор. Вы вообще понимаете, что я про свеклу спрашиваю?",
          "judge": "kimi",
          "synthesized": false
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 1,
        "averageUsefulness": 1,
        "usefulCount": 0,
        "notUsefulCount": 1,
        "usefulRate": 0,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.1,
        "continueCount": 0,
        "continueRate": 0,
        "genericFallbackCount": 1,
        "genericFallbackRate": 1,
        "synthesizedRatingCount": 0,
        "synthesizedRatingRate": 0,
        "averageContinuityScore": 1,
        "topIssues": [
          {
            "issue": "assistant failed to honestly assess whether listed companies actually sell red beet",
            "count": 1
          },
          {
            "issue": "zero alternative search queries provided despite explicit request",
            "count": 1
          },
          {
            "issue": "turn 3 message is completely generic and unusable",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "UV017",
            "usefulness": 1,
            "verdict": "not_useful",
            "userSatisfaction": 0.1,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 1,
            "reasons": [
              "Turn 2: Explicit request for honest assessment and alternative queries was ignored",
              "Turn 3: Generated generic template with 'уточняется' placeholders instead of actionable messages"
            ],
            "criticalIssues": [
              "Assistant failed to honestly assess whether listed companies actually sell red beet",
              "Zero alternative search queries provided despite explicit request"
            ]
          }
        ]
      },
      "diagnostics": {
        "totalBatches": 1,
        "nonJsonRetryBatches": 0,
        "schemaRetryBatches": 0,
        "synthesizedBatches": 0,
        "synthesizedRatingCount": 0,
        "nonJsonRetryRate": 0,
        "schemaRetryRate": 0,
        "synthesizedBatchRate": 0,
        "synthesizedRatingRate": 0
      },
      "ratings": [
        {
          "scenarioId": "UV017",
          "usefulness": 1,
          "verdict": "not_useful",
          "confidence": 0.9,
          "userSatisfaction": 0.1,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 1,
          "reasons": [
            "Turn 2: Explicit request for honest assessment and alternative queries was ignored",
            "Turn 3: Generated generic template with 'уточняется' placeholders instead of actionable messages",
            "No company-specific details used in message composition"
          ],
          "criticalIssues": [
            "Assistant failed to honestly assess whether listed companies actually sell red beet",
            "Zero alternative search queries provided despite explicit request",
            "Turn 3 message is completely generic and unusable"
          ],
          "strengths": [
            "Turn 1 provided some potentially relevant companies from catalog"
          ],
          "nextUserProbe": "Честно скажите — эти компании вообще продают свеклу? И дайте альтернативные поисковые запросы.",
          "judge": "minimax",
          "synthesized": false
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": null,
    "kimiAvg": 1,
    "minimaxAvg": 1,
    "geminiUserSatisfaction": null,
    "kimiUserSatisfaction": 0.25,
    "geminiContinueRate": null,
    "kimiContinueRate": 0,
    "geminiGenericFallbackRate": null,
    "kimiGenericFallbackRate": 1,
    "avgGap": null,
    "usefulRateGap": null,
    "pairwise": [
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": 0,
        "usefulRateGap": 0,
        "userSatisfactionGap": 0.15,
        "continueRateGap": 0,
        "genericFallbackRateGap": 0
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "kimi averageUserSatisfaction 0.25 < 0.72",
      "kimi continueRate 0 < 0.72",
      "kimi genericFallbackRate 1 > 0.35",
      "minimax averageUserSatisfaction 0.1 < 0.72",
      "minimax continueRate 0 < 0.72",
      "minimax genericFallbackRate 1 > 0.35"
    ],
    "checks": [
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.25,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 0,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 1,
        "expected": "<= 0.35",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.1,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 0,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 1,
        "expected": "<= 0.35",
        "pass": false
      }
    ]
  }
}
