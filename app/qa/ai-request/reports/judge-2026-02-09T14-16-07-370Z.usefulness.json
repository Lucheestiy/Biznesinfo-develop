{
  "runId": "judge-2026-02-09T14-16-07-370Z",
  "generatedAt": "2026-02-09T14:18:18.900Z",
  "sourceReport": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/reports/latest.json",
  "sourceSummary": {
    "runId": "run-2026-02-09T14-12-42-978Z-2222382-t5kf4",
    "startedAt": "2026-02-09T14:12:42.978Z",
    "endedAt": "2026-02-09T14:16:00.737Z",
    "durationMs": 197759,
    "baseUrl": "http://127.0.0.1:8131",
    "scenarioFile": "/home/mlweb/biznesinfo-develop.lucheestiy.com/app/qa/ai-request/scenarios.regressions.multi-step-journeys.json",
    "totalScenarios": 5,
    "passedScenarios": 5,
    "failedScenarios": 0,
    "passRate": 1,
    "totalChecks": 77,
    "passedChecks": 77,
    "failedChecks": 0,
    "checkPassRate": 1,
    "targetPassCount": 4,
    "targetPassRate": 0.8,
    "targetReached": true,
    "authUser": {
      "id": "bb1de8c3-658c-46cc-9fa4-c8629b43f3d7",
      "email": "qa.ai.runner@example.com",
      "name": "AI QA Runner",
      "role": "user",
      "plan": "paid"
    },
    "stoppedEarly": false,
    "stopReason": null
  },
  "totalScenarios": 5,
  "judges": [
    {
      "judge": "kimi",
      "summary": {
        "total": 5,
        "averageUsefulness": 3.4,
        "usefulCount": 4,
        "notUsefulCount": 1,
        "usefulRate": 0.8,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.7,
        "continueCount": 4,
        "continueRate": 0.8,
        "genericFallbackCount": 2,
        "genericFallbackRate": 0.4,
        "averageContinuityScore": 3.4,
        "topIssues": [
          {
            "issue": "на turn 3 ассистент не предложил конкретных кандидатов в минской области, хотя мог бы предложить поиск по ближайшим районам",
            "count": 1
          },
          {
            "issue": "shortlist на turn 4 возвращается к минску вместо поиска в минской области",
            "count": 1
          },
          {
            "issue": "на turn 3 ассистент теряет форматирование (нет названий компаний в начале пунктов)",
            "count": 1
          },
          {
            "issue": "turn 5 смешивает чеклист с ranking, что немного сбивает с толку",
            "count": 1
          },
          {
            "issue": "turn 4: форматирование сломано (пропущены названия компаний, только ссылки)",
            "count": 1
          },
          {
            "issue": "turn 4: фраза 'подтвержденных карточек меньше, чем запрошено' звучит как отмазка",
            "count": 1
          },
          {
            "issue": "generic fallback на turn 2 по автозапчастям без конкретики",
            "count": 1
          },
          {
            "issue": "на turn 4 ассистент теряет названия компаний в списке (только 'почему вероятнее')",
            "count": 1
          },
          {
            "issue": "turn 4 предлагает 'массовую рассылку' для 48-часового срока — непрактично",
            "count": 1
          },
          {
            "issue": "критический сбой continuity: turn 2 дал 3 минских завода, turn 3 предлагает звонить в брест",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "MX005",
            "usefulness": 2,
            "verdict": "not_useful",
            "userSatisfaction": 0.45,
            "wouldContinue": false,
            "feltGenericFallback": true,
            "continuityScore": 2,
            "reasons": [
              "Turn 3: после конкретной критики ассистент даёт generic fallback с шаблонными вопросами",
              "Turn 3: предлагает звонить в Брест (Савушкин, Брестское мороженое) когда пользователь просил Минск"
            ],
            "criticalIssues": [
              "Критический сбой continuity: turn 2 дал 3 минских завода, turn 3 предлагает звонить в Брест",
              "Generic fallback на turn 3: шаблонные вопросы про SLA и эскалацию неуместны для закупки молока"
            ]
          },
          {
            "scenarioId": "MX003",
            "usefulness": 3,
            "verdict": "useful",
            "userSatisfaction": 0.65,
            "wouldContinue": true,
            "feltGenericFallback": true,
            "continuityScore": 3,
            "reasons": [
              "Корректно обработан switchback (молоко -> автозапчасти -> молоко)",
              "На turn 4 ассистент честно признаёт, что только 2 подтверждённых кандидата"
            ],
            "criticalIssues": [
              "Turn 4: форматирование сломано (пропущены названия компаний, только ссылки)",
              "Turn 4: фраза 'Подтвержденных карточек меньше, чем запрошено' звучит как отмазка"
            ]
          },
          {
            "scenarioId": "MX002",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.78,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Отличная адаптация к уточнению географии (Минск -> Минская область)",
              "Предложена 2-канальная схема для покрытия обоих направлений"
            ],
            "criticalIssues": [
              "На turn 3 ассистент теряет форматирование (нет названий компаний в начале пунктов)",
              "Turn 5 смешивает чеклист с ranking, что немного сбивает с толку"
            ]
          },
          {
            "scenarioId": "MX001",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.8,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Хорошая continuity при уточнении географии (Минск -> Минская область)",
              "Ассистент честно признаёт ограничения данных, не выдумывает компании"
            ],
            "criticalIssues": [
              "На turn 3 ассистент не предложил конкретных кандидатов в Минской области, хотя мог бы предложить поиск по ближайшим районам",
              "Shortlist на turn 4 возвращается к Минску вместо поиска в Минской области"
            ]
          },
          {
            "scenarioId": "MX004",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.82,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Отличная ссылочная целостность на всех turn'ах",
              "Честность о 48 часах на turn 4 (нет подтверждённого SLA)"
            ],
            "criticalIssues": [
              "На turn 4 ассистент теряет названия компаний в списке (только 'Почему вероятнее')",
              "Turn 4 предлагает 'массовую рассылку' для 48-часового срока — непрактично"
            ]
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "MX001",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.85,
          "userSatisfaction": 0.8,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Хорошая continuity при уточнении географии (Минск -> Минская область)",
            "Ассистент честно признаёт ограничения данных, не выдумывает компании",
            "RFQ на turn 5 полезен и готов к использованию"
          ],
          "criticalIssues": [
            "На turn 3 ассистент не предложил конкретных кандидатов в Минской области, хотя мог бы предложить поиск по ближайшим районам",
            "Shortlist на turn 4 возвращается к Минску вместо поиска в Минской области"
          ],
          "strengths": [
            "Прозрачность о недостатке данных в Минской области",
            "Структурированные ответы с конкретными ссылками",
            "Готовый RFQ текст высокого качества"
          ],
          "nextUserProbe": "А есть ли у вас данные по Слуцкому или Дзержинскому району Минской области?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX002",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.82,
          "userSatisfaction": 0.78,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Отличная адаптация к уточнению географии (Минск -> Минская область)",
            "Предложена 2-канальная схема для покрытия обоих направлений",
            "Чеклист на turn 5 практичен и готов к использованию"
          ],
          "criticalIssues": [
            "На turn 3 ассистент теряет форматирование (нет названий компаний в начале пунктов)",
            "Turn 5 смешивает чеклист с ranking, что немного сбивает с толку"
          ],
          "strengths": [
            "Логистическая осмысленность (Аврасторг для двух направлений)",
            "Честность о необходимости проверки наличия лука у поставщиков",
            "Чеклист звонка покрывает ключевые бизнес-параметры"
          ],
          "nextUserProbe": "Уточните, пожалуйста, у Аврасторга есть ли у них собственное хранилище лука?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX003",
          "usefulness": 3,
          "verdict": "useful",
          "confidence": 0.75,
          "userSatisfaction": 0.65,
          "wouldContinue": true,
          "feltGenericFallback": true,
          "continuityScore": 3,
          "reasons": [
            "Корректно обработан switchback (молоко -> автозапчасти -> молоко)",
            "На turn 4 ассистент честно признаёт, что только 2 подтверждённых кандидата",
            "Turn 5 задаёт уточняющие вопросы вместо выдумывания"
          ],
          "criticalIssues": [
            "Turn 4: форматирование сломано (пропущены названия компаний, только ссылки)",
            "Turn 4: фраза 'Подтвержденных карточек меньше, чем запрошено' звучит как отмазка",
            "Generic fallback на turn 2 по автозапчастям без конкретики"
          ],
          "strengths": [
            "Не выдумывает третью компанию для top-3",
            "Вопросы на turn 5 релевантны и помогут сузить поиск"
          ],
          "nextUserProbe": "Давайте сосредоточимся на производителях в Бресте, питьевое молоко.",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX004",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.88,
          "userSatisfaction": 0.82,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Отличная ссылочная целостность на всех turn'ах",
            "Честность о 48 часах на turn 4 (нет подтверждённого SLA)",
            "RFQ на turn 5 полностью соответствует запросу"
          ],
          "criticalIssues": [
            "На turn 4 ассистент теряет названия компаний в списке (только 'Почему вероятнее')",
            "Turn 4 предлагает 'массовую рассылку' для 48-часового срока — непрактично"
          ],
          "strengths": [
            "Структурированный топ-3 с чёткими критериями ранжирования",
            "RFQ охватывает все ключевые параметры для закупки кабеля",
            "Признание ограничений данных без generic fallback"
          ],
          "nextUserProbe": "Позвонил в БелСтройКомплект — у них ВВГнг 3х2.5 есть, но отгрузка 72 часа. Есть ли альтернативы?",
          "judge": "kimi"
        },
        {
          "scenarioId": "MX005",
          "usefulness": 2,
          "verdict": "not_useful",
          "confidence": 0.8,
          "userSatisfaction": 0.45,
          "wouldContinue": false,
          "feltGenericFallback": true,
          "continuityScore": 2,
          "reasons": [
            "Turn 3: после конкретной критики ассистент даёт generic fallback с шаблонными вопросами",
            "Turn 3: предлагает звонить в Брест (Савушкин, Брестское мороженое) когда пользователь просил Минск",
            "Потеря контекста: игнорирование уже названных минских заводов на turn 2"
          ],
          "criticalIssues": [
            "Критический сбой continuity: turn 2 дал 3 минских завода, turn 3 предлагает звонить в Брест",
            "Generic fallback на turn 3: шаблонные вопросы про SLA и эскалацию неуместны для закупки молока",
            "Нарушение инструкции пользователя 'Не уходи в общие советы'"
          ],
          "strengths": [
            "Turn 2 отлично отреагировал на критику — дал 3 конкретных минских завода с контактами",
            "RFQ на turn 4 качественный и структурированный"
          ],
          "nextUserProbe": "Вы уже называли Минский молочный завод №1 — почему теперь предлагаете Брест?",
          "judge": "kimi"
        }
      ]
    },
    {
      "judge": "minimax",
      "summary": {
        "total": 5,
        "averageUsefulness": 4.2,
        "usefulCount": 5,
        "notUsefulCount": 0,
        "usefulRate": 1,
        "zeroUsefulnessCount": 0,
        "averageUserSatisfaction": 0.81,
        "continueCount": 5,
        "continueRate": 1,
        "genericFallbackCount": 0,
        "genericFallbackRate": 0,
        "averageContinuityScore": 4.6,
        "topIssues": [
          {
            "issue": "turn 4: топ-3 сломался — только 2 реальных кандидата, не стал искать дальше",
            "count": 1
          },
          {
            "issue": "turn 1 был слишком общим — ушёл в общие советы вместо конкретики",
            "count": 1
          }
        ],
        "worstScenarios": [
          {
            "scenarioId": "MX002",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.85,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Плавная адаптация к уточнениям: Минск → Минская область → +Брест",
              "Конкретный shortlist с пояснениями выбора"
            ],
            "criticalIssues": []
          },
          {
            "scenarioId": "MX003",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.7,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "Корректно обрабатывает switchback смену темы",
              "Возвращается к молоку без потери контекста"
            ],
            "criticalIssues": [
              "Turn 4: топ-3 сломался — только 2 реальных кандидата, не стал искать дальше"
            ]
          },
          {
            "scenarioId": "MX005",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.75,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 4,
            "reasons": [
              "После критики даёт конкретных кандидатов по Минску",
              "Отвечает на негативную обратную связь конструктивно"
            ],
            "criticalIssues": [
              "Turn 1 был слишком общим — ушёл в общие советы вместо конкретики"
            ]
          },
          {
            "scenarioId": "MX004",
            "usefulness": 4,
            "verdict": "useful",
            "userSatisfaction": 0.85,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Отличная geo-специфика: Гомель → Советский район",
              "Все ссылки на карточки валидны"
            ],
            "criticalIssues": []
          },
          {
            "scenarioId": "MX001",
            "usefulness": 5,
            "verdict": "useful",
            "userSatisfaction": 0.9,
            "wouldContinue": true,
            "feltGenericFallback": false,
            "continuityScore": 5,
            "reasons": [
              "Отличная непрерывность контекста через все 5 turns: Брест → Минск → Минская область",
              "Конкретные поставщики с ссылками на карточки"
            ],
            "criticalIssues": []
          }
        ]
      },
      "ratings": [
        {
          "scenarioId": "MX001",
          "usefulness": 5,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.9,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Отличная непрерывность контекста через все 5 turns: Брест → Минск → Минская область",
            "Конкретные поставщики с ссылками на карточки",
            "Готовый RFQ-шаблон в нужном формате (email + WhatsApp)"
          ],
          "criticalIssues": [],
          "strengths": [
            "Честно ограничивает список доступными данными",
            "Правильно уточняет географию в каждом шаге",
            "Практичный follow-up с конкретными критериями сравнения"
          ],
          "nextUserProbe": "Можешь сравнить этих 3 поставщиков по ценам и условиям доставки?",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX002",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.9,
          "userSatisfaction": 0.85,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Плавная адаптация к уточнениям: Минск → Минская область → +Брест",
            "Конкретный shortlist с пояснениями выбора",
            "Практичный чеклист звонка на 6 пунктов"
          ],
          "criticalIssues": [],
          "strengths": [
            "Учитывает логистику в оба направления",
            "Даёт чёткий порядок прозвона",
            "Включает проверку документов в чеклист"
          ],
          "nextUserProbe": "Позвонил Аврасторг — какие условия по луку на 2 тонны?",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX003",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.9,
          "userSatisfaction": 0.7,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "Корректно обрабатывает switchback смену темы",
            "Возвращается к молоку без потери контекста",
            "Финальный ответ — 2 точных вопроса для продолжения"
          ],
          "criticalIssues": [
            "Turn 4: топ-3 сломался — только 2 реальных кандидата, не стал искать дальше"
          ],
          "strengths": [
            "Не выдумывает компании в третью позицию",
            "Честно признаёт ограничения данных"
          ],
          "nextUserProbe": "Да, добавь дистрибьюторов из Брестской области с доставкой",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX004",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.95,
          "userSatisfaction": 0.85,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 5,
          "reasons": [
            "Отличная geo-специфика: Гомель → Советский район",
            "Все ссылки на карточки валидны",
            "Честно признаёт отсутствие подтверждённых 48 часов в SLA"
          ],
          "criticalIssues": [],
          "strengths": [
            "Готовый RFQ во всех запрошенных форматах",
            "Практичный вопрос для отсева по срокам",
            "Прозрачное ранжирование с критериями"
          ],
          "nextUserProbe": "Отправлю этот RFQ БелСтройКомплект — можешь проверить их отзывы?",
          "judge": "minimax"
        },
        {
          "scenarioId": "MX005",
          "usefulness": 4,
          "verdict": "useful",
          "confidence": 0.9,
          "userSatisfaction": 0.75,
          "wouldContinue": true,
          "feltGenericFallback": false,
          "continuityScore": 4,
          "reasons": [
            "После критики даёт конкретных кандидатов по Минску",
            "Отвечает на негативную обратную связь конструктивно",
            "Правильно структурирует RFQ по формату"
          ],
          "criticalIssues": [
            "Turn 1 был слишком общим — ушёл в общие советы вместо конкретики"
          ],
          "strengths": [
            "Быстрая адаптация после замечания пользователя",
            "Конкретные контакты заводов с телефонами",
            "Понятный приоритет прозвона"
          ],
          "nextUserProbe": "Первый завтра звонит на Минский молочный — что у них спросить?",
          "judge": "minimax"
        }
      ]
    }
  ],
  "comparison": {
    "geminiAvg": null,
    "kimiAvg": 3.4,
    "minimaxAvg": 4.2,
    "geminiUserSatisfaction": null,
    "kimiUserSatisfaction": 0.7,
    "geminiContinueRate": null,
    "kimiContinueRate": 0.8,
    "geminiGenericFallbackRate": null,
    "kimiGenericFallbackRate": 0.4,
    "avgGap": null,
    "usefulRateGap": null,
    "pairwise": [
      {
        "left": "kimi",
        "right": "minimax",
        "avgGap": -0.8,
        "usefulRateGap": -0.2,
        "userSatisfactionGap": -0.11,
        "continueRateGap": -0.2,
        "genericFallbackRateGap": 0.4
      }
    ]
  },
  "gate": {
    "enabled": true,
    "pass": false,
    "failures": [
      "kimi averageUserSatisfaction 0.7 < 0.72",
      "kimi genericFallbackRate 0.4 > 0.35"
    ],
    "checks": [
      {
        "judge": "kimi",
        "metric": "averageUserSatisfaction",
        "actual": 0.7,
        "expected": ">= 0.72",
        "pass": false
      },
      {
        "judge": "kimi",
        "metric": "continueRate",
        "actual": 0.8,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "kimi",
        "metric": "genericFallbackRate",
        "actual": 0.4,
        "expected": "<= 0.35",
        "pass": false
      },
      {
        "judge": "minimax",
        "metric": "averageUserSatisfaction",
        "actual": 0.81,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "minimax",
        "metric": "continueRate",
        "actual": 1,
        "expected": ">= 0.72",
        "pass": true
      },
      {
        "judge": "minimax",
        "metric": "genericFallbackRate",
        "actual": 0,
        "expected": "<= 0.35",
        "pass": true
      }
    ]
  }
}
